(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46d33a07"],{"1d46":function(s,t,e){"use strict";e.r(t);var a=function(){var s=this,t=s._self._c;return t("div",{staticClass:"page_user user_info",attrs:{id:"user_info"}},[t("div",{staticClass:"warp"},[t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-md-9"},[t("div",{staticClass:"card_info pl-2"},[t("div",{staticClass:"div_info"},[t("span",[s._v(" 个人资料 ")]),t("div",{staticClass:"content_msg"},[t("div",{staticClass:"left_msg"},[t("div",{staticClass:"figure_avatar"},[t("span",[s._v("头像：")]),t("b-img",{staticClass:"user_avator",staticStyle:{width:"3rem",height:"3rem"},attrs:{src:s.obj.avatar?s.$fullUrl(s.obj.avatar):"../../../public/img/default.png",alt:""}})],1),t("div",{staticClass:"nickname"},[s._m(0),t("div",{style:"display:"+s.display_name+";"},[t("span",{staticStyle:{"font-size":"1.2rem",color:"var(--color_grey)"}},[s._v(" "+s._s(s.obj.nickname)+" ")])]),t("div",{staticClass:"input_nickname",style:"display:"+s.display_input+";"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.form.nickname,expression:"form.nickname"}],attrs:{type:"text",id:"nickname",focus:s.focus_input},domProps:{value:s.form.nickname},on:{input:function(t){t.target.composing||s.$set(s.form,"nickname",t.target.value)}}}),t("div",{staticClass:"btn_save",on:{click:function(t){return s.save_nickname()}}},[s._v(" 保存 ")])])])])]),t("div",{staticClass:"right_msg"},[t("b-button",{staticClass:"Change_password",on:{click:function(t){return s.$router.push("/user/password")}}},[t("span",[s._v("修改密码")])]),s.source_table&&(s.$check_action(s.source_table_check_url,"get")||s.$check_action(s.source_table_check_url,"set"))?t("b-button",{staticClass:"Change_password",on:{click:function(t){return s.$router.push(s.source_table_url)}}},[t("span",[s._v("修改资料")])]):s._e()],1)])])])])])])])},i=[function(){var s=this,t=s._self._c;return t("div",[t("span",[s._v("昵称：")])])}],r=e("c6e7"),n={mixins:[r["a"]],data(){return{url_get_obj:"~/api/user/get_obj?",query:{user_id:this.$store.state.user.user_id},display_input:"none",display_name:"block",form:{},focus_input:!1,list_info:[{title:"个人资料",url:"/user/info",icon:"house-fill",selected:!0},{title:"密码修改",url:"/user/password",icon:"person-fill",selected:!1},{title:"收藏",url:"/user/collect",icon:"heart-fill",selected:!1}],file:null,source_table:null,source_table_name:null,source_table_check_url:"",source_table_url:""}},methods:{async change_avatar(s){var t=this,e=new FormData;e.append("file",s[0]);var a=await this.$post("~/api/user/upload?",e);if(console.log(a),a.result){var i=a.result.url;this.$post("~/api/user/set?user_id="+t.user.user_id,{avatar:i},s=>{this.user.avatar=i,this.obj.avatar=i})}else this.$toast(a.error.message)},change_nickname(){this.display_input="flex",this.display_name="none",this.focus_input=!0},save_nickname(){var s=this.user.user_id,t=this.form.nickname;this.$post("~/api/user/set?user_id="+s,{nickname:t},s=>{console.log(s),this.focus_input=!1,this.display_input="none",this.display_name="block",this.user.nickname=t,this.obj.nickname=t})},get_obj_before(s){return s.user_id=this.$store.state.user.user_id,s},async get_obj_after(s,t){let e=this.$store.state.user.user_group;s=await this.$get("~/api/user_group/get_obj?name="+e);s.result&&s.result.obj&&s.result.obj.source_table&&(this.source_table=s.result.obj.source_table,this.source_table_name=e,this.source_table_check_url="/"+this.source_table+"/view",this.source_table_url=this.source_table_check_url+"?user_id="+this.form.user_id)}},components:{}},c=n,l=(e("8b7d"),e("0b56")),o=Object(l["a"])(c,a,i,!1,null,"5193628c",null);t["default"]=o.exports},"8b7d":function(s,t,e){"use strict";e("cd8a")},cd8a:function(s,t,e){}}]);