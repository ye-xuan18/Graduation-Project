{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Desktop/code/ending/shop/pages/navigation/search/searchPage.vue?cf82","webpack:///D:/Desktop/code/ending/shop/pages/navigation/search/searchPage.vue?57cc","webpack:///D:/Desktop/code/ending/shop/pages/navigation/search/searchPage.vue?1bcb","webpack:///D:/Desktop/code/ending/shop/pages/navigation/search/searchPage.vue?ff61","uni-app:///pages/navigation/search/searchPage.vue","webpack:///D:/Desktop/code/ending/shop/pages/navigation/search/searchPage.vue?e7c3","webpack:///D:/Desktop/code/ending/shop/pages/navigation/search/searchPage.vue?3276"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","empty","scrollTop","loadIndex","oldKeywordIndex","selectedWay","brand","categoryId","prop","sortPopup","navObj","background","typeSortData","type","index","goodsHeight","defaultKeyword","keyword","oldKeywordList","hotKeywordList","keywordList","goodsList","cateMaskState","loadingType","filterIndex","cateId","priceOrder","cateList","isShowSeachGoods","isShowKeywordList","sortData","isSWitch","params","pageNumber","pageSize","minPrice","maxPrice","sortParams","routerVal","onPageScroll","console","onLoad","components","mSearch","watch","onReachBottom","mounted","windowWidth","windowHeight","uni","success","top","topHeight","nav","navHeight","methods","getPromotion","Object","array","showMore","sortConfim","repick","handleSort","val","item","init","blur","back","delta","navigateToDetailPage","url","navigateToStoreDetailPage","loadmore","initSortGoods","res","child","title","__selected","sortGoods","tabClick","duration","loadDefaultKeyword","loadOldKeyword","key","loadHotKeyword","keywords","hotData","time","storage","loadData","drawCorrelativeKeyword","keywordArr","html","htmlStr","setKeyword","oldDelete","content","doSearchSwitch","doSearch","saveKeyword","OldKeys","fail"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACsC;;;AAG/F;AACiM;AACjM,gBAAgB,kMAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,uNAEN;AACP,KAAK;AACL;AACA,aAAa,8MAEN;AACP,KAAK;AACL;AACA,aAAa,oQAEN;AACP,KAAK;AACL;AACA,aAAa,gOAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9DA;AAAA;AAAA;AAAA;AAA6vB,CAAgB,6tBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC6MjxB;AAEA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MAEAC;MAAA;MACAC;QACAC;MACA;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;QACAC;QACAC;QACA;;QAEAjB;MACA;MACAkB;MACAC;MACAC;QACAJ;QACAC;QAEA;QACA;QACA;QACA3B;MACA;MAEA+B;IACA;EACA;EAEAC;IACAC;IACA;EACA;EACAC;IAAA;IACA;IACA;IACA;;IAEA;;IAEA;IACA;MACA;MACA;MACA;MACA;QACA;MACA;IACA;IACA;MACA;MACA;IACA;IACA;MACA;MACA;IACA;IACA;MACA;MACA;IACA;IACA;MACA;MACA;IACA;IACA;EACA;EACAC;IACAC;IACAtB;EACA;EACAuB;IACA;AACA;AACA;IACA3B;MACA;QACA;UACA;QACA;MACA;QACA;MACA;IACA;IACAR;MACA;QACA;UAAAH;UAAAC;UAAAC;QAAA;MACA;IACA;EACA;EAEAqC;IACA;IACA;EACA;EAEAC;IACA;MAAAC;MAAAC;IAEA;IACA;IAEAC;MACAC;QACA;;QAEA;QACAC;UACA;YACA;YACAC;UACA;QACA;QACA;QACAC;UACA;YACA;YACAC;UACA;QACA;MACA;IACA;IACA;IAIA;EACA;EAEAC;IACA;IACAC;MACA;QACA;QACAC;UACA;YACAC;UACA;QACA;QAEA;MACA;IACA;IACA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QACA;MACA;QACA;MACA;;MAEA;MACA;QACA;UACA;QACA;MACA;MAEA;;MAEA;MACA;QACA;MACA;MACA;QACA;MACA;QACA;MACA;MAEA;QACA;UACA;QACA;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;MAEA;MAEA;MACA;MAEA;MACA;IACA;IAEA;IACAC;MACA;QACA5B;QACAC;QACA3B;MACA;MACA;MACA;MACA;MACA;MACA;QACA0B;QACAC;QACA3B;MACA;MACA;MACA;IACA;IAEA;IACAuD;MACA;QACAC;MACA;MACA;MACA;QACA;UACAC;QACA;QACAD;MACA;QACAA;MACA;IACA;IAEAE;MACA;MACA;MACA;MACA;IACA;IACAC;MACAjB;IACA;IACAkB;MACAlB;QACAmB;MACA;IACA;IACA;IACAC;MACApB;QACAqB;MACA;IACA;IACA;IACAC;MACAtB;QACAqB;MACA;IACA;IACAE;MACA;MACA;IACA;IACAC;MAAA;MACA;QACA;UACA;YAAA;YACAC;cACAC;;cAEA;cACA;gBACAA;kBAAA;oBACAC;oBACAC;kBACA;gBAAA;cACA;YACA;UACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;QACA;QAEA;MACA;QACA;QACA;MACA;MAEA;QACA;QACA;MACA;MAEA;MAEA9B;QACA+B;QACA9E;MACA;MACA;MACA+C;QACA2B;MACA;IACA;IACA;IACAK;MACA;AACA;AACA;AACA;MACA;QACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACAjC;QACAkC;QACAjC;UACA;UACA;UACA;YACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;AACA;AACA;IACAkC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAAV;gBACAW;gBAEAA;kBACA;gBACA;gBAEAC;kBACAC;kBACAF;gBACA;gBACAG;gBAAA;gBAAA;cAAA;gBAEAH;gBAEAA;kBACA;gBACA;cAAA;gBAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAI;MAAA;MAAA;QAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;kBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAApE;gBACA;kBACA;kBACA;gBACA;kBACA;gBACA;gBACA;gBAEA;gBACA;kBAAA4B;gBAAA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAyC;MACA;QACAC;MACA;QACA;QACA;QACA;QACAC;QACA;UACA3E;UACA4E;QACA;QACAF;MACA;MACA;IACA;IACA;IACAG;MACA;IACA;IACA;IACAC;MAAA;MACA9C;QACA+C;QACA9C;UACA;YACA;YACAD;cACAkC;YACA;UACA;QACA;MACA;IACA;IAEA;IACAc;MACA;MACA;MACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACAjF;MAEA;QACA;AACA;AACA;AACA;AACA;QACAA;MACA;MACA;MAGAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAkF;MAAA;MACA;MACAlD;QACAkC;QACAjC;UACA;UACA;UACA;YACAkD;UACA;YACAA;YACAA;UACA;UACA;UACAA;UAEAnD;YACAkC;YACAnF;UACA;UACA;QACA;;QACAqG;UACA;UACApD;YACAkC;YACAnF;UACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC5uBA;AAAA;AAAA;AAAA;AAAw7C,CAAgB,wzCAAG,EAAC,C;;;;;;;;;;;ACA58C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/navigation/search/searchPage.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/navigation/search/searchPage.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./searchPage.vue?vue&type=template&id=2ad6355c&scoped=true&\"\nvar renderjs\nimport script from \"./searchPage.vue?vue&type=script&lang=js&\"\nexport * from \"./searchPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./searchPage.vue?vue&type=style&index=0&id=2ad6355c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ad6355c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/navigation/search/searchPage.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchPage.vue?vue&type=template&id=2ad6355c&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uniLoadMore: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-load-more/uni-load-more\" */ \"@/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-input/u-input\" */ \"@/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uBackTop: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-back-top/u-back-top\" */ \"@/uview-ui/components/u-back-top/u-back-top.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !_vm.isShowSeachGoods ? _vm.oldKeywordList.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchPage.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"content\">\n\t\t<u-navbar :background=\"navObj\" :is-back=\"false\">\n\t\t\t<mSearch\n\t\t\t\tref=\"mSearch\"\n\t\t\t\tclass=\"mSearch-input-box\"\n\t\t\t\t@clickLeft=\"back\"\n\t\t\t\t:mode=\"2\"\n\t\t\t\t:placeholder=\"defaultKeyword\"\n\t\t\t\t@search=\"doSearch(false)\"\n\t\t\t\t@confirm=\"doSearch(false)\"\n\t\t\t\t@SwitchType=\"doSearchSwitch()\"\n\t\t\t\tv-model=\"keyword\"\n\t\t\t\t:isFocusVal=\"!isShowSeachGoods\"\n\t\t\t></mSearch>\n\t\t</u-navbar>\n\n\t\t<view class=\"search-keyword\" v-if=\"!isShowSeachGoods\">\n\t\t\t<scroll-view class=\"keyword-list-box\" v-show=\"isShowKeywordList\" scroll-y>\n\t\t\t\t<block v-for=\"(row, index) in keywordList\" :key=\"index\">\n\t\t\t\t\t<view class=\"keyword-entry\" hover-class=\"keyword-entry-tap\">\n\t\t\t\t\t\t<view class=\"keyword-text\" @tap.stop=\"doSearch(keywordList[index].words)\"><rich-text :nodes=\"row.words\"></rich-text></view>\n\t\t\t\t\t</view>\n\t\t\t\t</block>\n\t\t\t</scroll-view>\n\t\t\t<div class=\"keyword-box\" v-show=\"!isShowKeywordList\">\n\t\t\t\t<view class=\"keyword-block add1\">\n\t\t\t\t\t<view class=\"keyword-list-header\"><view class=\"u-tips\">热门搜索</view></view>\n\t\t\t\t\t<view class=\"keyword keywordBox\">\n\t\t\t\t\t\t<view class=\"wes\" v-for=\"(keyword, index) in hotKeywordList\" @tap=\"doSearch(keyword)\" :key=\"index\">{{ keyword }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"keyword-block\" v-if=\"oldKeywordList.length > 0\">\n\t\t\t\t\t<view class=\"keyword-list-header\"><view class=\"u-tips\">搜索历史</view></view>\n\t\t\t\t\t<div class=\"oldKeyList\">\n\t\t\t\t\t\t<div class=\"oldKeyItem\" v-if=\"keyword\" v-for=\"(keyword, index) in oldKeywordList\" :key=\"index\" @click=\"doSearch(keyword)\">\n\t\t\t\t\t\t\t<span>{{ keyword }}</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div @click=\"showMore\" v-if=\"oldKeywordIndex > loadIndex\" class=\"oldKeyItem\">展示更多</div>\n\t\t\t\t\t</div>\n\t\t\t\t</view>\n\n\t\t\t\t<div class=\"clear mp-iphonex-bottom\" @tap=\"oldDelete\">清空搜索历史</div>\n\t\t\t</div>\n\t\t</view>\n\t\t<!-- 搜索 -->\n\t\t<view class=\"goods-content\" v-if=\"isShowSeachGoods\">\n\t\t\t<view class=\"navbar\">\n\t\t\t\t<view class=\"nav-item\" :class=\"{ current: filterIndex === 0 }\" @click=\"tabClick(0)\">综合排序</view>\n\t\t\t\t<view class=\"nav-item\" :class=\"{ current: filterIndex === 3 }\" @click=\"tabClick(3, 'buyCount')\">\n\t\t\t\t\t<text>销量</text>\n\t\t\t\t\t<view class=\"p-box\">\n\t\t\t\t\t\t<view class=\"index-nav-arrow\">\n\t\t\t\t\t\t\t<image class=\"img\" src=\"/static/index/arrow-up-1.png\" v-if=\"params.sort === 'buyCount' && params.order === 'asc'\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t\t<image class=\"img\" src=\"/static/index/arrow-up.png\" v-else mode=\"aspectFit\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"index-nav-arrow\">\n\t\t\t\t\t\t\t<image class=\"img\" src=\"/static/index/arrow-down.png\" v-if=\"params.sort === 'buyCount' && params.order === 'desc'\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t\t<image class=\"img\" src=\"/static/index/arrow-down-1.png\" v-else mode=\"aspectFit\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"nav-item\" :class=\"{ current: filterIndex === 4 }\" @click=\"tabClick(4, 'price')\">\n\t\t\t\t\t<text>价格</text>\n\t\t\t\t\t<view class=\"p-box\">\n\t\t\t\t\t\t<view class=\"index-nav-arrow\">\n\t\t\t\t\t\t\t<image class=\"img\" src=\"/static/index/arrow-up-1.png\" v-if=\"params.sort === 'price' && params.order === 'asc'\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t\t<image class=\"img\" src=\"/static/index/arrow-up.png\" v-else mode=\"aspectFit\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"index-nav-arrow\">\n\t\t\t\t\t\t\t<image class=\"img\" src=\"/static/index/arrow-down.png\" v-if=\"params.sort === 'price' && params.order === 'desc'\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t\t<image class=\"img\" src=\"/static/index/arrow-down-1.png\" v-else mode=\"aspectFit\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"nav-item\" @click=\"sortGoods\">筛选</view>\n\t\t\t</view>\n\t\t\t<!-- 一行一个商品展示 -->\n\t\t\t<div v-if=\"isSWitch\">\n\t\t\t\t<scroll-view\n\t\t\t\t\t:style=\"{ height: goodsHeight }\"\n\t\t\t\t\tenableBackToTop=\"true\"\n\t\t\t\t\tlower-threshold=\"250\"\n\t\t\t\t\t@scrolltolower=\"loadmore()\"\n\t\t\t\t\tscroll-with-animation\n\t\t\t\t\tscroll-y\n\t\t\t\t\tclass=\"scoll-page\"\n\t\t\t\t>\n\t\t\t\t\t<goodsList :res=\"goodsList\" type=\"oneColumns\" :keyword=\"keyword\" />\n\t\t\t\t\t<uni-load-more :status=\"loadingType\" @loadmore=\"loadmore()\"></uni-load-more>\n\t\t\t\t</scroll-view>\n\t\t\t</div>\n\t\t\t<!-- 一行两个商品展示 -->\n\t\t\t<div v-if=\"!isSWitch && !(goodsList == [] || goodsList == '' || goodsList == null)\">\n\t\t\t\t<scroll-view\n\t\t\t\t\t:style=\"{ height: goodsHeight }\"\n\t\t\t\t\tscroll-anchoring\n\t\t\t\t\tenableBackToTop=\"true\"\n\t\t\t\t\t@scrolltolower=\"loadmore()\"\n\t\t\t\t\tscroll-with-animation\n\t\t\t\t\tscroll-y\n\t\t\t\t\tlower-threshold=\"250\"\n\t\t\t\t\tclass=\"scoll-page\"\n\t\t\t\t>\n\t\t\t\t\t<goodsList :res=\"goodsList\" :keyword=\"keyword\" />\n\t\t\t\t\t<uni-load-more :status=\"loadingType\"></uni-load-more>\n\t\t\t\t</scroll-view>\n\t\t\t</div>\n\t\t</view>\n\n\t\t<u-popup border-radius=\"20\" mode=\"right\" width=\"90%\" v-model=\"sortPopup\">\n\t\t\t<view class=\"status_bar\"></view>\n\t\t\t<view class=\"sort-box  \">\n\t\t\t\t<view class=\"sort-list\">\n\t\t\t\t\t<view class=\"sort-item\">\n\t\t\t\t\t\t<view class=\"sort-title\">品牌</view>\n\t\t\t\t\t\t<view class=\"flex\" v-if=\"sortData.brands\">\n\t\t\t\t\t\t\t<view class=\"sort-brand-item\" :key=\"brandsIndex\" v-for=\"(brand, brandsIndex) in sortData.brands\" @click=\"handleSort(brand, brandsIndex, 'brand')\">\n\t\t\t\t\t\t\t\t<view\n\t\t\t\t\t\t\t\t\tclass=\"sort-radius\"\n\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t'sort-active': brand.__selected\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ brand.name }}\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<!-- <u-empty v-else text=\"暂无品牌\" mode=\"list\"></u-empty> -->\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"sort-item\">\n\t\t\t\t\t\t<view class=\"sort-title\">全部分类</view>\n\t\t\t\t\t\t<view class=\"flex\" style=\"flex-wrap: wrap;\" v-if=\"sortData.categories\">\n\t\t\t\t\t\t\t<view\n\t\t\t\t\t\t\t\tclass=\"sort-brand-item\"\n\t\t\t\t\t\t\t\t:key=\"categoriesIndex\"\n\t\t\t\t\t\t\t\tv-for=\"(categoryId, categoriesIndex) in sortData.categories\"\n\t\t\t\t\t\t\t\t@click=\"handleSort(categoryId, categoriesIndex, 'categoryId')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<view\n\t\t\t\t\t\t\t\t\tclass=\"sort-radius\"\n\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t'sort-active': categoryId.__selected\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ categoryId.name }}\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<!-- <u-empty v-else text=\"暂无分类\" mode=\"list\"></u-empty> -->\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"sort-list\">\n\t\t\t\t\t<view class=\"sort-item\">\n\t\t\t\t\t\t<view class=\"sort-title\">价格区间</view>\n\t\t\t\t\t\t<view style=\"display:flex;  margin-top:20rpx;    align-items: center;\">\n\t\t\t\t\t\t\t<view class=\"sort-brand-item uinput\">\n\t\t\t\t\t\t\t\t<view class=\"sort-radius\"><u-input v-model=\"minPrice\" type=\"number\" placeholder=\"最低价\" input-align=\"center\" /></view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view>-</view>\n\t\t\t\t\t\t\t<view class=\"sort-brand-item uinput\">\n\t\t\t\t\t\t\t\t<view class=\"sort-radius\"><u-input v-model=\"maxPrice\" type=\"number\" placeholder=\"最高价\" input-align=\"center\" /></view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"sort-list\" v-if=\"sortData.paramOptions\">\n\t\t\t\t\t<view class=\"sort-item\" :key=\"paramIndex\" v-for=\"(param, paramIndex) in sortData.paramOptions\">\n\t\t\t\t\t\t<view class=\"sort-title\">{{ param.key }}</view>\n\t\t\t\t\t\t<view class=\"flex\" style=\"flex-warp:warp\" v-if=\"param.values\">\n\t\t\t\t\t\t\t<view class=\"sort-brand-item\" :key=\"i\" v-for=\"(value, i) in param.values\" @click=\"handleSort(value, i, 'prop', param)\">\n\t\t\t\t\t\t\t\t<view\n\t\t\t\t\t\t\t\t\tclass=\"sort-radius\"\n\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t'sort-active': value.__selected\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ value.title }}\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<div class=\"null-view\"></div>\n\t\t\t\t<view class=\"sort-btn mp-iphonex-bottom\">\n\t\t\t\t\t<view class=\"sort-btn-repick\" @click=\"repick\">重置</view>\n\t\t\t\t\t<view class=\"sort-btn-confim\" @click=\"sortConfim\">确定</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</u-popup>\n\t\t<div class=\"empty\" v-if=\"empty\">\n\t\t\t<view><image style=\"width: 320rpx; height: 240rpx\" src=\"/static/nodata.png\"></image></view>\n\t\t\t<view>\n\t\t\t\t<p>没有找到相关的商品信息</p>\n\t\t\t\t<p>请换一个关键词试试吧</p>\n\t\t\t</view>\n\t\t</div>\n\t\t<u-back-top :scroll-top=\"scrollTop\"></u-back-top>\n\t</view>\n</template>\n\n<script>\nimport { getGoodsList, getGoodsRelated } from '@/api/goods.js';\nimport goodsList from '@/components/m-goods-list/list.vue';\nimport { getHotKeywords } from '@/api/home.js';\nimport mSearch from '@/components/m-search-revision/m-search-revision.vue';\nimport storage from '@/utils/storage';\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tempty: false,\n\t\t\tscrollTop: 0,\n\t\t\tloadIndex: 10,\n\t\t\toldKeywordIndex: 0,\n\t\t\tselectedWay: {\n\t\t\t\tbrand: [],\n\t\t\t\tcategoryId: [],\n\t\t\t\tprop: []\n\t\t\t},\n\n\t\t\tsortPopup: false, //筛选的开关\n\t\t\tnavObj: {\n\t\t\t\tbackground: '#fff'\n\t\t\t},\n\t\t\ttypeSortData: {\n\t\t\t\ttype: '',\n\t\t\t\tindex: ''\n\t\t\t},\n\t\t\tgoodsHeight: '',\n\t\t\tdefaultKeyword: '',\n\t\t\tkeyword: '',\n\t\t\toldKeywordList: [],\n\t\t\thotKeywordList: [],\n\t\t\tkeywordList: [],\n\t\t\tgoodsList: [],\n\n\t\t\tcateMaskState: 0, //分类面板展开状态\n\t\t\tloadingType: 'more', //加载更多状态\n\t\t\tfilterIndex: 0,\n\t\t\tcateId: 0, //已选三级分类id\n\t\t\tpriceOrder: 0, //1 价格从低到高 2价格从高到低\n\t\t\tcateList: [],\n\t\t\tisShowSeachGoods: false,\n\t\t\tisShowKeywordList: false,\n\t\t\tsortData: '',\n\t\t\tisSWitch: false,\n\n\t\t\tparams: {\n\t\t\t\tpageNumber: 1,\n\t\t\t\tpageSize: 10,\n\t\t\t\t// sort: 'grade_asc',\n\n\t\t\t\tkeyword: ''\n\t\t\t},\n\t\t\tminPrice: '',\n\t\t\tmaxPrice: '',\n\t\t\tsortParams: {\n\t\t\t\tpageNumber: 1,\n\t\t\t\tpageSize: 10,\n\n\t\t\t\t// price: \"\", //价格,示例值(10_30)\n\t\t\t\t// prop: \"\", //属性:参数名_参数值@参数名_参数值,示例值(屏幕类型_LED@屏幕尺寸_15英寸)\n\t\t\t\t// brandId:\"\", //品牌,可以多选 品牌Id@品牌Id@品牌Id\n\t\t\t\tcategoryId: ''\n\t\t\t},\n\n\t\t\trouterVal: ''\n\t\t};\n\t},\n\n\tonPageScroll(e) {\n\t\tconsole.log(e);\n\t\tthis.scrollTop = e.scrollTop;\n\t},\n\tonLoad(val) {\n\t\tthis.init();\n\t\t//  this.initSortGoods();\n\t\t// 接收分类的数据\n\n\t\tthis.routerVal = val;\n\n\t\t// 有值\n\t\tif (this.routerVal.category) {\n\t\t\tthis.params.categoryId = this.routerVal.category;\n\t\t\tthis.sortParams.categoryId = this.routerVal.category;\n\t\t\tthis.isShowSeachGoods = true;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.mSearch.isShowSeachGoods = true;\n\t\t\t});\n\t\t}\n\t\tif (this.routerVal.keyword) {\n\t\t\tthis.params.keyword = this.routerVal.keyword;\n\t\t\tthis.isShowSeachGoods = true;\n\t\t}\n\t\tif (this.routerVal.storeId) {\n\t\t\tthis.params.storeId = this.routerVal.storeId;\n\t\t\tthis.isShowSeachGoods = true;\n\t\t}\n\t\tif (this.routerVal.promotionType) {\n\t\t\tthis.params.promotionType = this.routerVal.promotionType;\n\t\t\tthis.isShowSeachGoods = true;\n\t\t}\n\t\tif (this.routerVal.promotionsId) {\n\t\t\tthis.params.promotionsId = this.routerVal.promotionsId;\n\t\t\tthis.isShowSeachGoods = true;\n\t\t}\n\t\tthis.loadData();\n\t},\n\tcomponents: {\n\t\tmSearch,\n\t\tgoodsList\n\t},\n\twatch: {\n\t\t/**\n\t\t * 将搜索的字和热词进行匹配,如果为热词则不改商品搜索关键字\n\t\t */\n\t\tkeyword(val) {\n\t\t\tif (val) {\n\t\t\t\tif (val) {\n\t\t\t\t\tthis.defaultKeyword = val;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.defaultKeyword = '请输入搜索商品';\n\t\t\t}\n\t\t},\n\t\tsortPopup(val) {\n\t\t\tif (val) {\n\t\t\t\tthis.selectedWay = { brand: [], categoryId: [], prop: [] };\n\t\t\t}\n\t\t}\n\t},\n\n\tonReachBottom() {\n\t\tthis.params.pageNumber++;\n\t\tthis.loadData();\n\t},\n\n\tmounted() {\n\t\tconst { windowWidth, windowHeight } = uni.getSystemInfoSync();\n\n\t\tlet topHeight = 0;\n\t\tlet navHeight = 0;\n\n\t\tuni.getSystemInfo({\n\t\t\tsuccess: function(res) {\n\t\t\t\t// res - 各种参数\n\n\t\t\t\tlet top = uni.createSelectorQuery().select('.u-navbar');\n\t\t\t\ttop.boundingClientRect(function(data) {\n\t\t\t\t\tif (data && data.height) {\n\t\t\t\t\t\t//data - 各种参数\n\t\t\t\t\t\ttopHeight = data.height; // 获取元素宽度\n\t\t\t\t\t}\n\t\t\t\t}).exec();\n\t\t\t\tlet nav = uni.createSelectorQuery().select('.navbar');\n\t\t\t\tnav.boundingClientRect(function(data) {\n\t\t\t\t\tif (data && data.height) {\n\t\t\t\t\t\t//data - 各种参数\n\t\t\t\t\t\tnavHeight = data.height; // 获取元素宽度\n\t\t\t\t\t}\n\t\t\t\t}).exec();\n\t\t\t}\n\t\t});\n\t\tthis.goodsHeight = windowHeight - navHeight - topHeight;\n\t\t// #ifdef APP-PLUS\n\t\tthis.goodsHeight = this.goodsHeight - 100;\n\t\t// #endif\n\t\tthis.goodsHeight += 'px';\n\t},\n\n\tmethods: {\n\t\t// 数据去重一下 只显示一次 减免 劵 什么的\n\t\tgetPromotion(item) {\n\t\t\tif (item.promotionMap) {\n\t\t\t\tlet array = [];\n\t\t\t\tObject.keys(item.promotionMap).forEach(child => {\n\t\t\t\t\tif (!array.includes(child.split('-')[0])) {\n\t\t\t\t\t\tarray.push(child.split('-')[0]);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn array;\n\t\t\t}\n\t\t},\n\t\t// 展示更多数据\n\t\tshowMore() {\n\t\t\tthis.loadOldKeyword(this.oldKeywordIndex);\n\t\t},\n\n\t\t// 点击确定进行筛选\n\t\tsortConfim() {\n\t\t\t// 处理品牌（多选\n\t\t\tif (!this.params.brandId) {\n\t\t\t\tthis.params.brandId = [];\n\t\t\t} else {\n\t\t\t\tthis.params.brandId = [this.params.brandId];\n\t\t\t}\n\n\t\t\t// 如果选中品牌 赋值\n\t\t\tthis.selectedWay['brand'].forEach(item => {\n\t\t\t\tif (item.__selected) {\n\t\t\t\t\tthis.params.brandId.push(item.value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.params.brandId = this.params.brandId.join('@') || '';\n\n\t\t\t// 处理分类 (单选)\n\t\t\tif (this.selectedWay['categoryId'][0]) {\n\t\t\t\tthis.params.categoryId = this.selectedWay['categoryId'][0].value;\n\t\t\t}\n\t\t\tif (!this.params.prop) {\n\t\t\t\tthis.params.prop = [];\n\t\t\t} else {\n\t\t\t\tthis.params.prop = [this.params.prop];\n\t\t\t}\n\n\t\t\tthis.selectedWay['prop'].forEach(item => {\n\t\t\t\tif (item.__selected) {\n\t\t\t\t\tthis.params.prop.push(`${item.parent}_${item.title}`);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.params.prop = this.params.prop.join('@');\n\t\t\t// 处理价格\n\t\t\tif (this.minPrice || this.maxPrice) {\n\t\t\t\tthis.params.price = `${this.minPrice}_${this.maxPrice}`;\n\t\t\t} else {\n\t\t\t\tthis.params.price = 0;\n\t\t\t}\n\n\t\t\tthis.goodsList = [];\n\n\t\t\tthis.params.pageNumber = 1;\n\t\t\tthis.sortParams = this.params;\n\n\t\t\tthis.loadData();\n\t\t\tthis.sortPopup = false;\n\t\t},\n\n\t\t// 重置\n\t\trepick() {\n\t\t\tthis.sortParams = {\n\t\t\t\tpageNumber: 1,\n\t\t\t\tpageSize: 10,\n\t\t\t\tcategoryId: this.routerVal.category || ''\n\t\t\t};\n\t\t\tthis.sortPopup = false;\n\t\t\tthis.initSortGoods();\n\t\t\tthis.minPrice = '';\n\t\t\tthis.maxPrice = '';\n\t\t\tthis.params = {\n\t\t\t\tpageNumber: 1,\n\t\t\t\tpageSize: 10,\n\t\t\t\tcategoryId: this.routerVal.category || ''\n\t\t\t};\n\t\t\tthis.goodsList = [];\n\t\t\tthis.loadData();\n\t\t},\n\n\t\t// 点击筛选的内容\n\t\thandleSort(val, index, type, parent) {\n\t\t\tif (type == 'prop') {\n\t\t\t\tval.parent = parent.key;\n\t\t\t}\n\t\t\tthis.selectedWay[type].push(val);\n\t\t\tif (type == 'categoryId') {\n\t\t\t\tthis.sortData.categories.forEach(item => {\n\t\t\t\t\titem.__selected = false;\n\t\t\t\t});\n\t\t\t\tval.__selected = true;\n\t\t\t} else {\n\t\t\t\tval.__selected ? (val.__selected = false) : (val.__selected = true);\n\t\t\t}\n\t\t},\n\n\t\tinit() {\n\t\t\t// 加载搜索记录\n\t\t\tthis.loadOldKeyword(this.loadIndex);\n\t\t\t// 加载热词\n\t\t\tthis.loadHotKeyword();\n\t\t},\n\t\tblur() {\n\t\t\tuni.hideKeyboard();\n\t\t},\n\t\tback() {\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t});\n\t\t},\n\t\t// 跳转到商品详情\n\t\tnavigateToDetailPage(item) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/product/goods?id=${item.id}&goodsId=${item.goodsId}`\n\t\t\t});\n\t\t},\n\t\t// 跳转地址\n\t\tnavigateToStoreDetailPage(item) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/product/shopPage?id=${item.storeId}`\n\t\t\t});\n\t\t},\n\t\tloadmore() {\n\t\t\tthis.params.pageNumber++;\n\t\t\tthis.loadData();\n\t\t},\n\t\tinitSortGoods() {\n\t\t\tgetGoodsRelated(this.sortParams).then(res => {\n\t\t\t\tif (res.data.success) {\n\t\t\t\t\tfor (let item of Object.keys(res.data.result)) {\n\t\t\t\t\t\tres.data.result[item].forEach(child => {\n\t\t\t\t\t\t\tchild.__selected = false;\n\n\t\t\t\t\t\t\t// 循环出和品牌分类一样的数据格式\n\t\t\t\t\t\t\tif (child.values) {\n\t\t\t\t\t\t\t\tchild.values = child.values.map(item => ({\n\t\t\t\t\t\t\t\t\ttitle: item,\n\t\t\t\t\t\t\t\t\t__selected: false\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tthis.sortData = res.data.result;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t// 筛选商品\n\t\tsortGoods() {\n\t\t\tthis.sortPopup = true;\n\t\t},\n\n\t\ttabClick(index, type) {\n\t\t\tthis.params.pageNumber = 1;\n\t\t\tthis.params.pageSize = 10;\n\t\t\t// this.params.order = \"desc\";\n\t\t\tif (this.params.sort == type) {\n\t\t\t\tthis.params.order == 'asc' ? (this.params.order = 'desc') : (this.params.order = 'asc');\n\n\t\t\t\tthis.$set(this.params, 'sort', type);\n\t\t\t} else {\n\t\t\t\tthis.params.order = 'desc';\n\t\t\t\tthis.$set(this.params, 'sort', type);\n\t\t\t}\n\n\t\t\tif (index == 0) {\n\t\t\t\tthis.params.sort = 'releaseTime';\n\t\t\t\tthis.params.order = 'desc';\n\t\t\t}\n\n\t\t\tthis.filterIndex = index;\n\n\t\t\tuni.pageScrollTo({\n\t\t\t\tduration: 300,\n\t\t\t\tscrollTop: 0\n\t\t\t});\n\t\t\tthis.loadData('refresh', 1);\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '正在加载'\n\t\t\t});\n\t\t},\n\t\t//加载默认搜索关键字\n\t\tloadDefaultKeyword() {\n\t\t\t/**\n\t\t\t * 定义默认搜索关键字会根据当前热门搜索来进行显示\n\t\t\t * 如果当前热门搜索没有的话，则会显示默认关键字\n\t\t\t */\n\t\t\tif (this.hotKeywordList.length != 0) {\n\t\t\t\t//\n\t\t\t\tthis.defaultKeyword = this.hotKeywordList[0];\n\t\t\t} else {\n\t\t\t\tthis.defaultKeyword = '请输入搜索商品';\n\t\t\t}\n\t\t},\n\t\t//加载历史搜索,自动读取本地Storage\n\t\tloadOldKeyword(index) {\n\t\t\tthis.oldKeywordList = [];\n\t\t\tuni.getStorage({\n\t\t\t\tkey: 'OldKeys',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tvar OldKeys = JSON.parse(res.data);\n\t\t\t\t\tthis.oldKeywordIndex = OldKeys.length;\n\t\t\t\t\tfor (let i = 0; i < index; i++) {\n\t\t\t\t\t\tthis.oldKeywordList.push(OldKeys[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * 加载热门搜索\n\t\t * 1.5分钟之后更新缓存\n\t\t * 2.如果有缓存热门关键字则去请求缓存\n\t\t */\n\t\tasync loadHotKeyword() {\n\t\t\tthis.hotKeywordList = [];\n\t\t\tif (!storage.getHotWords().time || storage.getHotWords().time <= new Date().getTime() / 1000) {\n\t\t\t\t// 没有缓存或者第一次进入请求接口保存缓存\n\t\t\t\tlet res = await getHotKeywords(10);\n\t\t\t\tlet keywords = res.data.result;\n\n\t\t\t\tkeywords.forEach(item => {\n\t\t\t\t\tthis.hotKeywordList.push(item);\n\t\t\t\t});\n\n\t\t\t\tlet hotData = {\n\t\t\t\t\ttime: new Date().getTime() / 1000 + 30 * 5,\n\t\t\t\t\tkeywords: keywords\n\t\t\t\t};\n\t\t\t\tstorage.setHotWords(hotData);\n\t\t\t} else {\n\t\t\t\tlet keywords = storage.getHotWords().keywords;\n\n\t\t\t\tkeywords.forEach(item => {\n\t\t\t\t\tthis.hotKeywordList.push(item);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.loadDefaultKeyword();\n\t\t},\n\t\t//加载商品 ，带下拉刷新和上滑加载\n\t\tasync loadData(type, loading) {\n\t\t\tthis.loadingType = 'loading';\n\t\t\tif (type == 'refresh') {\n\t\t\t\tthis.goodsList = [];\n\t\t\t}\n\t\t\t//没有更多直接返回 #TODO\n\t\t\tlet goodsList = await getGoodsList(this.params);\n\t\t\tif (goodsList.data.result.records.length < 10) {\n\t\t\t\tthis.loadingType = 'noMore';\n\t\t\t\tthis.empty = true;\n\t\t\t} else {\n\t\t\t\tthis.empty = false;\n\t\t\t}\n\t\t\tthis.goodsList.push(...goodsList.data.result.records);\n\t\t\t\n\t\t\tthis.initSortGoods();\n\t\t\t if (this.$store.state.isShowToast){ uni.hideLoading() };\n\t\t},\n\n\t\t//高亮关键字\n\t\tdrawCorrelativeKeyword(keywords, keyword) {\n\t\t\tvar len = keywords.length,\n\t\t\t\tkeywordArr = [];\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar row = keywords[i];\n\t\t\t\t//定义高亮#9f9f9f\n\t\t\t\tvar html = row[0].replace(keyword, \"<span style='color: #9f9f9f;'>\" + keyword + '</span>');\n\t\t\t\thtml = '<div>' + html + '</div>';\n\t\t\t\tvar tmpObj = {\n\t\t\t\t\tkeyword: row[0],\n\t\t\t\t\thtmlStr: html\n\t\t\t\t};\n\t\t\t\tkeywordArr.push(tmpObj);\n\t\t\t}\n\t\t\treturn keywordArr;\n\t\t},\n\t\t//顶置关键字\n\t\tsetKeyword(index) {\n\t\t\tthis.keyword = this.keywordList[index].keyword;\n\t\t},\n\t\t//清除历史搜索\n\t\toldDelete() {\n\t\t\tuni.showModal({\n\t\t\t\tcontent: '确定清除历史搜索记录？',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tthis.oldKeywordList = [];\n\t\t\t\t\t\tuni.removeStorage({\n\t\t\t\t\t\t\tkey: 'OldKeys'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t// 样式修改布局\n\t\tdoSearchSwitch() {\n\t\t\tthis.isSWitch = !this.isSWitch;\n\t\t\tthis.isShowSeachGoods = true;\n\t\t\tthis.params.pageNumber = 1;\n\t\t\tthis.params.pageSize = 10;\n\t\t\tthis.loadData('refresh', 1);\n\t\t},\n\n\t\t/**\n\t\t * 执行搜索\n\t\t */\n\t\tdoSearch(keyword) {\n\t\t\t//  用户自行搜索/热门搜索/搜索历史\n\t\t\tkeyword = keyword === false ? this.keyword : keyword;\n\n\t\t\tif (!keyword) {\n\t\t\t\t/**\n\t\t\t\t * 进行空搜索\n\t\t\t\t * 第一次搜索如果没有关键词会将热门搜索中第一个热词进行判定\n\t\t\t\t * 如果没有热词则会展示一个空词搜索\n\t\t\t\t */\n\t\t\t\tkeyword = (this.hotKeywordList.length && this.hotKeywordList[0]) || '';\n\t\t\t}\n\t\t\tthis.defaultKeyword == '请输入搜索商品' ? (keyword = '') : '';\n\t\t\t\n\t\t\n\t\t\tkeyword ? (this.keyword = keyword) : '';\n\t\t\tthis.saveKeyword(keyword); //保存为历史\n\t\t\tthis.isShowSeachGoods = true;\n\t\t\tthis.$refs.mSearch.isShowSeachGoods = true;\n\t\t\tthis.$refs.mSearch.inputVal = keyword;\n\t\t\tthis.params.keyword = this.keyword;\n\t\t\tthis.params.pageNumber = 1;\n\t\t\tthis.$set(this.sortParams, 'keyword', keyword);\n\t\t\tthis.loadData('refresh', 1);\n\t\t},\n\t\t//保存关键字到历史记录\n\t\tsaveKeyword(keyword) {\n\t\t\tif (!keyword) return false;\n\t\t\tuni.getStorage({\n\t\t\t\tkey: 'OldKeys',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tvar OldKeys = JSON.parse(res.data);\n\t\t\t\t\tvar findIndex = OldKeys.indexOf(keyword);\n\t\t\t\t\tif (findIndex == -1) {\n\t\t\t\t\t\tOldKeys.unshift(keyword);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tOldKeys.splice(findIndex, 1);\n\t\t\t\t\t\tOldKeys.unshift(keyword);\n\t\t\t\t\t}\n\t\t\t\t\t//最多10个纪录\n\t\t\t\t\tOldKeys.length > 10 && OldKeys.pop();\n\n\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\tkey: 'OldKeys',\n\t\t\t\t\t\tdata: JSON.stringify(OldKeys)\n\t\t\t\t\t});\n\t\t\t\t\tthis.oldKeywordList = OldKeys; //更新历史搜索\n\t\t\t\t},\n\t\t\t\tfail: e => {\n\t\t\t\t\tvar OldKeys = [keyword];\n\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\tkey: 'OldKeys',\n\t\t\t\t\t\tdata: JSON.stringify(OldKeys)\n\t\t\t\t\t});\n\t\t\t\t\tthis.oldKeywordList = OldKeys; //更新历史搜索\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n<style lang=\"scss\" scoped>\n@import './search.scss';\n</style>\n","import mod from \"-!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchPage.vue?vue&type=style&index=0&id=2ad6355c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchPage.vue?vue&type=style&index=0&id=2ad6355c&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1730077892259\n      var cssReload = require(\"D:/Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}