{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Desktop/code/ending/shop/pages/order/myOrder.vue?181f","webpack:///D:/Desktop/code/ending/shop/pages/order/myOrder.vue?de2a","webpack:///D:/Desktop/code/ending/shop/pages/order/myOrder.vue?8d25","webpack:///D:/Desktop/code/ending/shop/pages/order/myOrder.vue?21e7","uni-app:///pages/order/myOrder.vue","webpack:///D:/Desktop/code/ending/shop/pages/order/myOrder.vue?ab09","webpack:///D:/Desktop/code/ending/shop/pages/order/myOrder.vue?8665"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","uniLoadMore","data","lightColor","tabCurrentIndex","navList","state","text","loadStatus","orderList","pageNumber","status","params","pageSize","tag","orderStatus","cancelShow","orderSn","reason","cancelList","rogShow","onBackPress","uni","url","onPullDownRefresh","onShow","onLoad","watch","res","methods","applyService","navigateToStore","onCancel","title","initData","waitPay","pay","sn","price","orderType","loadData","changeTab","tabClick","deleteOrder","setTimeout","cancelOrder","stateTip","stateTipColor","item","index","orderStateExp","navigateToOrderDetail","reasonChange","submitCancel","duration","icon","onRog","confirmRog","onComment","reBuy","console","navigateToLogistics"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACsC;;;AAG5F;AAC8L;AAC9L,gBAAgB,kMAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8MAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,uNAEN;AACP,KAAK;AACL;AACA,aAAa,8MAEN;AACP,KAAK;AACL;AACA,aAAa,wSAEN;AACP,KAAK;AACL;AACA,aAAa,8MAEN;AACP,KAAK;AACL;AACA,aAAa,oNAEN;AACP,KAAK;AACL;AACA,aAAa,8MAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjHA;AAAA;AAAA;AAAA;AAA2uB,CAAgB,0tBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACwN/vB;AACA;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MACA;MACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAJ;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAJ;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAJ;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAJ;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAJ;QACAC;QACAC;QACAC;QACAC;MACA,EACA;MACAC;MAAA;MACAC;QACAF;QACAG;QACAC;MACA;MACAC;MACA;MACA;QACAA;MACA,GACA;QACAA;MACA,GACA;QACAA;MACA,GACA;QACAA;MACA,GACA;QACAA;MACA,GACA;QACAA;MACA,GACA;QACAA;MACA,EACA;;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EAEA;AACA;AACA;EACAC;IACA;MACAC;QACAC;MACA;MACA;IACA;EACA;EACAC;IACA;MACA;IACA;MACA;IACA;IACA;EACA;EACAC;IACA;MACA;QACA;MACA;IACA;IACA;EACA;EAEAC;IACA;AACA;AACA;AACA;IACA;IACA;IAEA;IACA;IACA;IACA;EACA;;EAEAC;IACA,cACAvB;MACA;MACA;MACA;QACAwB;QACAA;QACAA;MACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACAR;QACAC;MACA;IACA;IAEA;IACAQ;MACAT;QACAC;MACA;IACA;IAEA;AACA;AACA;IACAS;MAAA;MACA;MACA;MACAV;QACAW;MACA;MACA;QACA;UACA;QACA;QACA;UAAAX;QAAA;QAAA;MACA;IACA;IAEA;AACA;AACA;IACAY;MACA;MACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;QAEA;UACAC;UACAC;UACAC;QACA;MAOA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MACA;MACA;MACA;QACAlB;QACA;UACA;UACA;QACA;QACA;QACA;UACA;QACA;UACA;QACA;QACA;UACA,kCACA;UACA;QACA;MACA;IACA;IACA;IACAmB;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MACArB;QACAW;MACA;MACAW;QACA;QACA;UAAAtB;QAAA;QAAA;MACA;IACA;IACA;IACAuB;MAAA;MACAvB;QACAW;MACA;MACAW;QACA;UAAAE;UAAAC;QACAC;UACA1C;UACAwC;UACAC;QACA;;QAEA;QACA;QACA;UAAA;QAAA;QACAE;QACA;UAAA3B;QAAA;QAAA;MACA;IACA;IAEA;IACA4B;MACA;QACAH;MACA;QACA;UACAD;UACA;QACA;UACAA;UACA;QACA;UACAA;UACAC;UACA;;QAEA;MAAA;;MAEA;QACAD;QACAC;MACA;IACA;IAEA;AACA;AACA;IACAI;MACA7B;QACAC;MACA;IACA;IAEA;AACA;AACA;IACA6B;MACA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MACA;QAAAnC;MAAA;QACA;UACAI;YACAW;YACAqB;YACAC;UACA;UACA;UAEA;QACA;UACAjC;YACAW;YACAqB;YACAC;UACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MACA;QACA;UACAnC;YACAW;YACAqB;YACAC;UACA;UACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAG;MACApC;QACAC;MACA;IACA;IAEA;AACA;AACA;IACAoC;MACAC;MACA;MACAtC;QACAC,KACA;MACA;IACA;IAEA;AACA;AACA;IACAsC;MACAvC;QACAC,KACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC3mBA;AAAA;AAAA;AAAA;AAA05C,CAAgB,qzCAAG,EAAC,C;;;;;;;;;;;ACA96C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/order/myOrder.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/order/myOrder.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./myOrder.vue?vue&type=template&id=67aadf18&scoped=true&\"\nvar renderjs\nimport script from \"./myOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./myOrder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./myOrder.vue?vue&type=style&index=0&id=67aadf18&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67aadf18\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order/myOrder.vue\"\nexport default component.exports","export * from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./myOrder.vue?vue&type=template&id=67aadf18&scoped=true&\"","var components\ntry {\n  components = {\n    uEmpty: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-empty/u-empty\" */ \"@/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-image/u-image\" */ \"@/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uniLoadMore: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-load-more/uni-load-more\" */ \"@/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uRadioGroup: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-radio-group/u-radio-group\" */ \"@/uview-ui/components/u-radio-group/u-radio-group.vue\"\n      )\n    },\n    uRadio: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-radio/u-radio\" */ \"@/uview-ui/components/u-radio/u-radio.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-button/u-button\" */ \"@/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-toast/u-toast\" */ \"@/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-modal/u-modal\" */ \"@/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.navList, function (tabItem, tabIndex) {\n    var $orig = _vm.__get_orig(tabItem)\n    var g0 = tabItem.loaded === true && tabItem.orderList.length === 0\n    var l0 = _vm.__map(tabItem.orderList, function (order, oderIndex) {\n      var $orig = _vm.__get_orig(order)\n      var f0 = _vm._f(\"orderStatusList\")(order.orderStatus)\n      var g1 = order.orderItems.length\n      var g2 = order.orderItems.length\n      var f1 = g2 <= 1 ? _vm._f(\"unitPrice\")(order.flowPrice) : null\n      var g3 = order.orderItems.length\n      var f2 = _vm._f(\"unitPrice\")(order.flowPrice)\n      var g4 =\n        order.groupAfterSaleStatus &&\n        (order.groupAfterSaleStatus.includes(\"NOT_APPLIED\") ||\n          order.groupAfterSaleStatus.includes(\"PART_AFTER_SALE\"))\n      return {\n        $orig: $orig,\n        f0: f0,\n        g1: g1,\n        g2: g2,\n        f1: f1,\n        g3: g3,\n        f2: f2,\n        g4: g4,\n      }\n    })\n    return {\n      $orig: $orig,\n      g0: g0,\n      l0: l0,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./myOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./myOrder.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"content\">\r\n    <view class=\"navbar\">\r\n      <view\r\n        v-for=\"(item, index) in navList\"\r\n        :key=\"index\"\r\n        class=\"nav-item\"\r\n        :class=\"{ current: tabCurrentIndex === index }\"\r\n        @click=\"tabClick(index)\"\r\n        >{{ item.text }}</view\r\n      >\r\n    </view>\r\n    <swiper\r\n      :current=\"tabCurrentIndex\"\r\n      class=\"swiper-box\"\r\n      duration=\"300\"\r\n      @change=\"changeTab\"\r\n    >\r\n      <swiper-item\r\n        class=\"tab-content\"\r\n        v-for=\"(tabItem, tabIndex) in navList\"\r\n        :key=\"tabIndex\"\r\n      >\r\n        <scroll-view\r\n          class=\"list-scroll-content\"\r\n          scroll-y\r\n          @scrolltolower=\"loadData(tabIndex)\"\r\n        >\r\n          <!-- 空白页 -->\r\n          <u-empty\r\n            text=\"暂无订单\"\r\n            mode=\"list\"\r\n            v-if=\"tabItem.loaded === true && tabItem.orderList.length === 0\"\r\n          ></u-empty>\r\n          <!-- 订单列表 -->\r\n          <view\r\n            class=\"seller-view\"\r\n            :key=\"oderIndex\"\r\n            v-for=\"(order, oderIndex) in tabItem.orderList\"\r\n          >\r\n            <!-- 店铺名称 -->\r\n            <view class=\"seller-info u-flex u-row-between\">\r\n              <view class=\"seller-name wes\" @click=\"navigateToStore(order)\">\r\n                <view class=\"name wes\">{{ order.storeName }}</view>\r\n              </view>\r\n              <view class=\"order-sn\">{{\r\n                order.orderStatus | orderStatusList\r\n              }}</view>\r\n            </view>\r\n            <view>\r\n              <view>\r\n                <view\r\n                  class=\"goods-item-view\"\r\n                  @click=\"navigateToOrderDetail(order.sn)\"\r\n                >\r\n                  <view\r\n                    class=\"goods-img\"\r\n                    v-for=\"(goods, goodsIndex) in order.orderItems\"\r\n                    :key=\"goodsIndex\"\r\n                  >\r\n                    <u-image\r\n                      border-radius=\"6\"\r\n                      width=\"100%\"\r\n                      height=\"100%\"\r\n                      :src=\"goods.image\"\r\n                    ></u-image>\r\n                  </view>\r\n                  <view class=\"goods-info\">\r\n                    <view\r\n                      v-if=\"order.orderItems.length <= 1\"\r\n                      class=\"goods-title u-line-2\"\r\n                      >{{ order.groupName }}</view\r\n                    >\r\n                    <view\r\n                      v-if=\"order.orderItems.length <= 1\"\r\n                      class=\"goods-price\"\r\n                    >\r\n                      ￥{{ order.flowPrice | unitPrice }}\r\n                    </view>\r\n                  </view>\r\n                  <view v-if=\"order.orderItems.length <= 1\" class=\"goods-num\">\r\n                    <view>x{{ order.groupNum }}</view>\r\n                  </view>\r\n                </view>\r\n              </view>\r\n              <view class=\"btn-view u-flex u-row-between\">\r\n                <view class=\"description\">\r\n                  <!-- 等待付款 -->\r\n                  <div v-if=\"order.payStatus === 'PAID'\">已付金额:</div>\r\n                  <div v-else>应付金额:</div>\r\n                  <div class=\"price\">￥{{ order.flowPrice | unitPrice }}</div>\r\n                </view>\r\n                <view class=\"goods-btn flex flex-a-c\">\r\n                  <!-- 全部 -->\r\n                  <view\r\n                    ripple\r\n                    class=\"pay-btn\"\r\n                    shape=\"circle\"\r\n                    size=\"mini\"\r\n                    v-if=\"order.allowOperationVO.pay\"\r\n                    @click=\"waitPay(order)\"\r\n                    >立即付款</view\r\n                  >\r\n                  <!-- 取消订单 -->\r\n                  <view\r\n                    ripple\r\n                    class=\"cancel-btn\"\r\n                    shape=\"circle\"\r\n                    size=\"mini\"\r\n                    v-if=\"order.allowOperationVO.cancel\"\r\n                    @click=\"onCancel(order.sn)\"\r\n                  >\r\n                    取消订单\r\n                  </view>\r\n                  <!-- 等待收货 -->\r\n                  <view\r\n                    ripple\r\n                    shape=\"circle\"\r\n                    class=\"rebuy-btn\"\r\n                    size=\"mini\"\r\n                    v-if=\"order.allowOperationVO.showLogistics\"\r\n                    @click=\"navigateToLogistics(order)\"\r\n                  >\r\n                    查看物流\r\n                  </view>\r\n                  <view\r\n                    ripple\r\n                    shape=\"circle\"\r\n                    class=\"pay-btn\"\r\n                    size=\"mini\"\r\n                    v-if=\"order.allowOperationVO.rog\"\r\n                    @click=\"onRog(order.sn)\"\r\n                  >\r\n                    确认收货\r\n                  </view>\r\n                  <view\r\n                    ripple\r\n                    shape=\"circle\"\r\n                    class=\"cancel-btn\"\r\n                    size=\"mini\"\r\n                    v-if=\"order.groupAfterSaleStatus && ( order.groupAfterSaleStatus.includes('NOT_APPLIED') || order.groupAfterSaleStatus.includes('PART_AFTER_SALE'))\"\r\n                    @click=\"applyService(order)\"\r\n                  >\r\n                    退款/售后\r\n                  </view>\r\n                  <!-- TODO 后续完善 -->\r\n                  <!-- <u-button ripple shape=\"circle\" class=\"rebuy-btn\" size=\"mini\" v-if=\"\r\n                      order.orderStatus === 'CANCELLED' ||\r\n                      order.orderStatus === 'COMPLETE'\r\n                    \" @click=\"reBuy(order)\">\r\n                    再次购买\r\n                  </u-button> -->\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n          <uni-load-more :status=\"tabItem.loadStatus\"></uni-load-more>\r\n        </scroll-view>\r\n      </swiper-item>\r\n    </swiper>\r\n    <u-popup\r\n      class=\"cancel-popup\"\r\n      v-model=\"cancelShow\"\r\n      mode=\"bottom\"\r\n      length=\"60%\"\r\n    >\r\n      <view class=\"header\">取消订单</view>\r\n      <view class=\"body\">\r\n        <view class=\"title\"\r\n          >取消订单后，本单享有的优惠可能会一并取消，是否继续？</view\r\n        >\r\n        <view>\r\n          <u-radio-group v-model=\"reason\">\r\n            <view class=\"value\">\r\n              <view\r\n                class=\"radio-view\"\r\n                :key=\"index\"\r\n                v-for=\"(item, index) in cancelList\"\r\n              >\r\n                <u-radio\r\n                  :active-color=\"lightColor\"\r\n                  label-size=\"25\"\r\n                  shape=\"circle\"\r\n                  :name=\"item.reason\"\r\n                  @change=\"reasonChange\"\r\n                  >{{ item.reason }}</u-radio\r\n                >\r\n              </view>\r\n            </view>\r\n          </u-radio-group>\r\n        </view>\r\n      </view>\r\n      <view class=\"footer\">\r\n        <u-button\r\n          size=\"medium\"\r\n          ripple\r\n          v-if=\"reason\"\r\n          shape=\"circle\"\r\n          @click=\"submitCancel\"\r\n          >提交</u-button\r\n        >\r\n      </view>\r\n    </u-popup>\r\n    <u-toast ref=\"uToast\" />\r\n    <u-modal\r\n      :confirm-color=\"lightColor\"\r\n      v-model=\"rogShow\"\r\n      :show-cancel-button=\"true\"\r\n      :content=\"'是否确认收货?'\"\r\n      @confirm=\"confirmRog\"\r\n    ></u-modal>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport uniLoadMore from \"@/components/uni-load-more/uni-load-more.vue\";\r\nimport { getOrderList, cancelOrder, confirmReceipt } from \"@/api/order.js\";\r\nimport { getClearReason } from \"@/api/after-sale.js\";\r\nimport LiLiWXPay from \"@/js_sdk/lili-pay/wx-pay.js\";\r\nexport default {\r\n  components: {\r\n    uniLoadMore,\r\n  },\r\n  data() {\r\n    return {\r\n      lightColor: this.$lightColor,\r\n      tabCurrentIndex: 0, //导航栏索引\r\n      navList: [\r\n        //导航栏list\r\n        {\r\n          state: 0,\r\n          text: \"全部\",\r\n          loadStatus: \"more\",\r\n          orderList: [],\r\n          pageNumber: 1,\r\n        },\r\n        {\r\n          state: 1,\r\n          text: \"待付款\",\r\n          loadStatus: \"more\",\r\n          orderList: [],\r\n          pageNumber: 1,\r\n        },\r\n        {\r\n          state: 2,\r\n          text: \"待发货\",\r\n          loadStatus: \"more\",\r\n          orderList: [],\r\n          pageNumber: 1,\r\n        },\r\n        {\r\n          state: 3,\r\n          text: \"待收货\",\r\n          loadStatus: \"more\",\r\n          orderList: [],\r\n          pageNumber: 1,\r\n        },\r\n        {\r\n          state: 4,\r\n          text: \"已完成\",\r\n          loadStatus: \"more\",\r\n          orderList: [],\r\n          pageNumber: 1,\r\n        },\r\n        {\r\n          state: 5,\r\n          text: \"已取消\",\r\n          loadStatus: \"more\",\r\n          orderList: [],\r\n          pageNumber: 1,\r\n        },\r\n      ],\r\n      status: \"\", //接收导航栏状态\r\n      params: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        tag: \"ALL\",\r\n      },\r\n      orderStatus: [\r\n        //订单状态\r\n        {\r\n          orderStatus: \"ALL\", //全部\r\n        },\r\n        {\r\n          orderStatus: \"WAIT_PAY\", //代付款\r\n        },\r\n        {\r\n          orderStatus: \"WAIT_SHIP\",\r\n        },\r\n        {\r\n          orderStatus: \"WAIT_ROG\", //待收货\r\n        },\r\n        {\r\n          orderStatus: \"COMPLETE\", //已完成\r\n        },\r\n        {\r\n          orderStatus: \"CANCELLED\", //已取消\r\n        },\r\n        {\r\n          orderStatus: \"STAY_PICKED_UP\", //待自提\r\n        },\r\n      ],\r\n      cancelShow: false, //是否显示取消\r\n      orderSn: \"\", //ordersn\r\n      reason: \"\", //取消原因\r\n      cancelList: \"\", //取消列表\r\n      rogShow: false, //显示是否收货\r\n    };\r\n  },\r\n\r\n  /**\r\n   * 跳转到个人中心\r\n   */\r\n  onBackPress(e) {\r\n    if (e.from == \"backbutton\") {\r\n      uni.switchTab({\r\n        url: \"/pages/tabbar/user/my\",\r\n      });\r\n      return true; //阻止默认返回行为\r\n    }\r\n  },\r\n  onPullDownRefresh() {\r\n    if (this.tabCurrentIndex) {\r\n      this.initData(this.tabCurrentIndex);\r\n    } else {\r\n      this.initData(0);\r\n    }\r\n    // this.loadData(this.status);\r\n  },\r\n  onShow() {\r\n    if(this.$options.filters.tipsToLogin()){\r\n      if (!this.tabCurrentIndex) {\r\n        this.initData(0);\r\n      }\r\n    }\r\n    // this.loadData(this.status);\r\n  },\r\n\r\n  onLoad(options) {\r\n    /**\r\n     * 修复app端点击除全部订单外的按钮进入时不加载数据的问题\r\n     * 替换onLoad下代码即可\r\n     */\r\n    let status = Number(options.status);\r\n    this.status = status;\r\n\t\t\r\n    this.tabCurrentIndex = status;\r\n    // if (status == 0) {\r\n    //   this.loadData(status);\r\n    // }\r\n  },\r\n\r\n  watch: {\r\n    /**监听更改请求数据 */\r\n    tabCurrentIndex(val) {\r\n      this.params.tag = this.orderStatus[val].orderStatus;\r\n      //切换标签页将所有的页数都重置为1\r\n      this.navList.forEach((res) => {\r\n        res.pageNumber = 1;\r\n        res.loadStatus = \"more\";\r\n        res.orderList = [];\r\n      });\r\n      this.loadData(val);\r\n    },\r\n  },\r\n  methods: {\r\n    // 售后\r\n    applyService(order) {\r\n      uni.navigateTo({\r\n        url: `/pages/order/afterSales/afterSales?orderSn=${order.sn}`,\r\n      });\r\n    },\r\n\r\n    // 店铺详情\r\n    navigateToStore(val) {\r\n      uni.navigateTo({\r\n        url: \"/pages/product/shopPage?id=\" + val.storeId,\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 取消订单\r\n     */\r\n    onCancel(sn) {\r\n      this.orderSn = sn;\r\n      this.cancelShow = true;\r\n      uni.showLoading({\r\n        title: \"加载中\",\r\n      });\r\n      getClearReason().then((res) => {\r\n        if (res.data.result.length >= 1) {\r\n          this.cancelList = res.data.result;\r\n        }\r\n         if (this.$store.state.isShowToast){ uni.hideLoading() };\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 初始化数据\r\n     */\r\n    initData(index) {\r\n      this.navList[index].pageNumber = 1;\r\n      this.navList[index].loadStatus = \"more\";\r\n      this.navList[index].orderList = [];\r\n      this.loadData(index);\r\n    },\r\n\r\n    /**\r\n     * 等待支付\r\n     */\r\n    waitPay(val) {\r\n      this.$u.debounce(this.pay(val), 3000);\r\n    },\r\n\r\n    /**\r\n     * 支付\r\n     */\r\n    pay(val) {\r\n      if (val.sn) {\r\n        // #ifdef MP-WEIXIN\r\n        new LiLiWXPay({\r\n          sn: val.sn,\r\n          price: val.flowPrice,\r\n          orderType: \"ORDER\",\r\n        }).pay();\r\n        // #endif\r\n        // #ifndef MP-WEIXIN\r\n        uni.navigateTo({\r\n          url: \"/pages/cart/payment/payOrder?order_sn=\" + val.sn,\r\n        });\r\n        // #endif\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 获取订单列表\r\n     */\r\n    loadData(index) {\r\n      this.params.pageNumber = this.navList[index].pageNumber;\r\n      // this.params.tag = this.orderStatus[index].orderStatus;\r\n      getOrderList(this.params).then((res) => {\r\n        uni.stopPullDownRefresh();\r\n        if (!res.data.success) {\r\n          this.navList[index].loadStatus = \"noMore\";\r\n          return false;\r\n        }\r\n        let orderList = res.data.result.records;\r\n        if (orderList.length == 0) {\r\n          this.navList[index].loadStatus = \"noMore\";\r\n        } else if (orderList.length < 10) {\r\n          this.navList[index].loadStatus = \"noMore\";\r\n        }\r\n        if (orderList.length > 0) {\r\n          this.navList[index].orderList =\r\n            this.navList[index].orderList.concat(orderList);\r\n          this.navList[index].pageNumber += 1;\r\n        }\r\n      });\r\n    },\r\n    //swiper 切换监听\r\n    changeTab(e) {\r\n      this.tabCurrentIndex = e.target.current;\r\n    },\r\n    //顶部tab点击\r\n    tabClick(index) {\r\n      this.tabCurrentIndex = index;\r\n    },\r\n    //删除订单\r\n    deleteOrder(index) {\r\n      uni.showLoading({\r\n        title: \"请稍后\",\r\n      });\r\n      setTimeout(() => {\r\n        this.navList[this.tabCurrentIndex].orderList.splice(index, 1);\r\n         if (this.$store.state.isShowToast){ uni.hideLoading() };\r\n      }, 600);\r\n    },\r\n    //取消订单\r\n    cancelOrder(item) {\r\n      uni.showLoading({\r\n        title: \"请稍后\",\r\n      });\r\n      setTimeout(() => {\r\n        let { stateTip, stateTipColor } = this.orderStateExp(9);\r\n        item = Object.assign(item, {\r\n          state: 9,\r\n          stateTip,\r\n          stateTipColor,\r\n        });\r\n\r\n        //取消订单后删除待付款中该项\r\n        let list = this.navList[1].orderList;\r\n        let index = list.findIndex((val) => val.id === item.id);\r\n        index !== -1 && list.splice(index, 1);\r\n         if (this.$store.state.isShowToast){ uni.hideLoading() };\r\n      }, 600);\r\n    },\r\n\r\n    //订单状态文字和颜色\r\n    orderStateExp(state) {\r\n      let stateTip = \"\",\r\n        stateTipColor = this.$lightColor;\r\n      switch (+state) {\r\n        case 1:\r\n          stateTip = \"待付款\";\r\n          break;\r\n        case 2:\r\n          stateTip = \"待发货\";\r\n          break;\r\n        case 9:\r\n          stateTip = \"订单已关闭\";\r\n          stateTipColor = \"#909399\";\r\n          break;\r\n\r\n        //更多自定义\r\n      }\r\n      return {\r\n        stateTip,\r\n        stateTipColor,\r\n      };\r\n    },\r\n\r\n    /**\r\n     * 跳转到订单详情\r\n     */\r\n    navigateToOrderDetail(sn) {\r\n      uni.navigateTo({\r\n        url: \"./orderDetail?sn=\" + sn,\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 选择取消原因\r\n     */\r\n    reasonChange(reason) {\r\n      this.reason = reason;\r\n    },\r\n\r\n    /**\r\n     * 提交取消订单（未付款）\r\n     */\r\n    submitCancel() {\r\n      cancelOrder(this.orderSn, { reason: this.reason }).then((res) => {\r\n        if (res.data.success) {\r\n          uni.showToast({\r\n            title: \"订单已取消\",\r\n            duration: 2000,\r\n            icon: \"none\",\r\n          });\r\n          this.initData(this.tabCurrentIndex);\r\n\r\n          this.cancelShow = false;\r\n        } else {\r\n          uni.showToast({\r\n            title: res.data.message,\r\n            duration: 2000,\r\n            icon: \"none\",\r\n          });\r\n          this.cancelShow = false;\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 确认收货显示\r\n     */\r\n    onRog(sn) {\r\n      this.orderSn = sn;\r\n      this.rogShow = true;\r\n    },\r\n\r\n    /**\r\n     * 点击确认收货\r\n     */\r\n    confirmRog() {\r\n      confirmReceipt(this.orderSn).then((res) => {\r\n        if (res.data.code == 200) {\r\n          uni.showToast({\r\n            title: \"已确认收货\",\r\n            duration: 2000,\r\n            icon: \"none\",\r\n          });\r\n          this.initData(this.tabCurrentIndex);\r\n          this.rogShow = false;\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 评价商品\r\n     */\r\n    onComment(sn) {\r\n      uni.navigateTo({\r\n        url: \"./evaluate/myEvaluate\",\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 重新购买\r\n     */\r\n    reBuy(order) {\r\n      console.log(order);\r\n      return;\r\n      uni.navigateTo({\r\n        url:\r\n          \"/pages/product/goods?id=\" + order.id + \"&goodsId=\" + order.goodsId,\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 查看物流\r\n     */\r\n    navigateToLogistics(order) {\r\n      uni.navigateTo({\r\n        url:\r\n          \"/pages/mine/msgTips/packageMsg/logisticsDetail?order_sn=\" + order.sn,\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\npage,\r\n.content {\r\n  background: $page-color-base;\r\n  height: 100%;\r\n}\r\n\r\n.swiper-box {\r\n  height: calc(100vh - 40px);\r\n  // #ifdef H5\r\n  height: calc(100vh - 40px - 44px);\r\n  // #endif\r\n}\r\n\r\n.list-scroll-content {\r\n  height: 100%;\r\n}\r\n\r\n.navbar {\r\n  display: flex;\r\n  height: 40px;\r\n  padding: 0 5px;\r\n  background: #fff;\r\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.06);\r\n  position: relative;\r\n  z-index: 10;\r\n\r\n  .nav-item {\r\n    flex: 1;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100%;\r\n    font-size: 26rpx;\r\n    color: $font-color-light;\r\n    position: relative;\r\n\r\n    &.current {\r\n      color: $main-color;\r\n\r\n      &:after {\r\n        content: \"\";\r\n        position: absolute;\r\n        left: 50%;\r\n        bottom: 0;\r\n        transform: translateX(-50%);\r\n        width: 44px;\r\n        height: 0;\r\n        border-bottom: 2px solid $main-color;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.uni-swiper-item {\r\n  height: auto;\r\n}\r\n\r\n.seller-view {\r\n  border-radius: 20rpx;\r\n  background-color: #fff;\r\n  margin: 20rpx 0rpx;\r\n\r\n  .seller-info {\r\n    height: 70rpx;\r\n    padding: 0 20rpx;\r\n\r\n    .seller-name {\r\n      flex:10;\r\n      font-size: 28rpx;\r\n      font-weight: 600;\r\n      display: flex;\r\n      flex-direction: row;\r\n\r\n      .name {\r\n        margin-left: 15rpx;\r\n        margin-top: -2rpx;\r\n      }\r\n    }\r\n\r\n    .order-sn {\r\n      flex:2;\r\n      width:120rpx;\r\n      text-align: center;\r\n      color: $aider-light-color;\r\n      font-size: 26rpx;\r\n    }\r\n  }\r\n\r\n  .goods-item-view {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    flex-direction: row;\r\n    padding: 10rpx 20rpx;\r\n\r\n    .goods-img {\r\n      width: 131rpx;\r\n      height: 131rpx;\r\n      margin-right: 10rpx;\r\n      margin-bottom: 10rpx;\r\n    }\r\n\r\n    .goods-info {\r\n      padding-left: 30rpx;\r\n      flex: 1;\r\n\r\n      .goods-title {\r\n        margin-bottom: 10rpx;\r\n        color: #333333;\r\n      }\r\n\r\n      .goods-specs {\r\n        font-size: 24rpx;\r\n        margin-bottom: 10rpx;\r\n        color: #cccccc;\r\n      }\r\n\r\n      .goods-price {\r\n        font-size: 28rpx;\r\n        margin-bottom: 10rpx;\r\n        color: $aider-light-color;\r\n      }\r\n    }\r\n\r\n    .goods-num {\r\n      width: 60rpx;\r\n      color: $main-color;\r\n    }\r\n  }\r\n\r\n  .btn-view {\r\n    padding: 25rpx 30rpx;\r\n    font-size: 26rpx;\r\n\r\n    .description {\r\n      display: flex;\r\n      color: #909399;\r\n      size: 24rpx;\r\n      flex: 1;\r\n      .price {\r\n        color: $main-color;\r\n        \r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.cancel-popup {\r\n  .header {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    margin: 15rpx 0rpx;\r\n  }\r\n\r\n  .body {\r\n    padding: 30rpx;\r\n\r\n    .title {\r\n      font-weight: 600;\r\n    }\r\n\r\n    .value {\r\n      display: flex;\r\n      flex-direction: column;\r\n      margin: 20rpx 0;\r\n      .radio-view {\r\n        margin: 20rpx 0rpx;\r\n      }\r\n    }\r\n  }\r\n\r\n  .footer {\r\n    text-align: center;\r\n  }\r\n}\r\n.goods-btn{\r\n  display: flex;\r\n}\r\n.cancel-btn,.pay-btn,.rebuy-btn{\r\n  text-align: center;\r\n  margin-left: 15rpx;\r\n  font-size: 24rpx;\r\n  padding: 14rpx 20rpx;\r\n  border-radius: 100px;\r\n\r\n}\r\n.cancel-btn {\r\n  color: #333639 !important;\r\n  background: rgba(46, 51, 56, .05) !important;\r\n}\r\n\r\n.pay-btn {\r\n\r\n  background-color: $light-color !important;\r\n\r\n  color: #ffffff !important;\r\n}\r\n\r\n.rebuy-btn {\r\n  color: $light-color !important;\r\n  border-color: $light-color !important;\r\n  background-color: #ffffff !important;\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./myOrder.vue?vue&type=style&index=0&id=67aadf18&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./myOrder.vue?vue&type=style&index=0&id=67aadf18&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1730077887384\n      var cssReload = require(\"D:/Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}