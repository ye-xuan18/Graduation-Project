{"version":3,"sources":["uni-app:///api/point.js","uni-app:///api/passport.js","uni-app:///api/im.js","uni-app:///utils/socket_service.js","uni-app:///utils/emojis.js"],"names":["sign","http","request","url","method","Method","POST","needToken","signTime","time","GET","login","username","password","captcha","params","md5","uuid","storage","getUuid","validAccount","account","sendFindPasswordSms","header","data","validFindPasswordSms","sms_code","changePassword","PUT","setBiolofy","getTalk","talkId","api","im","getTalkByUser","userId","getTalkList","getTalkMessage","cleanUnreadMessage","jumpObtain","skuId","goodsId","clearmeaager","SocketService","window","WebSocket","console","log","ws","config","baseWsUrl","getAccessToken","onopen","connected","connectRetryCount","onclose","setTimeout","connect","onmessage","msg","registerCallBack","callBack","callBackMapping","sendRetryCount","send","instance","emojis","symbol","emojisKeys","Object","keys","emojiList","regEmoji","map","value","join","replace","textReplaceEmoji","content","RegExp","$0","$1","emojistwo"],"mappings":"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AAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,KAAK,EAAE,gFAAgF;EACvF,KAAK,EAAE,gFAAgF;EACvF,MAAM,EAAE,gFAAgF;EACxF,KAAK,EAAE,gFAAgF;EACvF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,OAAO,EAAE,gFAAgF;EACzF,MAAM,EAAE,gFAAgF;EACxF,OAAO,EAAE,gFAAgF;EACzF,OAAO,EAAE,gFAAgF;EACzF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,OAAO,EAAE,gFAAgF;EACzF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,KAAK,EAAE,gFAAgF;EACvF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,KAAK,EAAE,gFAAgF;EACvF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,KAAK,EAAE,gFAAgF;EACvF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,KAAK,EAAE,gFAAgF;EACvF,KAAK,EAAE,gFAAgF;EACvF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,gFAAgF;EACxF,MAAM,EAAE,iFAAiF;EACzF,MAAM,EAAE,iFAAiF;EACzF,MAAM,EAAE,iFAAiF;EACzF,OAAO,EAAE,iFAAiF;EAC1F,OAAO,EAAE;AACX,CAAC;;AAED;AACA;AACA;AACA,IAAMC,MAAM,GAAG,CACb,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EACxF,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EACzD,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAClF,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EACtD,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CACvB;AAED,IAAMC,UAAU,GAAGC,MAAM,CAACC,IAAI,CAACJ,MAAM,CAAC;AAE/B,IAAMK,SAAS,GAAG;EACvBJ,MAAM,EAANA,MAAM;EACND,MAAM,EAANA;AACF,CAAC;AAAA;AAED,IAAMM,QAAQ,GAAGJ,UAAU,CAACK,GAAG,CAAC,UAACC,KAAK;EAAA,OAAK,KAAK,GAAGA,KAAK;AAAA,EAAC,CAACC,IAAI,CAAC,EAAE,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;;AAEnF;AACA;AACA;AACA;AACA;AACO,SAASC,gBAAgB,CAAEC,OAAO,EAAE;EACzC,IAAI,CAACA,OAAO,EAAE;IACZ,OAAO,EAAE;EACX;EACA,OAAOA,OAAO,CAACF,OAAO,CAAC,IAAIG,MAAM,YAAKP,QAAQ,QAAK,IAAI,CAAC,EAAE,UAACQ,EAAE,EAAEC,EAAE,EAAK;IACpE,OAAOf,MAAM,CAACe,EAAE,CAAC;EACnB,CAAC,CAAC;AACJ;AACO,IAAMC,SAAS,GAAGb,MAAM,CAACC,IAAI,CAACJ,MAAM,CAAC;AAAA,8B","file":"pages/mine/common/vendor.js","sourcesContent":["\nimport {http, Method} from '@/utils/request.js';\n\n/**\n * 签到\n * @param params\n */\nexport function sign() {\n  return http.request({\n    url: '/members/sign',\n    method: Method.POST,\n    needToken: true,\n  });\n}\n\n\n\n/**\n * 签到时间获取\n * @param params\n */\nexport function signTime(time) {\n  return http.request({\n    url: '/members/sign?time='+time,\n    method: Method.GET,\n    needToken: true,\n  });\n}\n","/**\n * Created by Andste on 2018/5/2.\n * 用户认证相关API\n */\nimport storage from '@/utils/storage.js';\nimport {http, Method} from '@/utils/request.js';\nimport { md5 } from '@/utils/md5.js';\n\n/**\n * 普通登录\n * @param username\n * @param password\n * @param captcha\n */\nexport function login(username, password, captcha) {\n  return http.request({\n    url: 'passport/login',\n    method: Method.POST,\n    params: {\n      username,\n      password: md5(password),\n      captcha,\n      uuid: storage.getUuid(),\n    },\n  });\n}\n\n\n\n\n\n/**\n * 验证账户信息\n * @param captcha\n * @param account\n */\nexport function validAccount(captcha, account) {\n  return http.request({\n    url: 'passport/find-pwd',\n    method: Method.GET,\n    params: {\n      uuid: storage.getUuid(),\n      captcha,\n      account,\n    },\n  });\n}\n\n/**\n * 发送找回密码短信\n * @param uuid\n * @param captcha\n */\nexport function sendFindPasswordSms(uuid,captcha) {\n  return http.request({\n    url: 'passport/find-pwd/send',\n    method: Method.POST,\n\theader:{'content-type':\"application/x-www-form-urlencoded\"},\n    data: {\n      uuid:uuid,\n      captcha,\n    },\n  });\n}\n\n/**\n * 校验找回密码验证码\n * @param uuid\n * @param sms_code\n */\nexport function validFindPasswordSms(uuid, sms_code) {\n  return http.request({\n    url: 'passport/find-pwd/valid',\n    method: Method.GET,\n    params: {\n      uuid,\n      sms_code,\n    },\n  });\n}\n\n/**\n * 修改密码【找回密码用】\n * @param password\n * @param uuid\n */\nexport function changePassword(password, uuid) {\n  if (!uuid) {\n    uuid = storage.getUuid();\n  }\n  return http.request({\n    url: 'passport/find-pwd/update-password',\n    method: Method.PUT,\n\theader:{'content-type':\"application/x-www-form-urlencoded\"},\n    data: {\n      uuid,\n      password: md5(password),\n    },\n  });\n}\n\n\n\n// 保存生物认证登录\nexport function setBiolofy(params) {\n\treturn http.request({\n\t\turl: `passport/login/save/biology`,\n\t\tmethod: 'POST',\n\t\tparams\n\t})\n}\n","import { http,Method } from \"@/utils/request.js\";\n\nimport api from \"@/config/api.js\";\n\n/**\n * 获取聊天详情接口\n * @param {*} talkId \n * @returns \n */\nexport function getTalk(talkId) {\n    return http.request({\n      url: `${api.im}/talk/${talkId}`,\n      method: Method.GET,\n    });\n}\n\n/**\n * 获取与用户的聊天详情\n * @param {*} talkId \n * @returns \n */\n export function getTalkByUser(userId) {\n  return http.request({\n    url: `${api.im}/talk/by/user/${userId}`,\n    method: Method.GET,\n  });\n}\n\n/**\n * 获取聊天列表\n * @param {*} talkId \n * @returns \n */\n export function getTalkList(params) {\n    return http.request({\n      url: `${api.im}/talk/list`,\n      method: Method.GET,\n      params\n    });\n}\n\n/**\n * 获取聊天信息接口\n * @param {*} params \n * @returns \n */\n export function getTalkMessage(params) {\n    return http.request({\n      url: `${api.im}/message`,\n      method: Method.GET,\n      params\n    });\n}\n\n/**\n * 获取聊天信息接口\n * @param {*} params \n * @returns \n */\n export function cleanUnreadMessage(params) {\n  return http.request({\n    url: `${api.im}/message/clean/unred`,\n    method: Method.PUT,\n    params\n  });\n}\n// 从商品页点击 客服 跳转 获取商品详情\nexport function jumpObtain(skuId, goodsId) {\n  return http.request({\n    url: `/goods/goods/sku/${goodsId}/${skuId}`,\n    method: Method.GET,\n  });\n}\n// 清除未读\n// /im/message/clean/unred\nexport function clearmeaager() {\n  return http.request({\n    url: `${api.im}/message/clean/unred`,\n    method: Method.PUT,\n  });\n}\n\n","import store from '@/store/index'\nimport config from '@/config/config.js'\nimport storage from './storage';\nexport default class SocketService {\n  /**\n   * 单例\n   */\n  static instance = null;\n  static get Instance () {\n    if (!this.instance) {\n      this.instance = new SocketService();\n    }\n    return this.instance;\n  }\n\n  // 和服务端连接的socket对象\n  ws = null;\n\n  // 存储回调函数\n  callBackMapping = {};\n\n  // 标识是否连接成功\n  connected = false;\n\n  // 记录重试的次数\n  sendRetryCount = 0;\n\n  // 重新连接尝试的次数\n  connectRetryCount = 0;\n\n  //  定义连接服务器的方法\n  connect () {\n    // 连接服务器\n    if (!window.WebSocket) {\n      return console.log(\"您的浏览器不支持WebSocket\");\n    }\n    this.ws = new WebSocket(config.baseWsUrl + '/' + storage.getAccessToken());\n    // 连接成功的事件\n    this.ws.onopen = () => {\n      console.log(\"连接服务端成功\");\n      this.connected = true;\n      // 重置重新连接的次数\n      this.connectRetryCount = 0;\n    };\n    //  1.连接服务端失败\n    //   2.当连接成功之后, 服务器关闭的情况(连接失败重连)\n    this.ws.onclose = () => {\n      console.log(\"连接服务端失败\");\n      this.connected = false;\n      this.connectRetryCount++;\n      setTimeout(() => {\n        this.connect();\n      }, 500 * this.connectRetryCount);\n    };\n    // 得到服务端发送过来的数据\n    this.ws.onmessage = (msg) => {\n      // console.log(msg.data)\n      this.registerCallBack(msg.data);\n    };\n  }\n  // 回调函数的注册\n  registerCallBack (callBack) {\n    // console.log(\"回调函数的注册\", callBack);\n    this.callBackMapping = callBack;\n  }\n\n  // 取消某一个回调函数\n  unRegisterCallBack (callBack) {\n    console.log(\"取消某一个回调函数\", callBack);\n    this.callBackMapping = null;\n  }\n\n  // 发送数据的方法\n  send (data) {\n    // 判断此时此刻有没有连接成功\n    if (this.connected) {\n      this.sendRetryCount = 0;\n      this.ws.send(data);\n    } else {\n      this.sendRetryCount++;\n      setTimeout(() => {\n        this.send(data);\n      }, this.sendRetryCount * 500);\n    }\n  }\n}\n","/**\n * 动态表情\n */\nconst emojis = {\n  \"[微笑]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/0.gif'>\",\n  \"[撇嘴]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/1.gif'>\",\n  \"[色]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/2.gif'>\",\n  \"[发呆]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/3.gif'>\",\n  \"[得意]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/4.gif'>\",\n  \"[流泪]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/5.gif'>\",\n  \"[害羞]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/6.gif'>\",\n  \"[闭嘴]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/7.gif'>\",\n  \"[睡]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/8.gif'>\",\n  \"[大哭]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/9.gif'>\",\n  \"[尴尬]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/10.gif'>\",\n  \"[发怒]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/11.gif'>\",\n  \"[调皮]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/12.gif'>\",\n  \"[呲牙]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/13.gif'>\",\n  \"[惊讶]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/14.gif'>\",\n  \"[难过]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/15.gif'>\",\n  \"[酷]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/16.gif'>\",\n  \"[冷汗]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/17.gif'>\",\n  \"[抓狂]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/18.gif'>\",\n  \"[吐]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/19.gif'>\",\n  \"[偷笑]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/20.gif'>\",\n  \"[可爱]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/21.gif'>\",\n  \"[白眼]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/22.gif'>\",\n  \"[傲慢]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/23.gif'>\",\n  \"[饥饿]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/24.gif'>\",\n  \"[困]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/25.gif'>\",\n  \"[惊恐]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/26.gif'>\",\n  \"[流汗]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/27.gif'>\",\n  \"[憨笑]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/28.gif'>\",\n  \"[大兵]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/29.gif'>\",\n  \"[奋斗]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/30.gif'>\",\n  \"[咒骂]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/31.gif'>\",\n  \"[疑问]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/32.gif'>\",\n  \"[嘘]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/33.gif'>\",\n  \"[晕]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/34.gif'>\",\n  \"[折磨]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/35.gif'>\",\n  \"[衰]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/36.gif'>\",\n  \"[骷髅]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/37.gif'>\",\n  \"[敲打]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/38.gif'>\",\n  \"[再见]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/39.gif'>\",\n  \"[擦汗]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/40.gif'>\",\n  \"[抠鼻]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/41.gif'>\",\n  \"[鼓掌]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/42.gif'>\",\n  \"[糗大了]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/43.gif'>\",\n  \"[坏笑]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/44.gif'>\",\n  \"[左哼哼]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/45.gif'>\",\n  \"[右哼哼]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/46.gif'>\",\n  \"[哈欠]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/47.gif'>\",\n  \"[鄙视]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/48.gif'>\",\n  \"[委屈]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/49.gif'>\",\n  \"[快哭了]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/50.gif'>\",\n  \"[阴险]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/51.gif'>\",\n  \"[亲亲]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/52.gif'>\",\n  \"[吓]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/53.gif'>\",\n  \"[可怜]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/54.gif'>\",\n  \"[菜刀]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/55.gif'>\",\n  \"[西瓜]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/56.gif'>\",\n  \"[啤酒]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/57.gif'>\",\n  \"[篮球]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/58.gif'>\",\n  \"[乒乓]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/59.gif'>\",\n  \"[咖啡]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/60.gif'>\",\n  \"[饭]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/61.gif'>\",\n  \"[猪头]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/62.gif'>\",\n  \"[玫瑰]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/63.gif'>\",\n  \"[凋谢]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/64.gif'>\",\n  \"[示爱]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/65.gif'>\",\n  \"[爱心]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/66.gif'>\",\n  \"[心碎]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/67.gif'>\",\n  \"[蛋糕]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/68.gif'>\",\n  \"[闪电]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/69.gif'>\",\n  \"[炸弹]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/70.gif'>\",\n  \"[刀]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/71.gif'>\",\n  \"[足球]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/72.gif'>\",\n  \"[瓢虫]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/73.gif'>\",\n  \"[便便]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/74.gif'>\",\n  \"[月亮]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/75.gif'>\",\n  \"[太阳]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/76.gif'>\",\n  \"[礼物]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/77.gif'>\",\n  \"[拥抱]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/78.gif'>\",\n  \"[强]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/79.gif'>\",\n  \"[弱]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/80.gif'>\",\n  \"[握手]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/81.gif'>\",\n  \"[胜利]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/82.gif'>\",\n  \"[抱拳]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/83.gif'>\",\n  \"[勾引]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/84.gif'>\",\n  \"[拳头]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/85.gif'>\",\n  \"[差劲]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/86.gif'>\",\n  \"[爱你]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/87.gif'>\",\n  \"[NO]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/88.gif'>\",\n  \"[OK]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/89.gif'>\",\n  \"[爱情]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/90.gif'>\",\n  \"[飞吻]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/91.gif'>\",\n  \"[跳跳]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/92.gif'>\",\n  \"[发抖]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/93.gif'>\",\n  \"[怄火]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/94.gif'>\",\n  \"[转圈]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/95.gif'>\",\n  \"[磕头]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/96.gif'>\",\n  \"[回头]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/97.gif'>\",\n  \"[跳绳]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/98.gif'>\",\n  \"[挥手]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/99.gif'>\",\n  \"[激动]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/100.gif'>\",\n  \"[街舞]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/101.gif'>\",\n  \"[献吻]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/102.gif'>\",\n  \"[左太极]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/103.gif'>\",\n  \"[右太极]\": \"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/104.gif'>\",\n};\n\n/**\n* 符号表情\n*/\nconst symbol = [\n  \"😠\", \"😩\", \"😲\", \"😞\", \"😵\", \"😰\", \"😒\", \"😍\", \"😤\", \"😜\", \"😝\", \"😋\", \"😘\", \"😚\", \"😷\",\n  \"😳\", \"😃\", \"😅\", \"😆\", \"😁\", \"😂\", \"😊\", \"☺\", \"😄\", \"😢\",\n  \"😭\", \"😨\", \"😣\", \"😡\", \"😌\", \"😖\", \"😔\", \"😱\", \"😪\", \"😏\", \"😓\", \"😥\", \"😫\", \"😉\",\n  \"✊\", \"✋\", \"✌\", \"👊\", \"👍\", \"☝\", \"👆\", \"👇\", \"👈\", \"👉\",\n  \"👋\", \"👏\", \"👌\", \"👎\"\n];\n\nconst emojisKeys = Object.keys(emojis);\n\nexport const emojiList = {\n  symbol,\n  emojis\n}\n\nconst regEmoji = emojisKeys.map((value) => '|\\\\' + value).join('').replace('|', '')\n\n/**\n* 替换表情文字\n* \n* @param {String} content 需要替换的字符串\n*/\nexport function textReplaceEmoji (content) {\n  if (!content) {\n    return \"\"\n  }\n  return content.replace(new RegExp(`(${regEmoji})`, 'gi'), ($0, $1) => {\n    return emojis[$1];\n  });\n}\nexport const emojistwo = Object.keys(emojis)"],"sourceRoot":""}