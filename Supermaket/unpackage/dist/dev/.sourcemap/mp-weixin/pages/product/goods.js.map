{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Desktop/code/ending/shop/pages/product/goods.vue?7cda","webpack:///D:/Desktop/code/ending/shop/pages/product/goods.vue?d38e","webpack:///D:/Desktop/code/ending/shop/pages/product/goods.vue?5cc7","webpack:///D:/Desktop/code/ending/shop/pages/product/goods.vue?4d96","uni-app:///pages/product/goods.vue","webpack:///D:/Desktop/code/ending/shop/pages/product/goods.vue?2968","webpack:///D:/Desktop/code/ending/shop/pages/product/goods.vue?6761"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","popups","shares","PromotionLayout","PromotionDetailsLayout","PromotionAssembleLayout","PromotionAssembleListLayout","PromotionCoupon","GoodsIntro","GoodsRecommend","storeLayout","Evaluation","GoodsSwiper","popupGoods","popupAddress","takeDownFormSaleGoods","data","setup","promotionShow","navbarListX","navbarListY","navbarListData","title","icon","___type","popupsSwitch","enableShare","selectedGoods","isGroup","isSeckill","pointDetail","assemble","navbarOnlyBack","background","navbar","productRefHeight","header","top","height","goodsParams","headerFlag","headerList","text","id","tabScrollTop","scrollArr","scrollId","scrollFlag","current","goodsDetail","goodsSpec","imgList","favorite","recommendList","goodsInfo","addressFlag","buyMask","num","skuId","storeDetail","storeParams","pageNumber","pageSize","likeGoodsList","PromotionList","specList","selectedSpec","nums","delivery","exchange","productId","startTimer","routerVal","IMLink","wholesaleList","takeDownFromSale","computed","IM","watch","clearInterval","mounted","windowHeight","uni","success","bottom","boundingClientRect","bottomHeight","exec","topHeight","onLoad","withShareTicket","menus","onShow","methods","reStartTakeDownSale","share","handleNavbarList","url","emptyPromotion","selectSku","init","distributionId","response","disResult","Object","getIMDetailMethods","res","linkMsgDetail","changedGoods","deliveryFun","closePopupAddress","closePopupBuy","toAssembleBuyNow","reluchToCart","from","storage","cartCount","API_trade","back","getStoreBaseInfoFun","API_store","deleteGoodsCollectionFun","API_Members","getGoodsCollectionFun","getStoreRecommend","storeId","recommend","getOtherLikeGoods","category","keyword","receiveCouponsFun","navigateToStore","getCoupon","shutMask","clickFavorite","pageScroll","calcSize","arr","view","fields","size","item","that","h","headerTab","shareChange"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AAC8L;AAC9L,gBAAgB,kMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6KAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,8MAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7HA;AAAA;AAAA;AAAA;AAAyuB,CAAgB,wtBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACsR7vB;AACA;AACA;AACA;AACA;AACA;AAEA;AAkBA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA1BA;AAOA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAqBA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MAAA;;MAMAC;MAAA;MACAC;MAAA;;MAMAC;MACA;MACA;QACAC;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,EACA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;QACAC;MACA;MACAC;QACAD;MACA;MAEAE;MACAC;QACAC;QACAC;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MACA;MACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACA;MACAC;QACAC;QACAC;MACA;MAEAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MAEAC;MAAA;;MAEAC;MACAC;MAAA;MACAC;MACAC;IACA;EACA;;EAEAC;IACA;IACAC;MACA;IACA;EACA;EAEAC;IACAlD;MAAA;MACA;QACA;UACA;UACAmD;QACA;MACA;QACA;MACA;IACA;EACA;EACAC;IACA;MAAAC;IACA;IACA;IACAC;MACAC;QACA;QACA;QACAC,OACAC;UACA;YACA;YACAC;UACA;QACA,GACAC;QACA;QACAlD,IACAgD;UACA;YACA;YACAG;UACA;QACA,GACAD;MACA;IACA;IAEA;EACA;EACAE;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;cACA;;cAEA;cACAP;gBACAQ;gBACAC;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA;EACAC;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;cACA;cACA;cACA;gBACA;kBACA;oBACA;oBACA;kBACA;gBACA;cACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EAEAC;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;QAAAC;MAAA;IACA;IAEA;AACA;AACA;IACAC;MACA,IACA,4BACA,8BACA,0BACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACA;AACA;AACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBACA;gBACA;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBAEA;gBACA;kBACA;kBACA;oBACA;kBACA;kBACA;kBACA;kBACA;gBACA;gBACA;gBAAA,MACAD;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAE;gBACA;kBACA;gBACA;cAAA;gBAEA;gBACA;gBACA;gBACA;gBACA;gBACA;;gBAEA;gBACA,wBACAC;kBACA;kBACA;oBACA;kBACA;;kBAEA;kBACA;oBACA;kBACA;gBACA;gBACA;gBACA;kBAAA;gBAAA;;gBAEA;gBACA;;gBAEA;gBACA;;gBAEA;gBACA;;gBAEA;gBACA;gBACA;;gBAEA;kBACA;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;;MAGA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IASA;IACA,UACAC;MACA;IACA;IAEA,iBACAC;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA;IACA;IAEA,iBACAC;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;QACAC;QACAvE;MACA;MACAwE;MACAjC;QACAe;MACA;IACA;IAEA;AACA;AACA;IACAmB;MAAA;MACA;QACAC;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;QACApC;UACAe;QACA;MACA;QACAf;MACA;IACA;IAEA;AACA;AACA;IACAqC;MAAA;MACAC;QACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MACAC;QACA;UACAxC;YACA5D;YACAC;UACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAoG;MAAA;MACA;QACAD;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAE;MAAA;MACA;QACA/D;QACAC;QACA+D;QACAC;MACA;QACA;MACA;IACA;IAEA;AACA;AACA;AACA;IACAC;MAAA;MACA;QACAlE;QACAC;QACAkE;QACAC;MACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACAR;QACAxC;UACA5D;UACAC;QACA;MACA;IACA;IAEA;AACA;AACA;IACA4G;MACAjD;QACAe;MACA;IACA;IAEA;AACA;AACA;IACAmC;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;QACA;UACA;YAAA;YACA;YAEA;UACA;YACA;YACA;UACA;YAAA;YACA;;YAEA;YACA;cACA;gBACA;cACA;cACA;YACA;YACA;cACA;YACA;YAEA;QAAA;MAEA;IACA;IAEA;AACA;AACA;IACAC;MACA;QACA;QACA;QACA;MACA;MACAZ;QACA;UACAxC;YACA5D;YACAC;UACA;QACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAgH;MACA;QACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA;MACA,WACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,UACA,SACA;MACAC;QACA;QACAC,KACAC,OACA;UACAC;QACA,GACA;UACA,IACAC,oBACAA,oBACAA,oBACAA,mBACA;YACAC;UACA;UACA;YACAC;UACA;QACA,EACA,CACAxD;MACA;MACA;IACA;IAEA;AACA;AACA;IACAyD;MAAA;MACA;QACA;MACA;MACA;MAEA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACn9BA;AAAA;AAAA;AAAA;AAAw5C,CAAgB,mzCAAG,EAAC,C;;;;;;;;;;;ACA56C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/product/goods.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/product/goods.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods.vue?vue&type=template&id=768e0b8d&scoped=true&\"\nvar renderjs\nimport script from \"./goods.vue?vue&type=script&lang=js&\"\nexport * from \"./goods.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods.vue?vue&type=style&index=0&id=768e0b8d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"768e0b8d\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/product/goods.vue\"\nexport default component.exports","export * from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=template&id=768e0b8d&scoped=true&\"","var components\ntry {\n  components = {\n    popups: function () {\n      return import(\n        /* webpackChunkName: \"components/popups/popups\" */ \"@/components/popups/popups.vue\"\n      )\n    },\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    !(_vm.isSeckill || _vm.isGroup) && _vm.goodsDetail.price != undefined\n      ? _vm.wholesaleList.length\n      : null\n  var g1 =\n    !(_vm.isSeckill || _vm.isGroup) && _vm.goodsDetail.price != undefined && g0\n      ? _vm.$options.filters.goodsFormatPrice(\n          _vm.wholesaleList[_vm.wholesaleList.length - 1].price\n        )\n      : null\n  var g2 =\n    !(_vm.isSeckill || _vm.isGroup) && _vm.goodsDetail.price != undefined && g0\n      ? _vm.$options.filters.goodsFormatPrice(\n          _vm.wholesaleList[_vm.wholesaleList.length - 1].price\n        )\n      : null\n  var g3 =\n    !(_vm.isSeckill || _vm.isGroup) && _vm.goodsDetail.price != undefined && g0\n      ? _vm.$options.filters.goodsFormatPrice(_vm.wholesaleList[0].price)\n      : null\n  var g4 =\n    !(_vm.isSeckill || _vm.isGroup) && _vm.goodsDetail.price != undefined && g0\n      ? _vm.$options.filters.goodsFormatPrice(_vm.wholesaleList[0].price)\n      : null\n  var g5 =\n    !(_vm.isSeckill || _vm.isGroup) && _vm.goodsDetail.price != undefined && !g0\n      ? _vm.$options.filters.goodsFormatPrice(_vm.goodsDetail.price)\n      : null\n  var g6 =\n    !(_vm.isSeckill || _vm.isGroup) && _vm.goodsDetail.price != undefined && !g0\n      ? _vm.$options.filters.goodsFormatPrice(_vm.goodsDetail.price)\n      : null\n  var m0 = _vm.PromotionList && _vm.emptyPromotion()\n  var f0 =\n    _vm.goodsDetail.goodsType != \"VIRTUAL_GOODS\" && _vm.delivery\n      ? _vm._f(\"clearStrComma\")(_vm.delivery.consigneeAddressPath)\n      : null\n  var f1 =\n    !(!_vm.isGroup && !_vm.takeDownFromSale) && _vm.isGroup\n      ? _vm._f(\"unitPrice\")(_vm.goodsDetail.price)\n      : null\n  var f2 =\n    !(!_vm.isGroup && !_vm.takeDownFromSale) && _vm.isGroup\n      ? _vm._f(\"unitPrice\")(_vm.goodsDetail.promotionPrice)\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.enableShare = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.popupsSwitch = !_vm.popupsSwitch\n    }\n    _vm.e2 = function ($event) {\n      _vm.popupsSwitch = !_vm.popupsSwitch\n    }\n    _vm.e3 = function ($event) {\n      _vm.promotionShow = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        m0: m0,\n        f0: f0,\n        f1: f1,\n        f2: f2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=script&lang=js&\"","<template>\r\n  <div class=\"main-page\">\r\n    <!-- #ifdef APP-PLUS -->\r\n    <view class=\"status_bar\"></view>\r\n    <!-- #endif -->\r\n    <!-- 仅h5有效 打开App -->\r\n\r\n    <!-- 分享 -->\r\n    <shares v-if=\"enableShare && goodsDetail.id\" :skuId=\"this.routerVal.id\" :goodsId=\"this.routerVal.goodsId\" :link=\"\r\n      '/pages/product/goods?id=' +\r\n      this.routerVal.id +\r\n      '&goodsId=' +\r\n      this.routerVal.goodsId\r\n    \" :thumbnail=\"goodsDetail.thumbnail\" :goodsName=\"goodsDetail.goodsName\" type=\"goods\"\r\n      @close=\"enableShare = false\" />\r\n    <popups v-model=\"popupsSwitch\" @tapPopup=\"handleNavbarList\" :popData=\"navbarListData\" :x=\"navbarListX\"\r\n      :y=\"navbarListY\" placement=\"top-start\" />\r\n    <view class=\"index\">\r\n      <!-- topBar -->\r\n      <u-navbar :background=\"navbar\" :is-back=\"false\" :class=\"headerFlag ? 'header' : 'header bg-none scroll-hide'\">\r\n        <div class=\"headerRow\">\r\n          <div class=\"backs\">\r\n            <u-icon @click=\"back()\" name=\"arrow-left\" class=\"icon-back\"></u-icon>\r\n\r\n            <u-icon name=\"list\" @click=\"popupsSwitch = !popupsSwitch\" class=\"icon-list\"></u-icon>\r\n          </div>\r\n          <div class=\"headerList\" :class=\"headerFlag ? 'tab-bar' : 'tab-bar scroll-hide'\">\r\n            <div class=\"headerRow\">\r\n              <div class=\"nav-item\" v-for=\"header in headerList\" :key=\"header.id\"\r\n                :class=\"{ cur: scrollId === header.id }\" @click=\"headerTab(header.id)\">\r\n                {{ header.text }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </u-navbar>\r\n\r\n      <u-navbar :border-bottom=\"false\" v-show=\"!headerFlag\" class=\"header-only-back\" :background=\"navbarOnlyBack\"\r\n        :is-back=\"false\">\r\n        <div>\r\n          <div class=\"bg-back\">\r\n            <u-icon size=\"40\" @click=\"back()\" name=\"arrow-left\" class=\"icon-back\"></u-icon>\r\n            <u-icon size=\"40\" @click=\"popupsSwitch = !popupsSwitch\" name=\"list\" class=\"icon-list\"></u-icon>\r\n          </div>\r\n        </div>\r\n      </u-navbar>\r\n    </view>\r\n\r\n    <view class=\"product-container\" :style=\"{ height: productRefHeight }\" ref=\"productRef\" id=\"productRef\">\r\n      <scroll-view scroll-anchoring enableBackToTop=\"true\" scroll-with-animation scroll-y class=\"scroll-page\"\r\n        :scroll-top=\"tabScrollTop\" @scroll=\"pageScroll\">\r\n        <view>\r\n          <!-- 轮播图 -->\r\n         \r\n          <GoodsSwiper id=\"main1\" :res=\"imgList\" :video=\"goodsDetail.goodsVideo\" />\r\n\r\n          <!-- 促销活动条 -->\r\n          <PromotionAssembleLayout v-if=\"PromotionList\" :detail=\"goodsDetail\" :res=\"PromotionList\" />\r\n\r\n          <view class=\"card-box top-radius-0\" id=\"main2\">\r\n            <!-- 活动不显示价钱 -->\r\n            <view v-if=\"isSeckill || isGroup\" class=\"desc-bold -goods-msg\">\r\n              <view class=\"-goods-flex\">\r\n                <view class=\"desc-bold\">\r\n                  {{ goodsDetail.goodsName || \"\" }}\r\n                </view>\r\n                <view class=\"favorite\" @click=\"clickFavorite(goodsDetail.id)\">\r\n                  <u-icon size=\"30\" :color=\"favorite ? '#f2270c' : '#262626'\" :name=\"favorite ? 'heart-fill' : 'heart'\">\r\n                  </u-icon>\r\n                  <view :style=\"{ color: favorite ? '#f2270c' : '#262626' }\">{{\r\n                    favorite? \"已收藏\": \"收藏\"\r\n                  }}</view>\r\n                </view>\r\n              </view>\r\n              <!-- 商品描述 -->\r\n              <view class=\"-goods-desc\">\r\n                {{ goodsDetail.sellingPoint || \"\" }}\r\n              </view>\r\n            </view>\r\n            <view v-else class=\"-goods-msg\">\r\n              <!-- 没有拼团，秒杀等活动的情况下 -->\r\n              <view>\r\n                <view class=\"-goods-flex\">\r\n                  <!-- 如果有积分显示积分 -->\r\n                  <view class=\"-goods-price\" v-if=\"goodsDetail.price != undefined\">\r\n\r\n                    <span>\r\n                      <span v-if=\"wholesaleList.length\">\r\n                        <span>¥</span><span class=\"price\">{{\r\n                          $options.filters.goodsFormatPrice(wholesaleList[wholesaleList.length - 1].price)[0]\r\n                        }}</span>.{{\r\n                          $options.filters.goodsFormatPrice(wholesaleList[wholesaleList.length - 1].price)[1]\r\n                        }}\r\n                        ~\r\n                        <span>¥</span><span class=\"price\">{{\r\n                          $options.filters.goodsFormatPrice(wholesaleList[0].price)[0]\r\n                        }}</span>.{{\r\n                          $options.filters.goodsFormatPrice(wholesaleList[0].price)[1]\r\n                        }}\r\n                      </span>\r\n                      <span v-else>\r\n                        <span>¥</span><span class=\"price\">{{\r\n                          $options.filters.goodsFormatPrice(goodsDetail.price)[0]\r\n                        }}</span>.{{ $options.filters.goodsFormatPrice(goodsDetail.price)[1] }}\r\n                      </span>\r\n                    </span>\r\n                  </view>\r\n                  <view class=\"-goods-price\" v-else>\r\n                    <div v-if=\"takeDownFromSale\" class=\"price down-goods\">\r\n                      暂无报价\r\n                    </div>\r\n                    <span v-else>\r\n                    ¥<span class=\"price\">0 </span>.00\r\n                    </span>\r\n                  </view>\r\n\r\n                  <view class=\"icons share\" @click=\"shareChange()\">\r\n                    <u-icon size=\"30\" name=\"share-fill\"></u-icon>\r\n                    <view>分享</view>\r\n                  </view>\r\n                  <view class=\"icons\" @click=\"clickFavorite(goodsDetail.id)\">\r\n                    <u-icon size=\"30\" :color=\"favorite ? '#f2270c' : '#262626'\"\r\n                      :name=\"favorite ? 'heart-fill' : 'heart'\"></u-icon>\r\n                    <view :style=\"{ color: favorite ? '#f2270c' : '#262626' }\">{{\r\n                      favorite? \"已收藏\": \"收藏\"\r\n                    }}</view>\r\n                  </view>\r\n                </view>\r\n                <view class=\"-goods-name desc-bold\">\r\n                  {{ goodsDetail.goodsName || \"\" }}\r\n                </view>\r\n                <view class=\"-goods-desc\">\r\n                  {{ goodsDetail.sellingPoint || \"\" }}\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n\r\n          <view class=\"card-box\">\r\n            <view class=\"card-flex\" @click=\"shutMask(1)\">\r\n              <view class=\"card-title\"> 促销 </view>\r\n              <view class=\"card-content\">\r\n                <span v-if=\"PromotionList && emptyPromotion()\">暂无促销信息</span>\r\n                <PromotionLayout v-else @shutMasks=\"shutMask\" :res=\"PromotionList\" />\r\n              </view>\r\n              <view class=\"card-bottom\">\r\n                <u-icon name=\"more-dot-fill\"></u-icon>\r\n              </view>\r\n            </view>\r\n          </view>\r\n\r\n          <!-- 拼团用户列表 -->\r\n          <PromotionAssembleListLayout v-if=\"isGroup\" @to-assemble-buy-now=\"toAssembleBuyNow\" :res=\"PromotionList\" />\r\n\r\n          <!-- 配置地址 如果是虚拟产品的时候不展示 -->\r\n          <view class=\"card-box\" v-if=\"goodsDetail.goodsType != 'VIRTUAL_GOODS'\">\r\n            <view class=\"card-flex\" @click=\"shutMask(4)\">\r\n              <view class=\"card-title\"> 已选 </view>\r\n              <view class=\"card-content\">\r\n                <span v-if=\"selectedGoods.spec\">{{ selectedGoods.spec.specName }}-{{\r\n                  selectedGoods.spec.specValue\r\n                }}</span>\r\n                <span v-else>默认</span>\r\n              </view>\r\n              <view class=\"card-bottom\">\r\n                <u-icon name=\"more-dot-fill\"></u-icon>\r\n              </view>\r\n            </view>\r\n            <view class=\"card-flex\" @click=\"shutMask(3)\">\r\n              <view class=\"card-title\"> 送至</view>\r\n              <view class=\"card-content\">\r\n                <span v-if=\"delivery\">{{\r\n                  delivery.consigneeAddressPath | clearStrComma\r\n                }}</span>\r\n                <span v-else>暂无地址信息</span>\r\n              </view>\r\n              <view class=\"card-bottom\">\r\n                <u-icon name=\"more-dot-fill\"></u-icon>\r\n              </view>\r\n            </view>\r\n          </view>\r\n\r\n          <!-- 评价 -->\r\n          <Evaluation id=\"main5\" :goodsDetail=\"goodsDetail\" />\r\n\r\n          <!-- 店铺推荐 -->\r\n          <storeLayout id=\"main7\" :storeDetail=\"storeDetail\" :goodsDetail=\"goodsDetail\" :res=\"recommendList\" />\r\n\r\n          <!-- 宝贝详情 -->\r\n          <GoodsIntro id=\"main9\" :res=\"goodsDetail\" :goodsParams=\"goodsParams\" :goodsId=\"goodsDetail.goodsId\"\r\n            v-if=\"goodsDetail.id\" />\r\n\r\n          <!-- 宝贝推荐 -->\r\n          <GoodsRecommend id=\"main11\" :res=\"likeGoodsList\" />\r\n        </view>\r\n      </scroll-view>\r\n\r\n\r\n      <view class=\"page-bottom mp-iphonex-bottom\" id=\"pageBottom\">\r\n        <view class=\"icon-btn\">\r\n          <view class=\"icon-btn-item\" @click=\"navigateToStore(goodsDetail.storeId)\">\r\n            <u-icon size=\"34\" class=\"red\" name=\"home-fill\"></u-icon>\r\n            <view class=\"red icon-btn-name\">店铺</view>\r\n          </view>\r\n          <view class=\"icon-btn-item\" @click=\"linkMsgDetail()\">\r\n            <u-icon size=\"34\" name=\"kefu-ermai\"></u-icon>\r\n            <view class=\"icon-btn-name\">客服</view>\r\n          </view>\r\n          <view class=\"icon-btn-item\" @click=\"reluchToCart()\">\r\n            <u-icon size=\"34\" name=\"storeping-cart\"></u-icon>\r\n            <view class=\"icon-btn-name\">购物车</view>\r\n            <view v-if=\"nums && nums > 0\" class=\"num-icon\">{{ nums }}</view>\r\n          </view>\r\n        </view>\r\n        <!-- 下架展示 -->\r\n        <div class=\"detail-btn\" v-if=\"takeDownFromSale\">\r\n          <view class=\"to-store-car to-store-btn\"  @click=\"reStartTakeDownSale\">\r\n            查看类似商品</view>\r\n        </div>\r\n        <!-- 正常结算页面 -->\r\n        <view class=\"detail-btn\" v-if=\"!isGroup && !takeDownFromSale\">\r\n          <view class=\"to-store-car to-store-btn\" v-if=\"goodsDetail.goodsType != 'VIRTUAL_GOODS'\" @click=\"shutMask(4)\">\r\n            加入购物车</view>\r\n          <view class=\"to-buy to-store-btn\" @click=\"shutMask(4, 'buy')\">立即购买</view>\r\n          <view class=\"to-store-car to-store-btn\" v-if=\"startTimer\">暂未开始</view>\r\n        </view>\r\n        <!-- 拼团结算 -->\r\n        <view class=\"detail-btn\" v-else-if=\"isGroup\">\r\n          <view class=\"to-store-car pt-buy to-store-btn\" @click=\"shutMask(4, 'buy')\">\r\n            <view>￥{{ goodsDetail.price | unitPrice }}</view>\r\n            <view>单独购买</view>\r\n          </view>\r\n          <view class=\"to-buy pt-buy to-store-btn\" @click=\"toAssembleBuyNow\">\r\n            <view>￥{{ goodsDetail.promotionPrice | unitPrice }}</view>\r\n            <view>拼团价格</view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <!-- 规格-模态层弹窗 -->\r\n      <view class=\"spec\">\r\n        <!-- 促销弹窗 -->\r\n        <u-popup v-model=\"promotionShow\" :height=\"setup.height\" :mode=\"setup.mode\" :border-radius=\"setup.radius\"\r\n          @close=\"promotionShow = false\" :mask-close-able=\"setup.close\" closeable>\r\n          <view class=\"header-title\">优惠</view>\r\n          <view class=\"cuxiao\">\r\n            <scroll-view class=\"scroll_mask\" :scroll-y=\"true\">\r\n              <view class=\"con-cuxiao\">\r\n                <view class=\"cuxiao-title\">促销活动</view>\r\n                <PromotionDetailsLayout :res=\"PromotionList\" />\r\n              </view>\r\n              <view class=\"con-cuxiao coupons\">\r\n                <view class=\"cuxiao-title\">可领优惠券</view>\r\n                <PromotionCoupon @getCoupon=\"getCoupon\" :res=\"PromotionList\" />\r\n              </view>\r\n            </scroll-view>\r\n          </view>\r\n        </u-popup>\r\n\r\n        <!-- 配送地址弹窗 -->\r\n        <popupAddress @closeAddress=\"closePopupAddress\" @deliveryData=\"deliveryFun\" v-if=\"goodsDetail.id\"\r\n          :goodsId=\"goodsDetail.id\" :addressFlag=\"addressFlag\" />\r\n\r\n        <!-- 商品规格  商品详情，以及默认参与活动的id-->\r\n        <popupGoods :addr=\"delivery\" ref=\"popupGoods\" @changed=\"changedGoods\" @closeBuy=\"closePopupBuy\"\r\n          @queryCart=\"cartCount()\" :goodsDetail=\"goodsDetail\" :goodsSpec=\"goodsSpec\" :isGroup=\"isGroup\" :id=\"productId\"\r\n          v-if=\"goodsDetail.id\" :pointDetail=\"pointDetail\" :wholesaleList=\"wholesaleList\" @handleClickSku=\"selectSku\"\r\n          :buyMask=\"buyMask\" />\r\n\r\n\r\n        <!-- 下架框 -->\r\n        <takeDownFormSaleGoods ref=\"takeDownSale\" v-if=\"takeDownFromSale\" />\r\n      </view>\r\n    </view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/************接口API***************/\r\nimport { getGoods, getGoodsList, getMpScene, getGoodsDistribution } from \"@/api/goods.js\";\r\nimport * as API_trade from \"@/api/trade.js\";\r\nimport * as API_Members from \"@/api/members.js\";\r\nimport * as API_store from \"@/api/store.js\";\r\nimport { getIMDetail } from \"@/api/common\";\r\nimport { modelNavigateTo } from \"@/pages/tabbar/home/template/tpl.js\";\r\n/************请求存储***************/\r\nimport storage from \"@/utils/storage.js\";\r\n\r\n/************组件***************/\r\nimport PromotionLayout from \"./product/promotion/-promotion\"; //促销组件\r\nimport PromotionDetailsLayout from \"./product/promotion/-promotion-details\"; //促销活动详情\r\nimport PromotionAssembleLayout from \"./product/promotion/-promotion-assemble-promotions\"; //促销活动条\r\nimport PromotionAssembleListLayout from \"./product/promotion/-promotion-assemble-list\"; //拼团用户列表\r\nimport PromotionCoupon from \"./product/promotion/-promotion-coupon\"; //优惠券组件\r\nimport GoodsIntro from \"./product/goods/-goods-intro\"; //商品介绍组件\r\nimport GoodsRecommend from \"./product/goods/-goods-recommend\"; //宝贝推荐\r\nimport storeLayout from \"./product/shop/-shop\"; //店铺组件\r\nimport Evaluation from \"./product/evaluation/-evaluation\"; //评价组件\r\nimport GoodsSwiper from \"./product/goods/-goods-swiper\"; //轮播图组件\r\nimport popupGoods from \"@/components/m-buy/goods\"; //购物车商品的模块\r\nimport popupAddress from \"./product/popup/address\"; //地址选择模块\r\nimport shares from \"@/components/m-share/index\"; //分享\r\nimport popups from \"@/components/popups/popups\"; //气泡框\r\nimport takeDownFormSaleGoods from \"@/components/m-take-down-sale-goods/index\"; //下架框\r\nimport setup from \"./product/popup/popup\";\r\n\r\nexport default {\r\n  components: {\r\n    popups,\r\n    shares,\r\n    PromotionLayout,\r\n    PromotionDetailsLayout,\r\n    PromotionAssembleLayout,\r\n    PromotionAssembleListLayout,\r\n    PromotionCoupon,\r\n    GoodsIntro,\r\n    GoodsRecommend,\r\n    storeLayout,\r\n    Evaluation,\r\n    GoodsSwiper,\r\n    popupGoods,\r\n    popupAddress,\r\n    takeDownFormSaleGoods\r\n  },\r\n  data () {\r\n    return {\r\n      setup,\r\n      promotionShow: false, //弹窗开关\r\n      // #ifdef H5\r\n      navbarListX: 110, //导航栏列表栏x轴\r\n      navbarListY: 80, //导航栏列表栏y轴\r\n      // #endif\r\n      // #ifdef MP-WEIXIN\r\n      navbarListX: 100, //导航栏列表栏x轴\r\n      navbarListY: 140, //导航栏列表栏y轴\r\n      // #endif\r\n      // #ifdef APP-PLUS\r\n      navbarListX: 120, //导航栏列表栏x轴\r\n      navbarListY: 170, //导航栏列表栏y轴\r\n      // #endif\r\n      navbarListData: [\r\n        //导航栏列表栏数据\r\n        {\r\n          title: \"首页\",\r\n          icon: \"home-fill\",\r\n          ___type: \"other\",\r\n        },\r\n        {\r\n          title: \"购物车\",\r\n          icon: \"bag-fill\",\r\n          ___type: \"other\",\r\n        },\r\n        {\r\n          title: \"搜索\",\r\n          icon: \"search\",\r\n          ___type: \"category\",\r\n        },\r\n        {\r\n          title: \"个人中心\",\r\n          icon: \"account-fill\",\r\n          ___type: \"other\",\r\n        },\r\n      ],\r\n      popupsSwitch: false, //导航栏列表栏开关\r\n      enableShare: false,\r\n      selectedGoods: \"\", //选择的商品规格昵称\r\n      isGroup: false, // 是否是拼团活动\r\n      isSeckill: false, // 是否秒杀活动\r\n      pointDetail: \"\", // 是否是积分商品\r\n      assemble: \"\", //拼团的sku\r\n      navbarOnlyBack: {\r\n        background: \"transparent\",\r\n      },\r\n      navbar: {\r\n        background: \"#fff\",\r\n      },\r\n\r\n      productRefHeight: \"\",\r\n      header: {\r\n        top: 0,\r\n        height: 50,\r\n      },\r\n      goodsParams: [], // 商品参数\r\n      headerFlag: false, //顶部导航显示与否\r\n      headerList: [\r\n        //顶部导航文字按照规则来 详情全局搜索\r\n        {\r\n          text: \"商品\",\r\n          id: \"1\",\r\n        },\r\n        {\r\n          text: \"评价\",\r\n          id: \"2\",\r\n        },\r\n        {\r\n          text: \"详情\",\r\n          id: \"3\",\r\n        },\r\n        {\r\n          text: \"推荐\",\r\n          id: \"4\",\r\n        },\r\n      ],\r\n      tabScrollTop: null,\r\n      scrollArr: [],\r\n      scrollId: \"1\",\r\n      scrollFlag: true,\r\n      current: \"1\", //当前显示的轮播图页\r\n      goodsDetail: {}, //商品数据\r\n      goodsSpec: \"\", //规格数据\r\n      imgList: [], //轮播图数据\r\n      favorite: false, //收藏与否flag\r\n      recommendList: [], //推荐列表\r\n      // maskFlag: false, //模态显示与否\r\n      goodsInfo: false, //商品介绍弹窗\r\n      addressFlag: false, //配送地址弹窗\r\n      buyMask: false, //添加购物车直接购买，查看已选 弹窗\r\n      num: 1, //添加到购物车的数量\r\n      skuId: \"\", //\r\n      storeDetail: \"\", //店铺基本信息,\r\n      // 店铺信息\r\n      storeParams: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n      },\r\n\r\n      likeGoodsList: \"\", //相似商品列表\r\n      PromotionList: \"\", //活动,促销，列表\r\n      specList: [],\r\n      selectedSpec: [],\r\n      nums: 0,\r\n      delivery: \"\",\r\n\r\n      exchange: {},\r\n      productId: 0,\r\n\r\n      startTimer: false, //未开启 是false\r\n\r\n      routerVal: \"\",\r\n      IMLink: \"\", // IM地址\r\n      wholesaleList: [],\r\n      takeDownFromSale: false, // 下架销售状态\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    // udesk IM \r\n    IM () {\r\n      return this.IMLink + this.storeDetail.merchantEuid;\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    isGroup (val) {\r\n      if (val) {\r\n        let timer = setInterval(() => {\r\n          this.$refs.popupGoods.buyType = \"PINTUAN\";\r\n          clearInterval(timer);\r\n        }, 100);\r\n      } else {\r\n        this.$refs.popupGoods.buyType = \"\";\r\n      }\r\n    },\r\n  },\r\n  mounted () {\r\n    const { windowHeight } = uni.getSystemInfoSync();\r\n    let bottomHeight = 0;\r\n    let topHeight = 0;\r\n    uni.getSystemInfo({\r\n      success: function (res) {\r\n        // res - 各种参数\r\n        let bottom = uni.createSelectorQuery().select(\".page-bottom\");\r\n        bottom\r\n          .boundingClientRect(function (data) {\r\n            if (data && data.height) {\r\n              //data - 各种参数\r\n              bottomHeight = data.height; // 获取元素宽度\r\n            }\r\n          })\r\n          .exec();\r\n        let top = uni.createSelectorQuery().select(\".header\");\r\n        top\r\n          .boundingClientRect(function (data) {\r\n            if (data && data.height) {\r\n              //data - 各种参数\r\n              topHeight = data.height; // 获取元素宽度\r\n            }\r\n          })\r\n          .exec();\r\n      },\r\n    });\r\n\r\n    this.productRefHeight = windowHeight - bottomHeight + \"px\";\r\n  },\r\n  async onLoad (options) {\r\n    this.routerVal = options;\r\n    // #ifdef MP-WEIXIN\r\n    // 小程序默认分享\r\n    uni.showShareMenu({\r\n      withShareTicket: true,\r\n      menus: [\"shareAppMessage\", \"shareTimeline\"],\r\n    });\r\n    // #endif\r\n  },\r\n  async onShow () {\r\n    this.goodsDetail = {};\r\n    //如果有参数ids说明事分销短连接，需要获取参数\r\n    if (this.routerVal.scene) {\r\n      getMpScene(this.routerVal.scene).then((res) => {\r\n        if (res.data.success) {\r\n          let data = res.data.result.split(\",\"); // skuId,goodsId,distributionId\r\n          this.init(data[0], data[1], data[2]);\r\n        }\r\n      });\r\n    } else {\r\n      this.init(this.routerVal.id, this.routerVal.goodsId, this.routerVal.distributionId);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // 重新打开下架\r\n    reStartTakeDownSale(){\r\n      this.$refs.takeDownSale.show = true\r\n    },\r\n    share () {\r\n      return `/pages/product/goods?id=${this.routerVal.id}&goodsId=${this.routerVal.goodsId}`;\r\n    },\r\n    /**\r\n     * 导航栏列表栏\r\n     */\r\n    handleNavbarList (val) {\r\n      modelNavigateTo({ url: val });\r\n    },\r\n\r\n    /**\r\n     * 循环出当前促销是否为空\r\n     */\r\n    emptyPromotion () {\r\n      if (\r\n        this.PromotionList == \"\" ||\r\n        this.PromotionList == null ||\r\n        this.PromotionList == []\r\n      ) {\r\n        return true;\r\n      }\r\n    },\r\n    selectSku (idObj) {\r\n      this.init(idObj.skuId, idObj.goodsId);\r\n    },\r\n    /**\r\n     * 初始化信息\r\n     */\r\n    async init (id, goodsId, distributionId = \"\") {\r\n      this.isGroup = false; //初始化拼团\r\n      this.productId = id; // skuId\r\n      // 这里请求获取到页面数据  解析数据\r\n\r\n      let response = await getGoods(id || 'undefined', goodsId);\r\n      \r\n      // 判断当前接口返回内容 \r\n      if (!response.data.success) {\r\n        // 商品已下架\r\n        if(response.data.code == 11001){\r\n          this.takeDownFromSale = true\r\n        }\r\n        // setTimeout(() => {\r\n        //   uni.navigateBack();\r\n        // }, 500);\r\n      }\r\n      // 这里是绑定分销员\r\n      if (distributionId || this.$store.state.distributionId) {\r\n        let disResult = await getGoodsDistribution(distributionId);\r\n        if (!disResult.data.success || disResult.statusCode == 403) {\r\n          this.$store.state.distributionId = distributionId;\r\n        }\r\n      }\r\n      /**商品信息以及规格信息存储 */\r\n      this.goodsDetail = response.data.result.data;\r\n      this.wholesaleList = response.data.result.wholesaleList;\r\n      this.goodsSpec = response.data.result.specs;\r\n      this.PromotionList = response.data.result.promotionMap;\r\n      this.goodsParams = response.data.result.goodsParamsDTOList || [];\r\n\r\n      // 判断是否拼团活动或者积分商品 如果有则显示拼团活动信息\r\n      this.PromotionList &&\r\n        Object.keys(this.PromotionList).forEach((item) => {\r\n          // 拼团商品\r\n          if (item.indexOf(\"PINTUAN\") == 0) {\r\n            this.isGroup = true;\r\n          }\r\n\r\n          // 秒杀\r\n          if (item.indexOf(\"SECKILL\") == 0) {\r\n            this.isSeckill = true\r\n          }\r\n        });\r\n      // 轮播图\r\n      this.imgList = this.goodsDetail.goodsGalleryList.filter(i => i.indexOf(\"\\\"url\\\":\") === -1 && i.indexOf(\"\\\"status\\\":\") === -1);\r\n\r\n      // 获取店铺基本信息\r\n      this.getStoreBaseInfoFun(this.goodsDetail.storeId);\r\n\r\n      // 获取购物车\r\n      this.cartCount();\r\n\r\n      // 获取店铺推荐商品\r\n      this.getStoreRecommend();\r\n\r\n      // 获取商品列表\r\n      this.getOtherLikeGoods();\r\n      // 获取商品是否已被收藏 如果未登录不获取\r\n\r\n      if (this.$options.filters.isLogin(\"auth\")) {\r\n        this.getGoodsCollectionFun(this.goodsDetail.id);\r\n      }\r\n      // 获取IM 需要的话使用\r\n      // this.getIMDetailMethods();\r\n    },\r\n\r\n    async getIMDetailMethods () {\r\n      let res = await getIMDetail();\r\n      if (res.data.success) {\r\n        this.IMLink = res.data.result;\r\n      }\r\n    },\r\n\r\n    linkMsgDetail () {\r\n      // lili 基础客服\r\n      this.$options.filters.talkIm(this.goodsDetail.storeId, this.routerVal.goodsId, this.routerVal.id)\r\n      // uni.navigateTo({\r\n      //   url: `/pages/mine/im/index?userId=${this.goodsDetail.storeId}&goodsid=${this.routerVal.goodsId}&skuid=${this.routerVal.id}`\r\n      // });\r\n\r\n      // udesk 代码  \r\n      // if (this.storeDetail.merchantEuid) {\r\n      //   uni.navigateTo({\r\n      //     url: `/pages/tabbar/home/web-view?src=${this.IM}`,\r\n      //   });\r\n      // }\r\n\r\n\r\n      // 客服 云智服代码 \r\n      // // #ifdef MP-WEIXIN\r\n      // const params = {\r\n      //   storeName: this.storeDetail.storeName,\r\n      //   goodsName: this.goodsDetail.goodsName,\r\n      //   goodsId: this.goodsDetail.goodsId,\r\n      //   goodsImg: this.goodsDetail.thumbnail,\r\n      //   price: this.goodsDetail.promotionPrice || this.goodsDetail.price,\r\n      //   // originalPrice: this.goodsDetail.original || this.goodsDetail.price,\r\n      //   uuid: storage.getUuid(),\r\n      //   token: storage.getAccessToken(),\r\n      //   sign: this.storeDetail.yzfSign,\r\n      //   mpSign: this.storeDetail.yzfMpSign,\r\n      // };\r\n      // uni.navigateTo({\r\n      //   url:\r\n      //     \"/pages/product/customerservice/index?params=\" +\r\n      //     encodeURIComponent(JSON.stringify(params)),\r\n      // });\r\n      // // #endif\r\n      // // #ifndef MP-WEIXIN\r\n      // const sign = this.storeDetail.yzfSign;\r\n      // uni.navigateTo({\r\n      //   url:\r\n      //     \"/pages/tabbar/home/web-view?src=https://yzf.qq.com/xv/web/static/chat/index.html?sign=\" +\r\n      //     sign,\r\n      // });\r\n      // // #endif\r\n\r\n    },\r\n    /**选择商品 */\r\n    changedGoods (val) {\r\n      this.selectedGoods = val;\r\n    },\r\n\r\n    /**  点击子级地址回调参数*/\r\n    deliveryFun (val) {\r\n      this.delivery = val;\r\n    },\r\n    /**\r\n     * 地址子级关闭回调\r\n     */\r\n    closePopupAddress (val) {\r\n      this.addressFlag = val;\r\n      // this.maskFlag = false;\r\n    },\r\n    /**\r\n     * 商品规格子级关闭回调\r\n     */\r\n    closePopupBuy (val) {\r\n      this.buyMask = val;\r\n      // this.maskFlag = false;\r\n    },\r\n\r\n    /** 参与拼团  创建拼团 */\r\n    toAssembleBuyNow (order) {\r\n      this.shutMask(4, \"PINTUAN\", order);\r\n    },\r\n    /**\r\n     * 查看购物车\r\n     */\r\n    reluchToCart () {\r\n      let obj = {\r\n        from: \"product\",\r\n        id: this.productId,\r\n      };\r\n      storage.setCartBackbtn(obj);\r\n      uni.switchTab({\r\n        url: \"/pages/tabbar/cart/cartList\",\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 查询购物车总数量\r\n     */\r\n    cartCount () {\r\n      if (storage.getHasLogin()) {\r\n        API_trade.getCartNum().then((res) => {\r\n          this.nums = res.data.result;\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 返回\r\n     */\r\n    back () {\r\n      if (getCurrentPages().length == 1) {\r\n        uni.switchTab({\r\n          url: \"/pages/tabbar/home/index\",\r\n        });\r\n      } else {\r\n        uni.navigateBack();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 获取店铺信息\r\n     */\r\n    getStoreBaseInfoFun (id) {\r\n      API_store.getStoreBaseInfo(id).then((res) => {\r\n        if (res.data.success) {\r\n          this.storeDetail = res.data.result;\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 删除收藏店铺\r\n     */\r\n    deleteGoodsCollectionFun (id) {\r\n      API_Members.deleteGoodsCollection(id).then((res) => {\r\n        if (res.statusCode == 200) {\r\n          uni.showToast({\r\n            title: \"商品已取消收藏!\",\r\n            icon: \"none\",\r\n          });\r\n          this.favorite = !this.favorite;\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 获取商品是否已被收藏\r\n     */\r\n    getGoodsCollectionFun (goodsId) {\r\n      if (storage.getHasLogin()) {\r\n        API_Members.getGoodsIsCollect(\"GOODS\", goodsId).then((res) => {\r\n          this.favorite = res.data.result;\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 获取店铺推荐商品列表\r\n     */\r\n    getStoreRecommend () {\r\n      getGoodsList({\r\n        pageNumber: 1,\r\n        pageSize: 6,\r\n        storeId: this.goodsDetail.storeId,\r\n        recommend: true,\r\n      }).then((res) => {\r\n        this.recommendList = res.data.result.records;\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 获取相似商品列表\r\n     *\r\n     */\r\n    getOtherLikeGoods () {\r\n      getGoodsList({\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        category: this.goodsDetail.categoryId,\r\n        keyword: this.goodsDetail.name,\r\n      }).then((res) => {\r\n        this.likeGoodsList = res.data.result.records;\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 领取优惠券\r\n     */\r\n    receiveCouponsFun (id) {\r\n      API_Members.receiveCoupons(id).then((res) => {\r\n        uni.showToast({\r\n          title: res.data.message,\r\n          icon: \"none\",\r\n        });\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 跳转到店铺页面\r\n     */\r\n    navigateToStore (store_id) {\r\n      uni.navigateTo({\r\n        url: `/pages/product/shopPage?id=` + store_id,\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 获取优惠券按钮\r\n     */\r\n    getCoupon (item) {\r\n      this.receiveCouponsFun(item.id);\r\n    },\r\n\r\n    /**\r\n     * 规格弹窗开关\r\n     */\r\n    shutMask (flag, buyFlag, type) {\r\n      this.promotionShow = false;\r\n      this.buyMask = false;\r\n      this.addressFlag = false;\r\n      if (flag) {\r\n        switch (flag) {\r\n          case 1: //优惠券弹窗\r\n            this.promotionShow = true;\r\n\r\n            break;\r\n          case 3:\r\n            this.addressFlag = true;\r\n            break;\r\n          case 4: //添加购物车直接购买，查看已选 弹窗\r\n            // 判断是否是一个规格\r\n\r\n            this.buyMask = true;\r\n            if (buyFlag == \"PINTUAN\") {\r\n              if (type.orderSn) {\r\n                this.$refs.popupGoods.parentOrder = type;\r\n              }\r\n              this.$refs.popupGoods.buyType = \"PINTUAN\";\r\n            }\r\n            if (buyFlag == \"buy\") {\r\n              this.$refs.popupGoods.buyType = \"\";\r\n            }\r\n\r\n            break;\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 收藏\r\n     */\r\n    clickFavorite (id) {\r\n      if (this.favorite) {\r\n        // 取消收藏\r\n        this.deleteGoodsCollectionFun(id);\r\n        return false;\r\n      }\r\n      API_Members.collectionGoods(\"GOODS\", id).then((res) => {\r\n        if (res.data.success) {\r\n          uni.showToast({\r\n            title: \"收藏成功!\",\r\n            icon: \"none\",\r\n          });\r\n        }\r\n      });\r\n      this.favorite = !this.favorite;\r\n    },\r\n\r\n    /**\r\n     * 顶部header显示或隐藏\r\n     */\r\n    pageScroll (e) {\r\n      if (this.scrollFlag) {\r\n        this.calcSize();\r\n      }\r\n      if (e.detail.scrollTop > 200) {\r\n        //当距离大于200时显示回到顶部按钮\r\n        this.headerFlag = true;\r\n      } else {\r\n        //当距离小于200时隐藏回到顶部按钮\r\n        this.headerFlag = false;\r\n      }\r\n      if (e.detail.scrollTop < this.scrollArr[0] - 10) {\r\n        this.scrollId = \"1\";\r\n      }\r\n      if (e.detail.scrollTop > this.scrollArr[1] - 10) {\r\n        this.scrollId = \"2\";\r\n      }\r\n      if (e.detail.scrollTop > this.scrollArr[2] - 10) {\r\n        this.scrollId = \"3\";\r\n      }\r\n      if (e.detail.scrollTop > this.scrollArr[3] - 10) {\r\n        this.scrollId = \"4\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 计算每个要跳转到的模块高度信息\r\n     */\r\n    calcSize () {\r\n      let h = 0;\r\n      let that = this;\r\n      let arr = [\r\n        \"main1\",\r\n        \"main2\",\r\n        \"main3\",\r\n        \"main4\",\r\n        \"main5\",\r\n        \"main6\",\r\n        \"main7\",\r\n        \"main8\",\r\n        \"main9\",\r\n        \"main10\",\r\n        \"main11\",\r\n      ];\r\n      arr.forEach((item) => {\r\n        let view = uni.createSelectorQuery().select(\"#\" + item);\r\n        view\r\n          .fields(\r\n            {\r\n              size: true,\r\n            },\r\n            (data) => {\r\n              if (\r\n                item === \"main1\" ||\r\n                item === \"main5\" ||\r\n                item === \"main9\" ||\r\n                item === \"main11\"\r\n              ) {\r\n                that.scrollArr.push(h);\r\n              }\r\n              if (data && data.height) {\r\n                h += data.height;\r\n              }\r\n            }\r\n          )\r\n          .exec();\r\n      });\r\n      this.scrollFlag = false;\r\n    },\r\n\r\n    /**\r\n     * 点击顶部跳转到对应位置\r\n     */\r\n    headerTab (id) {\r\n      if (this.scrollFlag) {\r\n        this.calcSize();\r\n      }\r\n      this.scrollId = id;\r\n\r\n      this.$nextTick(() => {\r\n        this.tabScrollTop = this.scrollArr[id - 1];\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 点击分享\r\n     */\r\n    async shareChange () {\r\n      this.enableShare = true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// #ifdef MP-WEIXIN\r\n@import \"./product/mp-goods.scss\";\r\n// #endif\r\n\r\n@import \"./product/style.scss\";\r\n@import \"./product/product.scss\";\r\n</style>\r\n","import mod from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=style&index=0&id=768e0b8d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=style&index=0&id=768e0b8d&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1730077891028\n      var cssReload = require(\"D:/Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}