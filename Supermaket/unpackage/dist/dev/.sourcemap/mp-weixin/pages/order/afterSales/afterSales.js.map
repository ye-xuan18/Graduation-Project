{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Desktop/code/ending/shop/pages/order/afterSales/afterSales.vue?bafd","webpack:///D:/Desktop/code/ending/shop/pages/order/afterSales/afterSales.vue?9ab2","webpack:///D:/Desktop/code/ending/shop/pages/order/afterSales/afterSales.vue?e960","webpack:///D:/Desktop/code/ending/shop/pages/order/afterSales/afterSales.vue?25a3","uni-app:///pages/order/afterSales/afterSales.vue","webpack:///D:/Desktop/code/ending/shop/pages/order/afterSales/afterSales.vue?ebab","webpack:///D:/Desktop/code/ending/shop/pages/order/afterSales/afterSales.vue?2def"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","uniLoadMore","data","list","name","current","tipsShow","cancelShow","selectedOrder","orderList","params","pageNumber","pageSize","sort","flowPrice","order","logParams","status","keywords","onLoad","onPullDownRefresh","methods","submitSearchOrderList","clear","change","uni","searchOrderList","getOrderList","title","mask","close","console","closeService","res","duration","icon","afterDetails","url","getAfterSaleLogList","afterSaleLogList","item","image","skuId","num","price","applyService","sku","storage","onExpress","onDetail","goods","renderDate"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACc;;;AAGvE;AACiM;AACjM,gBAAgB,kMAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6PAEN;AACP,KAAK;AACL;AACA,aAAa,oNAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,gOAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9IA;AAAA;AAAA;AAAA;AAA6vB,CAAgB,6tBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACyMjxB;AACA;AACA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACA;MACA;QACAC;MACA,GACA;QACAA;MACA,GACA;QACAA;MACA,EACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEAC;QACAL;QACAC;MACA;MACAK;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA;QACAb;QACAC;MACA;MACA;MACA;MACA;MACAa;IACA;IAEA;AACA;AACA;AACA;IACAC;MACA;QACA;QACA;MACA;QACA;UACAf;UACAC;UACAC;UACAE;QACA;QACA;UACA;QACA;QACA;QACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAY;MAAA;MACAF;QACAG;QACAC;MACA;MACA;QACA;UAAAJ;QAAA;QAAA;QACA;QACA;UACA;UACA;QACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IAEAK;MACAC;MACA;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAP;kBACAG;gBACA;gBACAG;gBAAA;gBAAA,OACA;cAAA;gBAAAE;gBACA;kBACAR;oBACAG;oBACAM;oBACAC;kBACA;gBACA;gBACA;gBACA;gBAEA;kBAAAV;gBAAA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;AACA;AACA;IACAW;MACAX;QACAY;MACA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MACA;QACA;QAEAC;UACAC,mBACA;YACAC;YACAC;YACAtC;YACAuC;YACAC;UACA,EACA;QACA;QAEA;QAEA;UACA;QACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA,2CACA9B,QACA+B,IACA;MACAC;MACAtB;QACAY;MACA;IACA;IAEA;AACA;AACA;IACAW;MACAF;MACA,2CACA/B,QACA+B,IACA;MAEAC;MACAtB;QACAY;MACA;IACA;IAEA;AACA;AACA;IACAY;MACA;MACA;QACAxB;UACAY,sEACAS;QAEA;MACA;QACArB;UACAY,wEACAa;QAEA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC3cA;AAAA;AAAA;AAAA;AAAg6C,CAAgB,gyCAAG,EAAC,C;;;;;;;;;;;ACAp7C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/order/afterSales/afterSales.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/order/afterSales/afterSales.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./afterSales.vue?vue&type=template&id=c6ab62f6&\"\nvar renderjs\nimport script from \"./afterSales.vue?vue&type=script&lang=js&\"\nexport * from \"./afterSales.vue?vue&type=script&lang=js&\"\nimport style0 from \"./afterSales.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order/afterSales/afterSales.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./afterSales.vue?vue&type=template&id=c6ab62f6&\"","var components\ntry {\n  components = {\n    uTabs: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-tabs/u-tabs\" */ \"@/uview-ui/components/u-tabs/u-tabs.vue\"\n      )\n    },\n    uSearch: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-search/u-search\" */ \"@/uview-ui/components/u-search/u-search.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-image/u-image\" */ \"@/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uLoadmore: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-loadmore/u-loadmore\" */ \"@/uview-ui/components/u-loadmore/u-loadmore.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-modal/u-modal\" */ \"@/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.orderList, function (order, orderIndex) {\n    var $orig = _vm.__get_orig(order)\n    var g0 = order.orderItems.length\n    var f0 = g0 <= 1 ? _vm._f(\"unitPrice\")(order.flowPrice) : null\n    var f1 =\n      (_vm.current === 1 || _vm.current === 2) &&\n      order.serviceType == \"RETURN_GOODS\"\n        ? _vm._f(\"serviceStatusList\")(order.serviceStatus)\n        : null\n    var f2 =\n      (_vm.current === 1 || _vm.current === 2) &&\n      order.serviceType == \"SUPPLY_AGAIN_GOODS\"\n        ? _vm._f(\"serviceStatusList\")(order.serviceStatus)\n        : null\n    var f3 =\n      (_vm.current === 1 || _vm.current === 2) &&\n      order.serviceType == \"RETURN_MONEY\"\n        ? _vm._f(\"serviceStatusList\")(order.serviceStatus)\n        : null\n    var f4 =\n      (_vm.current === 1 || _vm.current === 2) &&\n      order.serviceType == \"EXCHANGE_GOODS\"\n        ? _vm._f(\"serviceStatusList\")(order.serviceStatus)\n        : null\n    var f5 =\n      (_vm.current === 1 || _vm.current === 2) && order.serviceType == \"CANCEL\"\n        ? _vm._f(\"serviceStatusList\")(order.serviceStatus)\n        : null\n    var l0 = _vm.__map(order.orderItems, function (sku, goodsIndex) {\n      var $orig = _vm.__get_orig(sku)\n      var g1 =\n        _vm.current === 0 && sku.afterSaleStatus\n          ? sku.afterSaleStatus.includes(\"ALREADY_APPLIED\")\n          : null\n      var g2 =\n        _vm.current === 0 && sku.afterSaleStatus\n          ? sku.afterSaleStatus.includes(\"EXPIRED\")\n          : null\n      var g3 =\n        _vm.current === 0 && sku.afterSaleStatus\n          ? (order.flowPrice != 0 &&\n              sku.afterSaleStatus.includes(\"NOT_APPLIED\")) ||\n            sku.afterSaleStatus.includes(\"PART_AFTER_SALE\")\n          : null\n      return {\n        $orig: $orig,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n      }\n    })\n    var g4 =\n      _vm.current === 0 &&\n      order.groupAfterSaleStatus &&\n      order.groupAfterSaleStatus != \"ALREADY_APPLIED\" &&\n      order.orderItems.length >= 1\n    var f6 = g4 ? _vm._f(\"unitPrice\")(order.flowPrice) : null\n    return {\n      $orig: $orig,\n      g0: g0,\n      f0: f0,\n      f1: f1,\n      f2: f2,\n      f3: f3,\n      f4: f4,\n      f5: f5,\n      l0: l0,\n      g4: g4,\n      f6: f6,\n    }\n  })\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.tipsShow = true\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./afterSales.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./afterSales.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"content\">\n    <view class=\"u-tabs-box\">\n      <u-tabs\n        bg-color=\"#fff\"\n        :list=\"list\"\n        :is-scroll=\"false\"\n        :current=\"current\"\n        @change=\"change\"\n        :active-color=\"$lightColor\"\n      ></u-tabs>\n    </view>\n    <div class=\"u-tabs-search\">\n      <u-search\n        placeholder=\"请输入订单编号/商品名称/售后单号\"\n        @search=\"submitSearchOrderList(current)\"\n        @clear=\"clear(current)\"\n        @custom=\"submitSearchOrderList(current)\"\n        v-model=\"keywords\"\n      >\n      </u-search>\n    </div>\n    <scroll-view class=\"body-view\" scroll-y @scrolltolower=\"renderDate\">\n      <view\n        class=\"seller-view\"\n        v-for=\"(order, orderIndex) in orderList\"\n        :key=\"orderIndex\"\n      >\n        <!-- 店铺名称 -->\n        <view class=\"seller-info u-flex u-row-between\" v-if=\"current == 0\">\n          <view class=\"seller-name\">\n            <view class=\"name\">{{ order.storeName }}</view>\n          </view>\n          <view class=\"order-sn\">订单编号:{{ order.sn }}</view>\n        </view>\n        <!-- 申请记录 选项卡 -->\n        <view class=\"seller-info u-flex u-row-between\" v-if=\"current != 0\">\n          <view class=\"order-sn\"\n            >售后单号：{{ order.service_sn || order.sn }}</view\n          >\n          <view class=\"order-sn\">{{ order.serviceType_text }}</view>\n        </view>\n        <view v-for=\"(sku, goodsIndex) in order.orderItems\" :key=\"goodsIndex\">\n          <view class=\"goods-item-view\" @click=\"onDetail(order, sku)\">\n            <view class=\"goods-img\">\n              <u-image\n                border-radius=\"6\"\n                width=\"100%\"\n                height=\"100%\"\n                :src=\"sku.image\"\n              ></u-image>\n            </view>\n            <view class=\"goods-info\">\n              <view class=\"goods-title u-line-2\">{{ sku.name }}</view>\n              <!-- 如果商品多个则不显示每个商品价格-->\n              <view class=\"goods-price\" v-if=\"order.orderItems.length <= 1\">\n                ￥{{ order.flowPrice | unitPrice }}\n              </view>\n            </view>\n            <view class=\"goods-num\">\n              <view>x{{ sku.num }}</view>\n            </view>\n          </view>\n          <view class=\"description\">\n            <!-- 售后申请  -->\n            <view v-if=\"current === 0 && sku.afterSaleStatus\">\n              <view\n                v-if=\"sku.afterSaleStatus.includes('ALREADY_APPLIED')\"\n                class=\"cannot_apply not_center\"\n              >\n                <u-icon class=\"icon\" name=\"info-circle-fill\"></u-icon>\n                该商品已申请售后服务\n              </view>\n            </view>\n            <view v-if=\"current === 0 && sku.afterSaleStatus\">\n              <view\n                v-if=\"sku.afterSaleStatus.includes('EXPIRED')\"\n                class=\"cannot_apply not_center\"\n                @click=\"tipsShow = true\"\n              >\n                <u-icon class=\"icon\" name=\"info-circle-fill\"></u-icon>\n                该商品无法申请售后\n              </view>\n            </view>\n\n            <div v-if=\"current === 1 || current === 2\">\n              <!-- 申请中 -->\n              <view\n                class=\"cannot_apply not_center\"\n                v-if=\"order.serviceType == 'RETURN_GOODS'\"\n              >\n                退货处理-{{ order.serviceStatus | serviceStatusList }}</view\n              >\n              <view\n                class=\"cannot_apply not_center\"\n                v-if=\"order.serviceType == 'SUPPLY_AGAIN_GOODS'\"\n              >\n                补发商品-{{ order.serviceStatus | serviceStatusList }}</view\n              >\n              <view\n                class=\"cannot_apply not_center\"\n                v-if=\"order.serviceType == 'RETURN_MONEY'\"\n              >\n                退款-{{ order.serviceStatus | serviceStatusList }}</view\n              >\n              <view\n                class=\"cannot_apply not_center\"\n                v-if=\"order.serviceType == 'EXCHANGE_GOODS'\"\n              >\n                换货-{{ order.serviceStatus | serviceStatusList }}</view\n              >\n              <view\n                class=\"cannot_apply not_center\"\n                v-if=\"order.serviceType == 'CANCEL'\"\n              >\n                取消订单-{{ order.serviceStatus | serviceStatusList }}</view\n              >\n            </div>\n\n            <!-- 申请记录 -->\n          </view>\n          <view class=\"btn-view u-flex u-row-right\">\n            <!-- 售后申请  -->\n\n            <div class=\"sale\" v-if=\"current === 0 && sku.afterSaleStatus\">\n              <div\n                v-if=\"\n\t\t\t\t\t\t\t\t\torder.flowPrice != 0 &&\n                  sku.afterSaleStatus.includes('NOT_APPLIED') ||\n                  sku.afterSaleStatus.includes('PART_AFTER_SALE')\n                \"\n                @click=\"applyService(sku.sn, order, sku)\"\n              >\n                <view class=\"default-btn border\"> 申请售后 </view>\n              </div>\n            </div>\n            <view class=\"after-line\">\n              <!-- 申请中 -->\n              <view\n                class=\"default-btn border\"\n                v-if=\"\n                  current === 2 &&\n                  order.serviceStatus &&\n                  order.serviceStatus == 'PASS' &&\n                  order.serviceType != 'RETURN_MONEY'\n                \"\n                @click=\"onExpress(order, sku)\"\n              >\n                提交物流\n              </view>\n              <view\n                @click=\"close(order, sku)\"\n                v-if=\"current === 1\"\n                class=\"default-btn close\"\n              >\n                取消售后\n              </view>\n              <view\n                @click=\"afterDetails(order, sku)\"\n                v-if=\"current === 1 || current === 2\"\n                class=\"default-btn border\"\n              >\n                售后详情\n              </view>\n            </view>\n          </view>\n        </view>\n        <view\n          v-if=\"\n            current === 0 &&\n            order.groupAfterSaleStatus &&\n            order.groupAfterSaleStatus != 'ALREADY_APPLIED' &&\n            order.orderItems.length >= 1\n          \"\n          class=\"btn-view u-flex u-row-between\"\n        >\n          <!-- 多个商品显示订单总价格 -->\n          <view class=\"cannot_apply\">\n            订单总金额:<span class=\"countMoney\"\n              >￥{{ order.flowPrice | unitPrice }}</span\n            >\n          </view>\n        </view>\n      </view>\n      <u-loadmore bg-color=\"#f8f8f8\" :status=\"status\" />\n    </scroll-view>\n    <u-modal\n      show-cancel-button\n      @confirm=\"closeService\"\n      v-model=\"cancelShow\"\n      content=\"确认取消售后\"\n    ></u-modal>\n    <u-modal\n      v-model=\"tipsShow\"\n      content=\"当订单未确认收货|已过售后服务有效期|已申请售后服务时，不能申请售后\"\n    ></u-modal>\n  </view>\n</template>\n\n<script>\nimport uniLoadMore from \"@/components/uni-load-more/uni-load-more.vue\";\nimport { getAfterSaleList, cancelAfterSale } from \"@/api/after-sale.js\";\nimport { getOrderList } from \"@/api/order.js\";\nimport storage from \"@/utils/storage\";\n\nexport default {\n  components: {\n    uniLoadMore,\n  },\n  data() {\n    return {\n      list: [\n        //tab表头\n        {\n          name: \"售后申请\",\n        },\n        {\n          name: \"申请中\",\n        },\n        {\n          name: \"申请记录\",\n        },\n      ],\n      current: 0, //当前表头索引\n      tipsShow: false, //提示开关\n      cancelShow: false, //取消显示开关\n      selectedOrder: \"\", //选中的order\n      orderList: [], //订单集合\n      params: {\n        pageNumber: 1,\n        pageSize: 10,\n        sort: \"createTime\",\n        flowPrice: 0,\n        order: \"desc\",\n      },\n\n      logParams: {\n        pageNumber: 1,\n        pageSize: 10,\n      },\n      status: \"loadmore\",\n      keywords: \"\", // 搜索订单sn\n    };\n  },\n  onLoad(options) {\n    this.orderList = [];\n    this.params.pageNumber = 1;\n    if (options.orderSn) this.params.keywords = options.orderSn;\n    this.searchOrderList(this.current);\n  },\n  onPullDownRefresh() {\n    this.change(this.current);\n  },\n  methods: {\n    /**\n     * 点击搜索执行搜索\n     */\n    submitSearchOrderList(current) {\n      this.params.pageNumber = 1;\n      this.logParams.pageNumber = 1;\n      this.orderList = [];\n      this.searchOrderList(current);\n    },\n    // 清空\n    clear(current){\n      this.params.pageNumber = 1;\n      this.logParams.pageNumber = 1;\n      this.params.keywords = ''\n      this.orderList = [];\n      this.searchOrderList(current);\n    },\n    /**\n     * 切换tab页时，初始化数据\n     */\n    change(index) {\n      this.current = index;\n      this.params = {\n        pageNumber: 1,\n        pageSize: 10,\n      };\n      this.orderList = [];\n      //如果是2 则读取售后申请记录列表\n      this.searchOrderList(index);\n      uni.stopPullDownRefresh();\n    },\n\n    /**\n     * 搜索初始化\n     * 根据当前tab传值的索引进行更改\n     */\n    searchOrderList(index) {\n      if (index == 0) {\n        this.keywords ? (this.params.keywords = this.keywords) : \"\";\n        this.getOrderList();\n      } else {\n        this.logParams = {\n          pageNumber: 1,\n          pageSize: 10,\n          sort: \"createTime\",\n          order: \"desc\",\n        };\n        if (index === 1) {\n          this.logParams.serviceStatus = \"APPLY\";\n        }\n        this.keywords ? (this.logParams.keywords = this.keywords) : \"\";\n        this.orderList = [];\n        this.getAfterSaleLogList();\n      }\n    },\n\n    /**\n     * 获取订单列表\n     */\n    getOrderList() {\n      uni.showLoading({\n        title: \"加载中\",\n        mask: true,\n      });\n      getOrderList(this.params).then((res) => {\n         if (this.$store.state.isShowToast){ uni.hideLoading() };\n        const orderList = res.data.result.records;\n        if (orderList.length > 0) {\n          this.orderList = this.orderList.concat(orderList);\n          this.params.pageNumber += 1;\n        }\n        if (orderList.length < 10) {\n          this.status = \"nomore\";\n        } else {\n          this.status = \"loading\";\n        }\n      });\n    },\n\n    close(order, sku) {\n      console.log(order, sku);\n      this.selectedOrder = order;\n      this.cancelShow = true;\n    },\n\n    async closeService() {\n      uni.showLoading({\n        title: \"加载中\",\n      });\n      console.log(this.selectedOrder);\n      let res = await cancelAfterSale(this.selectedOrder.sn);\n      if (res.data.success) {\n        uni.showToast({\n          title: \"取消成功!\",\n          duration: 2000,\n          icon: \"none\",\n        });\n      }\n      this.orderList = [];\n      this.searchOrderList(this.current);\n\n       if (this.$store.state.isShowToast){ uni.hideLoading() };\n    },\n\n    /**\n     * 售后详情\n     */\n    afterDetails(order) {\n      uni.navigateTo({\n        url: \"./applyDetail?sn=\" + order.sn,\n      });\n    },\n\n    /**\n     * 申请记录列表\n     */\n    getAfterSaleLogList() {\n      getAfterSaleList(this.logParams).then((res) => {\n        let afterSaleLogList = res.data.result.records;\n\n        afterSaleLogList.forEach((item) => {\n          item.orderItems = [\n            {\n              image: item.goodsImage,\n              skuId: item.skuId,\n              name: item.goodsName,\n              num: item.num,\n              price: item.flowPrice,\n            },\n          ];\n        });\n\n        this.orderList = this.orderList.concat(afterSaleLogList);\n\n        if (afterSaleLogList.length < 10) {\n          this.status = \"nomore\";\n        } else {\n          this.status = \"loading\";\n        }\n      });\n    },\n\n    /**\n     * 申请售后\n     */\n    applyService(sn, order, sku) {\n      let data = {\n        ...order,\n        ...sku,\n      };\n      storage.setAfterSaleData(data);\n      uni.navigateTo({\n        url: `/pages/order/afterSales/afterSalesSelect?sn=${sn}`,\n      });\n    },\n\n    /**\n     * 提交物流信息\n     */\n    onExpress(order, sku) {\n      sku.storeName = order.storeName;\n      let data = {\n        ...order,\n        ...sku,\n      };\n\n      storage.setAfterSaleData(data);\n      uni.navigateTo({\n        url: `./afterSalesDetailExpress?serviceSn=${order.sn}`,\n      });\n    },\n\n    /**\n     * 查看详情\n     */\n    onDetail(goods, sku) {\n      // 售后申请\n      if (this.current == 0) {\n        uni.navigateTo({\n          url: `/pages/product/goods?id=${sku.skuId}&goodsId=${\n            sku.goodsId || sku.goodsId\n          }`,\n        });\n      } else {\n        uni.navigateTo({\n          url: `/pages/product/goods?id=${goods.skuId}&goodsId=${\n            goods.goodsId || goods.goodsId\n          }`,\n        });\n      }\n    },\n\n    /**\n     * 底部加载数据\n     */\n    renderDate() {\n      if (this.current === 0) {\n        this.params.pageNumber += 1;\n        this.getOrderList();\n      } else {\n        this.logParams.pageNumber += 1;\n        this.getAfterSaleLogList();\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\npage,\n.content {\n  background: $page-color-base;\n  height: 100%;\n}\n\n.body-view {\n  overflow-y: auto;\n  height: calc(100vh - 44px - 80rpx - 104rpx);\n}\n\n.u-tabs-search {\n  padding: 20rpx;\n  background: #fff;\n}\n\n.countMoney {\n  margin-left: 7rpx;\n  color: $main-color;\n  font-size: 28rpx;\n}\n\n.seller-view {\n  background-color: #fff;\n  margin: 20rpx 0rpx;\n  padding: 0rpx 20rpx;\n  border-radius: 20rpx;\n\n  .seller-info {\n    height: 70rpx;\n\n    .seller-name {\n      font-size: 28rpx;\n      display: flex;\n      flex-direction: row;\n\n      .name {\n        margin-left: 15rpx;\n        margin-top: -2rpx;\n      }\n    }\n\n    .order-sn {\n      font-size: 22rpx;\n      color: #909399;\n    }\n  }\n\n  .goods-item-view {\n    display: flex;\n    flex-direction: row;\n    padding: 10rpx 10rpx;\n\n    .goods-img {\n      width: 131rpx;\n      height: 131rpx;\n    }\n\n    .goods-info {\n      padding-left: 30rpx;\n      flex: 1;\n\n      .goods-title {\n        margin-bottom: 10rpx;\n        color: #333333;\n      }\n\n      .goods-specs {\n        font-size: 24rpx;\n        margin-bottom: 10rpx;\n        color: #cccccc;\n      }\n\n      .goods-price {\n        font-size: 28rpx;\n        margin-bottom: 10rpx;\n        color: #ff5a10;\n      }\n    }\n\n    .goods-num {\n      width: 60rpx;\n      color: $main-color;\n    }\n  }\n\n  .btn-view {\n    padding: 16rpx 0;\n\n    .after-line {\n      display: flex;\n      line-height: 90rpx;\n    }\n  }\n}\n\n.description {\n  color: #909399;\n  size: 25rpx;\n}\n\n.cannot_apply {\n  text-align: center;\n  font-size: 22rpx;\n\n  color: #999999;\n  height: 70rpx;\n  line-height: 70rpx;\n}\n.not_center {\n  text-align: left;\n}\n\n.icon {\n  margin-right: 10rpx;\n}\n\n.sale {\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.default-btn {\n  background-color: #ffffff;\n  margin-left: 15rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  text-align: center;\n  font-size: 24rpx;\n  padding: 0 24rpx;\n  border-radius: 200px;\n}\n\n.close {\n  color: $light-color;\n}\n\n.border {\n  border: 2rpx solid $light-color;\n  color: $light-color;\n}\n</style>\n","import mod from \"-!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./afterSales.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./afterSales.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1730077887189\n      var cssReload = require(\"D:/Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}