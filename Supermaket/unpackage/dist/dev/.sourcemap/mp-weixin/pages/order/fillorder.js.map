{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Desktop/code/ending/shop/pages/order/fillorder.vue?6f87","webpack:///D:/Desktop/code/ending/shop/pages/order/fillorder.vue?387f","webpack:///D:/Desktop/code/ending/shop/pages/order/fillorder.vue?5a04","webpack:///D:/Desktop/code/ending/shop/pages/order/fillorder.vue?30d2","uni-app:///pages/order/fillorder.vue","webpack:///D:/Desktop/code/ending/shop/pages/order/fillorder.vue?b35f","webpack:///D:/Desktop/code/ending/shop/pages/order/fillorder.vue?36c8","webpack:///D:/Desktop/code/ending/shop/pages/order/fillorder.vue?e20a","webpack:///D:/Desktop/code/ending/shop/pages/order/fillorder.vue?9d55"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","onLoad","components","invoices","data","configs","userImage","invoiceFlag","shippingText","shippingFlag","shippingMethod","shippingWay","value","label","isAssemble","remarkFlag","selectAddressId","routerVal","params","couponList","address","shopAddress","receiptList","orderMessage","remarkVal","remarkVal1","detail","endWay","masterWay","pintuanFlage","notSupportFreight","notSupportFreightGoodsList","storeAddress","originOrderData","watch","handler","immediate","deep","computed","filters","receiptType","onBackPress","console","routes","item","uni","url","onShow","mask","decodeURIComponent","mounted","methods","callbackInvoice","val","submit","way","API_Order","receipt","navigateToStore","clickToAddress","encodeURIComponent","JSON","clickToStoreAddress","pintuanWay","invoice","GET_Discount","selectedCoupon","Object","store","skus","key","navigateTo","createTradeFun","title","duration","icon","client","remark","parentOrderSn","API_Trade","pay","sn","price","getUserAddress","API_Address","res","getDistribution","shopRes","shopList","confirmDistribution","getOrderList","repeatData","storeId"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,kBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkI;AAClI;AAC6D;AACL;AACqC;AACC;;;AAG9F;AAC8L;AAC9L,gBAAgB,kMAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,gGAAM;AACR,EAAE,yGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,kMAEN;AACP,KAAK;AACL;AACA,aAAa,kMAEN;AACP,KAAK;AACL;AACA,aAAa,oQAEN;AACP,KAAK;AACL;AACA,aAAa,oNAEN;AACP,KAAK;AACL;AACA,aAAa,4OAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3LA;AAAA;AAAA;AAAA;AAA6uB,CAAgB,4tBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;ACoYjwB;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAC;IACA;EACA;EACAC;IACAC;EACA;EAEAC;IACA;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC,cACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACAC;MAAA;MACA;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACAnB;MACA;MACAoB;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAEAC;IACA;EACA;;EACAC;IACA;IACAV;MACAW;QACA;MACA;MACAC;MACAC;IACA;EACA;EACAC,4BACA,gCACA;EACAC;IACA;AACA;AACA;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;MAAA;IAEA;EACA;EAEA;AACA;AACA;EACAC;IACAC;IACA;MACA;MACA;MACAC;QACA,IACAC,8CACAA,iDACA;UACAC;YACAC;UACA;QACA;MACA;MACAJ;MACA;QACAG;UACAC;QACA;MACA;QACAD;MACA;MACA;IACA;EACA;EAEAE;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;cACA;cACA;gBACA;cACA;cACAF;gBACAG;cACA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA,OACA;YAAA;cACA;gBACAH;cACA;cACA;gBACA;gBACA,yCACAI,gDACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAC;EAEAC;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBAAA,KACAC;kBAAA;kBAAA;gBAAA;gBACAC;kBACAC;gBAAA,GACA;gBAAA;gBAAA,OAEAC;cAAA;gBAAAC;gBACA;kBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MACAb;QACAC;MACA;IACA;IACA;IACAa;MACA,oEAEA,4CACAC,mBACAC,2CACA,EACA;IACA;IACAC;MACA,yEACA,mEACA;IACA;IAEA;IACAC;MACA;MAEA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA,sCACAC;MACA,IACA,kCACAC,gDACA;QACA,uCACA,+BACA;QACA,oBACA;QACAD;MACA;MACA;QACAtB;UACAwB;UACAC;QACA;MACA;MACAD;MACAC;MACAxB;QACAyB;QACAlE;MACA;MACA,uDACA,kHACA;IACA;IAEA;AACA;AACA;IACAmE;MACA1B;QACAC;MACA;IACA;IAEA;AACA;AACA;IAEA;IACA0B;MAAA;MACA;MACA;QACA;UACA;YACA3B;cACA4B;cACAC;cACAC;YACA;YACA;UACA;QACA;UACA;YACA9B;cACA4B;cACAC;cACAC;YACA;YACA;UACA;QACA;;QAEA;QACA;QAKAC;QAMA;UACAA;UACArB;UACAsB;UACAC;QACA;QACA;QACA,uEACAxB,8DACA;;QAEA;AACA;AACA;QACAyB;UACA;YACAlC;cACA4B;cACAC;cACAC;YACA;YACA;YACA;cACA9B;gBACAC;cACA;YACA;cAEA;cACA;YAQA;UACA;YACAD;cACA4B;cACAC;cACAC;YACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAK;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MACA;MACAC;QACA;UACAC,uCACAA;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAP;kBACAxB;gBACA;cAAA;gBAFAgC;gBAIA;kBACAC;kBACAjC;kBACAb;kBACA;oBACA8C;sBACA;wBACAjC;sBACA;oBACA;kBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAkC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAV;kBACArE;kBACA6C;gBACA;cAAA;gBAHA8B;gBAKA;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAK;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBACAX;kBACA;kBACA;kBAEA,IACA,mCACAM,6CACA;oBAEA;sBACAxC;wBACAC;sBACA;oBACA;kBAEA;kBACA;oBAEA;sBACAD;wBACAC;sBACA;oBACA;kBAEA;kBAEA;kBACAuC;oBACA;oBACAM;sBACAd,4BACA,+CACA,8BACAjC,cACAA;sBACAgD;oBACA;oBAEA;kBACA;kBAEA;kBACA;AACA;AACA;AACA;kBACA;kBACA;kBAEA;oBACA;oBACA;kBACA;oBACA;oBACAP,qDACAA;kBACA;kBACA;oBACA;oBACA3C;kBACA;kBACA,IACA2C,qCACAA,+CACA;oBACA;oBAEAA;sBACA;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA,EAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACj2BA;AAAA;AAAA;AAAA;AAA8kC,CAAgB,mhCAAG,EAAC,C;;;;;;;;;;;ACAlmC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAA45C,CAAgB,uzCAAG,EAAC,C;;;;;;;;;;;ACAh7C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/order/fillorder.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/order/fillorder.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./fillorder.vue?vue&type=template&id=6a3a91c1&scoped=true&\"\nvar renderjs\nimport script from \"./fillorder.vue?vue&type=script&lang=js&\"\nexport * from \"./fillorder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./fillorder.vue?vue&type=style&index=0&id=6a3a91c1&scoped=true&lang=css&\"\nimport style1 from \"./fillorder.vue?vue&type=style&index=1&id=6a3a91c1&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a3a91c1\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order/fillorder.vue\"\nexport default component.exports","export * from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fillorder.vue?vue&type=template&id=6a3a91c1&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-image/u-image\" */ \"@/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uRow: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-row/u-row\" */ \"@/uview-ui/components/u-row/u-row.vue\"\n      )\n    },\n    uCol: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-col/u-col\" */ \"@/uview-ui/components/u-col/u-col.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-input/u-input\" */ \"@/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uSelect: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-select/u-select\" */ \"@/uview-ui/components/u-select/u-select.vue\"\n      )\n    },\n    uNoticeBar: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-notice-bar/u-notice-bar\" */ \"@/uview-ui/components/u-notice-bar/u-notice-bar.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.shippingText == \"LOGISTICS\" &&\n    _vm.orderMessage.cartTypeEnum != \"VIRTUAL\" &&\n    !!_vm.address.id\n      ? _vm.address.consigneeAddressPath.length\n      : null\n  var f0 =\n    _vm.shippingText == \"LOGISTICS\" &&\n    _vm.orderMessage.cartTypeEnum != \"VIRTUAL\" &&\n    !!_vm.address.id\n      ? _vm._f(\"secrecyMobile\")(_vm.address.mobile)\n      : null\n  var l1 = _vm.__map(_vm.orderMessage.cartList, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var l0 = item.checked\n      ? _vm.__map(item.checkedSkuList, function (val, i) {\n          var $orig = _vm.__get_orig(val)\n          var g1 = _vm.$options.filters.goodsFormatPrice(val.purchasePrice)\n          var g2 = _vm.$options.filters.goodsFormatPrice(val.purchasePrice)\n          return {\n            $orig: $orig,\n            g1: g1,\n            g2: g2,\n          }\n        })\n      : null\n    var g3 =\n      item.checked && _vm.orderMessage.cartTypeEnum != \"VIRTUAL\"\n        ? _vm.shippingMethod.find(function (e) {\n            return e.value == _vm.shippingText\n          })\n        : null\n    return {\n      $orig: $orig,\n      l0: l0,\n      g3: g3,\n    }\n  })\n  var g4 = _vm.shippingMethod.length\n  var f1 = _vm.orderMessage.priceDetailDTO\n    ? _vm._f(\"unitPrice\")(_vm.orderMessage.priceDetailDTO.goodsPrice)\n    : null\n  var f2 =\n    _vm.orderMessage.priceDetailDTO &&\n    _vm.shippingText == \"LOGISTICS\" &&\n    _vm.orderMessage.cartTypeEnum != \"VIRTUAL\" &&\n    !(_vm.orderMessage.priceDetailDTO.freightPrice == 0)\n      ? _vm._f(\"unitPrice\")(_vm.orderMessage.priceDetailDTO.freightPrice)\n      : null\n  var f3 =\n    _vm.orderMessage.priceDetailDTO &&\n    _vm.orderMessage.priceDetailDTO.goodsPrice != 0 &&\n    _vm.orderMessage.priceDetailDTO.goodsPrice != null &&\n    _vm.orderMessage.priceDetailDTO &&\n    _vm.orderMessage.priceDetailDTO.couponPrice\n      ? _vm._f(\"unitPrice\")(_vm.orderMessage.priceDetailDTO.couponPrice)\n      : null\n  var g5 =\n    _vm.orderMessage.priceDetailDTO &&\n    _vm.orderMessage.priceDetailDTO.goodsPrice != 0 &&\n    _vm.orderMessage.priceDetailDTO.goodsPrice != null &&\n    !(\n      _vm.orderMessage.priceDetailDTO &&\n      _vm.orderMessage.priceDetailDTO.couponPrice\n    )\n      ? _vm.orderMessage.canUseCoupons.length || \"0\"\n      : null\n  var f4 =\n    _vm.orderMessage.priceDetailDTO &&\n    _vm.orderMessage.priceDetailDTO.couponPrice\n      ? _vm._f(\"unitPrice\")(_vm.orderMessage.priceDetailDTO.couponPrice)\n      : null\n  var f5 =\n    _vm.orderMessage.priceDetailDTO &&\n    _vm.orderMessage.priceDetailDTO.discountPrice\n      ? _vm._f(\"unitPrice\")(_vm.orderMessage.priceDetailDTO.discountPrice)\n      : null\n  var g6 = _vm.notSupportFreight.length\n  var g7 =\n    _vm.orderMessage.priceDetailDTO && !_vm.orderMessage.priceDetailDTO.payPoint\n      ? _vm.$options.filters.goodsFormatPrice(\n          _vm.orderMessage.priceDetailDTO.flowPrice\n        )\n      : null\n  var g8 =\n    _vm.orderMessage.priceDetailDTO && !_vm.orderMessage.priceDetailDTO.payPoint\n      ? _vm.$options.filters.goodsFormatPrice(\n          _vm.orderMessage.priceDetailDTO.flowPrice\n        )\n      : null\n  var f6 =\n    _vm.orderMessage.priceDetailDTO &&\n    !!_vm.orderMessage.priceDetailDTO.payPoint\n      ? _vm._f(\"unitPrice\")(_vm.orderMessage.priceDetailDTO.payPoint)\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.shippingFlag = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.shippingFlag = true\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        f0: f0,\n        l1: l1,\n        g4: g4,\n        f1: f1,\n        f2: f2,\n        f3: f3,\n        g5: g5,\n        f4: f4,\n        f5: f5,\n        g6: g6,\n        g7: g7,\n        g8: g8,\n        f6: f6,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fillorder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fillorder.vue?vue&type=script&lang=js&\"","<template>\r\n  <div class=\"wrapper\">\r\n    <!-- 选择地址 -->\r\n    <div\r\n      class=\"address-box\"\r\n      @click=\"clickToAddress()\"\r\n      v-if=\"shippingText == 'LOGISTICS' && orderMessage.cartTypeEnum != 'VIRTUAL'\"\r\n    >\r\n      <div class=\"user-box flex\">\r\n        <div class=\"flex-8\">\r\n          <div v-if=\"!address.id\">请选择地址</div>\r\n          <div v-else>\r\n            <div class=\"user-address\">\r\n              <!-- 省市区 -->\r\n              <div class=\"flex flex-a-c\">\r\n                <span class=\"default\" v-if=\"address.isDefault\">默认</span>\r\n                <div\r\n                  class=\"address-list\"\r\n                  v-if=\"address.consigneeAddressPath.length != 0\"\r\n                >\r\n                  <span\r\n                    class=\"address-item\"\r\n                    v-for=\"(item, index) in address.consigneeAddressPath\"\r\n                    :key=\"index\"\r\n                  >\r\n                    {{ item }}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <!-- 详细地址 -->\r\n              <div class=\"user-address-detail wes-2\">\r\n                {{ address.detail }}\r\n              </div>\r\n              <!-- 姓名 手机号 -->\r\n              <div>\r\n                <span>{{ address.name }}</span>\r\n                <span class=\"mobile\">{{ address.mobile | secrecyMobile }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <u-icon name=\"arrow-right\" style=\"color: #bababa\"></u-icon>\r\n      </div>\r\n      <!-- 背景 -->\r\n      <div class=\"bar\"></div>\r\n    </div>\r\n    <!-- 选择自提点 -->\r\n    <div class=\"address-box\" v-if=\"shippingText == 'SELF_PICK_UP'\">\r\n      <div @click=\"clickToStoreAddress()\">\r\n        <div class=\"user-box flex\">\r\n          <div class=\"flex-8\">\r\n            <div v-if=\"storeAddress\">\r\n              <div class=\"user-address\">\r\n                <!-- 自提点地址 -->\r\n                <div class=\"user-address-detail wes-2\">\r\n                  {{ storeAddress.address }}\r\n                </div>\r\n                <!-- 联系手机号 -->\r\n                <div></div>\r\n              </div>\r\n            </div>\r\n            <div v-else>请选择自提点</div>\r\n          </div>\r\n          <u-icon name=\"arrow-right\" style=\"color: #bababa\"></u-icon>\r\n        </div>\r\n        <!-- 背景 -->\r\n        <div class=\"bar\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 开团信息 -->\r\n    <view class=\"group-box\" v-if=\"isAssemble\">\r\n      <view class=\"group-title\">\r\n        <span v-if=\"pintuanFlage\">你正在开团购买</span>\r\n        <span v-else\r\n          >为你加入仅差<span>{{ routerVal.parentOrder.toBeGroupedNum }}</span\r\n          >人的团购买</span\r\n        >\r\n      </view>\r\n      <view class=\"group\">\r\n        <view>\r\n          <u-image\r\n            borderRadius=\"50%\"\r\n            shape=\"square\"\r\n            class=\"head-img\"\r\n            width=\"81rpx\"\r\n            height=\"81rpx\"\r\n            :src=\"masterWay.face || userImage\"\r\n          ></u-image>\r\n          <view class=\"btn-one\">团长</view>\r\n        </view>\r\n        <view class=\"line\"> </view>\r\n        <view>\r\n          <!-- 如果有最后一名，显示最后一名，没有最后一名，显示等待参团 -->\r\n          <u-image\r\n            class=\"head-img\"\r\n            v-if=\"endWay.face\"\r\n            :src=\"endWay.face\"\r\n            borderRadius=\"50%\"\r\n            shape=\"square\"\r\n            width=\"81rpx\"\r\n            height=\"81rpx\"\r\n          >\r\n            <view slot=\"loading\"></view>\r\n          </u-image>\r\n          <u-image\r\n            class=\"head-img\"\r\n            borderRadius=\"50%\"\r\n            shape=\"square\"\r\n            v-else\r\n            width=\"81rpx\"\r\n            height=\"81rpx\"\r\n            :src=\"endWay.face || userImage\"\r\n          ></u-image>\r\n\r\n          <view class=\"wait\">{{ endWay.nickname || \"等待参团\" }}</view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 店铺商品信息 -->\r\n    <div\r\n      class=\"box box2\"\r\n      v-for=\"(item, index) in orderMessage.cartList\"\r\n      :key=\"index\"\r\n    >\r\n      <div v-if=\"item.checked\">\r\n        <div @click=\"navigateToStore(item)\">\r\n          <div class=\"store-name\">\r\n            <span>{{ item.storeName }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"promotionNotice\">{{ item.promotionNotice || \"\" }}</div>\r\n        <div\r\n          class=\"flex goods-item\"\r\n          v-for=\"(val, i) in item.checkedSkuList\"\r\n          :key=\"i\"\r\n        >\r\n          <div\r\n            class=\"goods-image\"\r\n            @click=\"\r\n              navigateTo(\r\n                '/pages/product/goods?id=' +\r\n                  val.goodsSku.id +\r\n                  '&goodsId=' +\r\n                  val.goodsSku.goodsId\r\n              )\r\n            \"\r\n            :span=\"3\"\r\n          >\r\n            <u-image\r\n              borderRadius=\"10rpx\"\r\n              width=\"200rpx\"\r\n              height=\"200rpx\"\r\n              :src=\"val.goodsSku.thumbnail\"\r\n              alt\r\n            />\r\n          </div>\r\n          <div\r\n            @click=\"\r\n              navigateTo(\r\n                '/pages/product/goods?id=' +\r\n                  val.goodsSku.id +\r\n                  '&goodsId=' +\r\n                  val.goodsSku.goodsId\r\n              )\r\n            \"\r\n            class=\"goods-detail\"\r\n          >\r\n            <div class=\"flex\">\r\n              <p class=\"goods-name\">{{ val.goodsSku.goodsName }}</p>\r\n              <span class=\"nums\">x{{ val.num }}</span>\r\n            </div>\r\n            <p class=\"goods-prices\">\r\n              <span>￥</span>\r\n              <span class=\"goods-price\">{{\r\n                $options.filters.goodsFormatPrice(val.purchasePrice)[0]\r\n              }}</span>\r\n              <span\r\n                >.{{\r\n                  $options.filters.goodsFormatPrice(val.purchasePrice)[1]\r\n                }}</span\r\n              >\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <u-row>\r\n          <u-col :offset=\"0\" :span=\"4\">发票信息</u-col>\r\n          <u-col\r\n            :span=\"8\"\r\n            class=\"tipsColor\"\r\n            textAlign=\"right\"\r\n            @click.native=\"invoice()\"\r\n          >\r\n            <span v-if=\"receiptList\"\r\n              >{{ receiptList.receiptTitle }} -\r\n              {{ receiptList.receiptContent }}</span\r\n            >\r\n            <span v-else>不开发票</span>\r\n          </u-col>\r\n        </u-row>\r\n        <u-row>\r\n          <u-col\r\n            v-if=\"orderMessage.cartTypeEnum != 'VIRTUAL'\"\r\n            :offset=\"0\"\r\n            :span=\"9\"\r\n            @click=\"shippingFlag = true\"\r\n            >配送\r\n          </u-col>\r\n          <u-col\r\n            v-if=\"orderMessage.cartTypeEnum != 'VIRTUAL'\"\r\n            :span=\"3\"\r\n            textAlign=\"right\"\r\n            @click=\"shippingFlag = true\"\r\n          >\r\n            {{\r\n              shippingMethod.find((e) => {\r\n                return e.value == shippingText;\r\n              }).label\r\n            }}\r\n          </u-col>\r\n        </u-row>\r\n        <u-row>\r\n          <u-col :offset=\"0\" :span=\"4\" class=\"tl\" style=\"text-align: left\"\r\n            >备注信息</u-col\r\n          >\r\n          <u-col :span=\"8\" textAlign=\"right\">\r\n            <u-input\r\n              style=\"text-align: right\"\r\n              class=\"uinput\"\r\n              v-model=\"remarkVal[index].remark\"\r\n            />\r\n          </u-col>\r\n        </u-row>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 发票信息 -->\r\n    <invoices\r\n      :res=\"receiptList\"\r\n      @callbackInvoice=\"callbackInvoice\"\r\n      v-if=\"invoiceFlag\"\r\n    />\r\n    <u-select\r\n      @confirm=\"confirmDistribution\"\r\n      v-model=\"shippingFlag\"\r\n      v-if=\"shippingMethod.length != 0\"\r\n      :list=\"shippingMethod\"\r\n    ></u-select>\r\n\r\n    <div class=\"box box5\" v-if=\"orderMessage.priceDetailDTO\">\r\n      <div>\r\n        <u-row>\r\n          <u-col :span=\"9\">商品合计</u-col>\r\n          <u-col :span=\"3\" textAlign=\"right\">\r\n            <span\r\n              >￥{{ orderMessage.priceDetailDTO.goodsPrice | unitPrice }}</span\r\n            >\r\n          </u-col>\r\n        </u-row>\r\n      </div>\r\n      <div>\r\n        <u-row v-if=\"shippingText == 'LOGISTICS'\">\r\n          <u-col v-if=\"orderMessage.cartTypeEnum != 'VIRTUAL'\" :span=\"7\"\r\n            >运费</u-col\r\n          >\r\n          <u-col\r\n            v-if=\"orderMessage.cartTypeEnum != 'VIRTUAL'\"\r\n            :span=\"5\"\r\n            class=\"tr tipsColor\"\r\n            textAlign=\"right\"\r\n          >\r\n            <span v-if=\"orderMessage.priceDetailDTO.freightPrice == 0\"\r\n              >包邮</span\r\n            >\r\n            <span v-else\r\n              >￥{{\r\n                orderMessage.priceDetailDTO.freightPrice | unitPrice\r\n              }}</span\r\n            >\r\n          </u-col>\r\n        </u-row>\r\n      </div>\r\n      <u-row\r\n        v-if=\"\r\n          orderMessage.priceDetailDTO.goodsPrice != 0 &&\r\n          orderMessage.priceDetailDTO.goodsPrice != null\r\n        \"\r\n      >\r\n        <u-col :offset=\"0\" :span=\"9\" @click=\"GET_Discount()\">优惠券</u-col>\r\n        <u-col\r\n          :span=\"3\"\r\n          v-if=\"\r\n            orderMessage.priceDetailDTO &&\r\n            orderMessage.priceDetailDTO.couponPrice\r\n          \"\r\n          textAlign=\"right\"\r\n          @click=\"GET_Discount()\"\r\n        >\r\n          <span class=\"main-color\"\r\n            >-￥{{ orderMessage.priceDetailDTO.couponPrice | unitPrice }}</span\r\n          >\r\n        </u-col>\r\n        <!--  orderMessage.priceDetailDTO.couponPrice | unitPrice  -->\r\n        <u-col :span=\"3\" v-else textAlign=\"right\" @click=\"GET_Discount()\">\r\n          {{ orderMessage.canUseCoupons.length || \"0\" }} 张可用\r\n          <u-icon name=\"arrow-right\"></u-icon>\r\n        </u-col>\r\n      </u-row>\r\n      <div>\r\n        <u-row>\r\n          <u-col :span=\"9\">优惠金额</u-col>\r\n          <u-col\r\n            :span=\"3\"\r\n            textAlign=\"right\"\r\n            v-if=\"orderMessage.priceDetailDTO.couponPrice\"\r\n          >\r\n            <span class=\"main-color\">\r\n              -￥{{ orderMessage.priceDetailDTO.couponPrice | unitPrice }}</span\r\n            >\r\n          </u-col>\r\n          <u-col :span=\"3\" textAlign=\"right\" v-else>0.00</u-col>\r\n        </u-row>\r\n      </div>\r\n      <div>\r\n        <u-row>\r\n          <u-col :span=\"6\">活动优惠</u-col>\r\n          <u-col :span=\"6\" class=\"tr tipsColor\" textAlign=\"right\">\r\n            <span v-if=\"orderMessage.priceDetailDTO.discountPrice\"\r\n              >-￥{{\r\n                orderMessage.priceDetailDTO.discountPrice | unitPrice\r\n              }}</span\r\n            >\r\n            <span v-else>0.00</span>\r\n          </u-col>\r\n        </u-row>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 配送地区没有提示 -->\r\n    <div class=\"notSupportFreight\" v-if=\"notSupportFreight.length != 0\">\r\n      <u-notice-bar\r\n        style=\"width: 100%\"\r\n        :volume-icon=\"false\"\r\n        mode=\"horizontal\"\r\n        :list=\"notSupportFreightGoodsList\"\r\n      >\r\n      </u-notice-bar>\r\n    </div>\r\n\r\n    <!-- 结账 -->\r\n\r\n    <div class=\"box6 mp-iphonex-bottom\" v-if=\"orderMessage.priceDetailDTO\">\r\n      <div class=\"tabbar-left\">\r\n        <div v-if=\"!orderMessage.priceDetailDTO.payPoint\" class=\"number\">\r\n          <span>¥</span>\r\n          <span class=\"price\">{{\r\n            $options.filters.goodsFormatPrice(\r\n              orderMessage.priceDetailDTO.flowPrice\r\n            )[0]\r\n          }}</span>\r\n          <span\r\n            >.{{\r\n              $options.filters.goodsFormatPrice(\r\n                orderMessage.priceDetailDTO.flowPrice\r\n              )[1]\r\n            }}\r\n          </span>\r\n        </div>\r\n        <span v-else class=\"number\"\r\n          ><span style=\"margin-right: 10rpx\">{{\r\n            orderMessage.priceDetailDTO.payPoint | unitPrice\r\n          }}</span\r\n          >积分</span\r\n        >\r\n      </div>\r\n      <div class=\"navRiv\" @click=\"createTradeFun()\">\r\n        <!-- #ifndef MP-WEIXIN -->\r\n        <div class=\"tabbar-right\">提交订单</div>\r\n        <!-- #endif -->\r\n        <!-- #ifdef MP-WEIXIN -->\r\n        <div class=\"tabbar-right\">微信支付</div>\r\n        <!-- #endif -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport * as API_Address from \"@/api/address\";\r\nimport * as API_Order from \"@/api/order\";\r\nimport * as API_Trade from \"@/api/trade\";\r\nimport configs from \"@/config/config\";\r\nimport LiLiWXPay from \"@/js_sdk/lili-pay/wx-pay.js\";\r\nimport invoices from \"@/pages/order/invoice/setInvoice\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  onLoad: function (val) {\r\n    this.routerVal = val;\r\n  },\r\n  components: {\r\n    invoices,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      configs,\r\n      userImage: configs.defaultUserPhoto,\r\n      invoiceFlag: false, //开票开关\r\n      shippingText: \"LOGISTICS\",\r\n      shippingFlag: false,\r\n      shippingMethod: [],\r\n      shippingWay: [\r\n        {\r\n          value: \"LOGISTICS\",\r\n          label: \"物流\",\r\n        },\r\n        {\r\n          value: \"SELF_PICK_UP\",\r\n          label: \"自提\",\r\n        },\r\n      ],\r\n      isAssemble: false, //是否拼团\r\n      // 判断是否填写过备注\r\n      remarkFlag: false,\r\n      selectAddressId: \"\",\r\n      routerVal: \"\",\r\n      params: {},\r\n      // 优惠劵\r\n      couponList: \"\",\r\n      // 已选地址\r\n      address: \"\",\r\n      shopAddress: \"\",\r\n      // 发票信息\r\n      receiptList: \"\",\r\n      // 店铺信息\r\n      orderMessage: \"\",\r\n      data: \"\",\r\n      // 存储备注\r\n      remarkVal: [],\r\n      remarkVal1: \"\",\r\n      detail: \"\", //返回的所有数据\r\n      endWay: \"\", //最后一个参团人\r\n      masterWay: \"\", //团长信息\r\n      pintuanFlage: true, //是开团还是拼团\r\n      notSupportFreight: [], //不支持运费\r\n      notSupportFreightGoodsList: [\"以下商品超出配送范围：\"],\r\n      storeAddress: \"\",\r\n\r\n      originOrderData:\"\", // 原始订单数据\r\n    };\r\n  },\r\n  watch: {\r\n    // 监听备注 并在 vuex 中存储\r\n    remarkVal: {\r\n      handler(val) {\r\n        this.$store.commit(\"setRemark\", val);\r\n      },\r\n      immediate: true,\r\n      deep: true,\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState([\"remark\"]),\r\n  },\r\n  filters: {\r\n    /**\r\n     * 发票收据类型\r\n     */\r\n    receiptType(type) {\r\n      switch (type) {\r\n        case \"VATORDINARY\":\r\n          return \"增值税普通发票\";\r\n        case \"ELECTRO\":\r\n          return \"电子普通发票\";\r\n        case \"VATOSPECIAL\":\r\n          return \"增值税专用发票\";\r\n        default:\r\n          return \"不开发票\";\r\n      }\r\n    },\r\n  },\r\n\r\n  /**\r\n   * 监听返回\r\n   */\r\n  onBackPress(e) {\r\n    console.log(\"onBackPress\", e);\r\n    if (e.from == \"backbutton\") {\r\n      let routes = getCurrentPages();\r\n      let curRoute = routes[routes.length - 1].options;\r\n      routes.forEach((item) => {\r\n        if (\r\n          item.route == \"pages/tabbar/cart/cartList\" ||\r\n          item.route.indexOf(\"pages/product/goods\") != -1\r\n        ) {\r\n          uni.navigateTo({\r\n            url: item.route,\r\n          });\r\n        }\r\n      });\r\n      console.log(\"curRoute.addId\",curRoute.addId)\r\n      if (curRoute.addId) {\r\n        uni.reLaunch({\r\n          url: \"/pages/tabbar/cart/cartList\",\r\n        });\r\n      } else {\r\n        uni.navigateBack();\r\n      }\r\n      return true; //阻止默认返回行为\r\n    }\r\n  },\r\n\r\n  async onShow() {\r\n    // 判断是否存在写过备注信息的商品\r\n    if (this.remark && this.remark.length > 0) {\r\n      this.remarkFlag = true;\r\n    }\r\n    uni.showLoading({\r\n      mask: true,\r\n    });\r\n    await this.getOrderList();\r\n    await this.getDistribution();\r\n    if (this.$store.state.isShowToast) {\r\n      uni.hideLoading();\r\n    }\r\n    if (this.routerVal.way == \"PINTUAN\") {\r\n      this.isAssemble = true;\r\n      this.routerVal.parentOrder = JSON.parse(\r\n        decodeURIComponent(this.routerVal.parentOrder)\r\n      );\r\n      this.pintuanWay();\r\n    }\r\n  },\r\n  mounted() {},\r\n\r\n  methods: {\r\n    //发票回调 选择发票之后刷新购物车\r\n    async callbackInvoice(val) {\r\n      this.invoiceFlag = false;\r\n      this.receiptList = val;\r\n      if (val) {\r\n        let submit = {\r\n          way: this.routerVal.way,\r\n          ...this.receiptList,\r\n        };\r\n        let receipt = await API_Order.getReceipt(submit);\r\n        if (receipt.data.success) {\r\n          this.shippingFlag = false;\r\n          this.getOrderList();\r\n        }\r\n      }\r\n    },\r\n\r\n    // 跳转到店铺\r\n    navigateToStore(val) {\r\n      uni.navigateTo({\r\n        url: \"/pages/product/shopPage?id=\" + val.storeId,\r\n      });\r\n    },\r\n    // 点击跳转地址\r\n    clickToAddress() {\r\n      this.navigateTo(\r\n        `/pages/mine/address/address?from=cart&way=${\r\n          this.routerVal.way\r\n        }&parentOrder=${encodeURIComponent(\r\n          JSON.stringify(this.routerVal.parentOrder)\r\n        )}`\r\n      );\r\n    },\r\n    clickToStoreAddress() {\r\n      this.navigateTo(\r\n        `/pages/mine/address/storeAddress?from=cart&way=${this.routerVal.way}&storeId=${this.remarkVal[0].storeId}`\r\n      );\r\n    },\r\n\r\n    // 判断团长以及团员信息\r\n    pintuanWay() {\r\n      const { memberId } = this.routerVal.parentOrder;\r\n\r\n      const userInfo = this.$options.filters.isLogin();\r\n      if (memberId) {\r\n        this.endWay = userInfo;\r\n        this.masterWay = this.routerVal.parentOrder;\r\n        this.pintuanFlage = false;\r\n      } else {\r\n        this.pintuanFlage = true;\r\n        this.masterWay = userInfo;\r\n      }\r\n    },\r\n    // 判断发票\r\n    invoice() {\r\n      this.invoiceFlag = true;\r\n    },\r\n\r\n    // 领取优惠券\r\n    GET_Discount() {\r\n      // 循环店铺id,商品id获取优惠券\r\n      let store = [];\r\n      let skus = [];\r\n      let selectedCoupon = [];\r\n      if (this.orderMessage.platformCoupon)\r\n        selectedCoupon.push(this.orderMessage.platformCoupon.memberCoupon.id);\r\n      if (\r\n        this.orderMessage.storeCoupons &&\r\n        Object.keys(this.orderMessage.storeCoupons)[0]\r\n      ) {\r\n        let storeMemberCouponsId = Object.keys(\r\n          this.orderMessage.storeCoupons\r\n        )[0];\r\n        let storeCouponId =\r\n          this.orderMessage.storeCoupons[storeMemberCouponsId].memberCoupon.id;\r\n        selectedCoupon.push(storeCouponId);\r\n      }\r\n      this.orderMessage.cartList.forEach((item) => {\r\n        item.skuList.forEach((sku) => {\r\n          store.push(sku.storeId);\r\n          skus.push(sku.goodsSku.id);\r\n        });\r\n      });\r\n      store = Array.from(new Set(store));\r\n      skus = Array.from(new Set(skus));\r\n      uni.setStorage({\r\n        key: \"totalPrice\",\r\n        data: this.orderMessage.priceDetailDTO.goodsPrice,\r\n      });\r\n      this.navigateTo(\r\n        `/pages/cart/coupon/index?way=${this.routerVal.way}&storeId=${store}&skuId=${skus}&selectedCoupon=${selectedCoupon}`\r\n      );\r\n    },\r\n\r\n    /**\r\n     * 跳转\r\n     */\r\n    navigateTo(url) {\r\n      uni.navigateTo({\r\n        url,\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 提交订单准备支付\r\n     */\r\n\r\n    // 创建订单\r\n    createTradeFun() {\r\n      // 防抖\r\n      this.$u.throttle(() => {\r\n        if (this.shippingText === \"SELF_PICK_UP\") {\r\n          if (!this.storeAddress.id) {\r\n            uni.showToast({\r\n              title: \"请选择提货点\",\r\n              duration: 2000,\r\n              icon: \"none\",\r\n            });\r\n            return false;\r\n          }\r\n        } else if (this.shippingText === \"LOGISTICS\" && this.orderMessage.cartTypeEnum !== 'VIRTUAL') {\r\n          if (!this.address.id) {\r\n            uni.showToast({\r\n              title: \"请选择地址\",\r\n              duration: 2000,\r\n              icon: \"none\",\r\n            });\r\n            return false;\r\n          }\r\n        }\r\n\r\n        //  创建订单\r\n        let client;\r\n        // #ifdef H5\r\n        client = \"H5\";\r\n        // #endif\r\n        // #ifdef MP-WEIXIN\r\n        client = \"WECHAT_MP\";\r\n        // #endif\r\n        // #ifdef APP-PLUS\r\n        client = \"APP\";\r\n        // #endif\r\n\r\n        let submit = {\r\n          client,\r\n          way: this.routerVal.way,\r\n          remark: this.remarkVal,\r\n          parentOrderSn: \"\",\r\n        };\r\n        // 如果是拼团并且当前用户不是团长\r\n        this.routerVal.parentOrder && this.routerVal.parentOrder.orderSn\r\n          ? (submit.parentOrderSn = this.routerVal.parentOrder.orderSn)\r\n          : delete submit.parentOrderSn;\r\n\r\n        /**\r\n         * 创建订单\r\n         */\r\n        API_Trade.createTrade(submit).then((res) => {\r\n          if (res.data.success) {\r\n            uni.showToast({\r\n              title: \"创建订单成功!\",\r\n              duration: 2000,\r\n              icon: \"none\",\r\n            });\r\n            // 如果当前价格为0跳转到订单列表\r\n            if (this.orderMessage.priceDetailDTO.billPrice == 0) {\r\n              uni.navigateTo({\r\n                url: \"/pages/order/myOrder?status=0\",\r\n              });\r\n            } else {\r\n              // #ifdef MP-WEIXIN\r\n              // 微信小程序中点击创建订单直接开始支付\r\n              this.pay(res.data.result.sn);\r\n              // #endif\r\n\r\n              // #ifndef MP-WEIXIN\r\n              this.navigateTo(\r\n                `/pages/cart/payment/payOrder?trade_sn=${res.data.result.sn}`\r\n              );\r\n              // #endif\r\n            }\r\n          } else {\r\n            uni.showToast({\r\n              title: res.data.message,\r\n              duration: 2000,\r\n              icon: \"none\",\r\n            });\r\n          }\r\n        });\r\n      }, 3000);\r\n    },\r\n\r\n    /**\r\n     * 微信小程序中直接支付\r\n     */\r\n    async pay(sn) {\r\n      new LiLiWXPay({\r\n        sn: sn,\r\n        price: this.orderMessage.priceDetailDTO.billPrice,\r\n      }).pay();\r\n    },\r\n\r\n    /**\r\n     * 获取用户地址\r\n     */\r\n    getUserAddress() {\r\n      // 如果没有商品选择地址的话 则选择 默认地址\r\n      API_Address.getAddressDefault().then((res) => {\r\n        if (res.data.result) {\r\n          res.data.result.consigneeAddressPath =\r\n            res.data.result.consigneeAddressPath.split(\",\");\r\n          this.address = res.data.result;\r\n        }\r\n      });\r\n    },\r\n    // 获取配送列表\r\n    async getDistribution() {\r\n      let shopRes = await API_Trade.shippingMethodList({\r\n        way: this.routerVal.way,\r\n      });\r\n      let shopList;\r\n      if (shopRes.data.success) {\r\n        shopList = shopRes.data.result;\r\n        let way = [];\r\n        console.log(shopList);\r\n        this.shippingWay.forEach((item) => {\r\n          shopList.forEach((child) => {\r\n            if (item.value == child) {\r\n              way.push(item);\r\n            }\r\n          });\r\n        });\r\n        this.shippingMethod = way;\r\n      }\r\n    },\r\n\r\n    // 选择配送\r\n    async confirmDistribution(val) {\r\n      let res = await API_Trade.setShipMethod({\r\n        shippingMethod: val[0].value,\r\n        way: this.routerVal.way,\r\n      });\r\n\r\n      this.shippingText = val[0].value;\r\n      if (res.data.success) {\r\n        this.getOrderList();\r\n      }\r\n    },\r\n\r\n    // 获取结算参数\r\n    async getOrderList() {\r\n      this.notSupportFreight = [];\r\n      // 获取结算参数\r\n      API_Trade.getCheckoutParams(this.routerVal.way).then((res) => {\r\n        // 获取结算参数 进行首次判断\r\n        this.originOrderData = this.orderMessage ? JSON.parse(JSON.stringify(this.orderMessage)) : \"\"\r\n        \r\n        if (\r\n          !res.data.result.checkedSkuList ||\r\n          res.data.result.checkedSkuList.length === 0\r\n        ) {\r\n\r\n          if(!this.originOrderData.checkedSkuList.length){\r\n            uni.switchTab({\r\n              url: \"/pages/tabbar/cart/cartList\",\r\n            });\r\n          }\r\n         \r\n        }\r\n        if (res.data.result.skuList.length <= 0) {\r\n\r\n          if(!this.originOrderData.skuList.length){\r\n            uni.navigateTo({\r\n              url: \"/pages/order/myOrder?status=0\",\r\n            });\r\n          }\r\n         \r\n        }\r\n\r\n        let repeatData;\r\n        res.data.result.cartList.forEach((item, index) => {\r\n          // 如果已经写过备注信息的话赋值\r\n          repeatData = {\r\n            remark: this.remarkFlag\r\n              ? this.remark[index].storeId == item.storeId\r\n                ? this.remark[index].remark\r\n                : item.remark\r\n              : item.remark,\r\n            storeId: item.storeId,\r\n          };\r\n\r\n          this.$set(this.remarkVal, index, repeatData);\r\n        });\r\n\r\n        this.orderMessage = res.data.result;\r\n        /**\r\n         * 为了避免路径传值在h5中超出限制问题\r\n         * 这块将可用的优惠券以及不可用的优惠券放入到vuex里面进行存储\r\n         */\r\n        this.$store.state.canUseCoupons = res.data.result.canUseCoupons;\r\n        this.$store.state.cantUseCoupons = res.data.result.cantUseCoupons;\r\n\r\n        if (!res.data.result.memberAddress) {\r\n          // 获取会员默认地址\r\n          this.getUserAddress();\r\n        } else {\r\n          this.address = res.data.result.memberAddress;\r\n          res.data.result.memberAddress.consigneeAddressPath =\r\n            res.data.result.memberAddress.consigneeAddressPath.split(\",\");\r\n        }\r\n        if (res.data.result.storeAddress) {\r\n          this.storeAddress = res.data.result.storeAddress;\r\n          console.log(\"storeAddress\", this.storeAddress);\r\n        }\r\n        if (\r\n          res.data.result.notSupportFreight &&\r\n          res.data.result.notSupportFreight.length != 0\r\n        ) {\r\n          this.notSupportFreight = res.data.result.notSupportFreight;\r\n\r\n          res.data.result.notSupportFreight.forEach((item) => {\r\n            this.notSupportFreightGoodsList[0] += item.goodsSku.goodsName;\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    //\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\npage {\r\n  background: #f7f7f7;\r\n}\r\n</style>\r\n<style scoped lang=\"scss\">\r\n.flex-8 {\r\n  flex: 8;\r\n}\r\n\r\n.main-color {\r\n  color: $main-color;\r\n  font-weight: bold;\r\n}\r\n\r\n.uinput {\r\n  /deep/ input {\r\n    text-align: right;\r\n  }\r\n}\r\n\r\n.promotionNotice {\r\n  font-size: 24rpx;\r\n  margin: 20rpx 0;\r\n  color: $aider-light-color;\r\n}\r\n\r\n.nums {\r\n  flex: 2;\r\n  color: $light-color;\r\n\r\n  text-align: center;\r\n}\r\n\r\n.wait {\r\n  font-size: 22rpx;\r\n  font-family: PingFang SC, PingFang SC-Regular;\r\n  font-weight: 400;\r\n  color: #cccccc;\r\n  text-align: center;\r\n}\r\n\r\n.line {\r\n  margin-left: 14rpx;\r\n  margin-right: 14rpx;\r\n  margin-bottom: 50rpx;\r\n  width: 143rpx;\r\n  border-bottom: 2px dotted #999;\r\n}\r\n\r\n.tabbar-left {\r\n  margin-left: 32rpx;\r\n}\r\n\r\n.btn-one,\r\n.wait {\r\n  margin-top: 14rpx;\r\n}\r\n\r\n.btn-one {\r\n  width: 100rpx;\r\n  height: 40rpx;\r\n  background: $light-color;\r\n  border-radius: 20rpx;\r\n  font-size: 22rpx;\r\n  font-family: PingFang SC, PingFang SC-Regular;\r\n  font-weight: 400;\r\n  text-align: left;\r\n  color: #ffffff;\r\n  text-align: center;\r\n  line-height: 40rpx;\r\n}\r\n\r\n.head-img {\r\n  width: 81rpx;\r\n  height: 81rpx;\r\n  margin: 0 auto;\r\n}\r\n\r\n.group-title {\r\n  text-align: center;\r\n  font-size: 28rpx;\r\n  font-weight: 400;\r\n  color: $light-color;\r\n}\r\n\r\n.group-box {\r\n  height: 242rpx;\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background: #fff;\r\n}\r\n\r\n.group {\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.tr {\r\n  text-align: right;\r\n}\r\n\r\n.tl {\r\n  text-align: left;\r\n}\r\n\r\n/deep/ .u-col-3 {\r\n  text-align: right;\r\n}\r\n\r\n.bar {\r\n  height: 4rpx;\r\n  overflow: hidden;\r\n  width: 100%;\r\n  background: url(\"@/pages/order/imgs/line.png\") no-repeat;\r\n}\r\n\r\n.box2 {\r\n  margin-top: 20rpx;\r\n}\r\n\r\n.notSupportFreight {\r\n  position: fixed;\r\n\r\n  bottom: calc(100rpx + env(safe-area-inset-bottom));\r\n  // #ifdef H5\r\n  bottom: 100rpx;\r\n  // #endif\r\n  display: flex;\r\n  align-items: center;\r\n  left: 0;\r\n  background: #fdf6ec;\r\n  height: 100rpx;\r\n  width: 100%;\r\n  transition: 0.35s;\r\n\r\n  > .tips {\r\n    margin: 0 32rpx;\r\n  }\r\n}\r\n\r\n/deep/ .u-notice-bar-wrap {\r\n  width: 100% !important;\r\n}\r\n\r\n.box6 {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100rpx;\r\n  overflow: hidden;\r\n  line-height: 100rpx;\r\n  margin-bottom: 0px !important;\r\n  background: #fff;\r\n  color: #333;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.tabbar-right {\r\n  margin-top: 10rpx;\r\n  height: 80rpx;\r\n  color: #fff;\r\n  line-height: 80rpx;\r\n  background: linear-gradient(91deg, $light-color 1%, $aider-light-color 99%);\r\n  padding: 0 44rpx;\r\n  text-align: center;\r\n  border-radius: 400px;\r\n  margin-right: 32rpx;\r\n}\r\n\r\n.sp_tag {\r\n  display: inline;\r\n  background: #f2f2f2;\r\n  padding: 0 20rpx 0 10rpx;\r\n  height: 20rpx;\r\n  line-height: 20rpx;\r\n  font-size: 24rpx;\r\n  color: #262626;\r\n  border-radius: 0.4em;\r\n}\r\n\r\n.goods-promotion {\r\n  float: left;\r\n  width: 75%;\r\n  margin: 4rpx 0;\r\n}\r\n\r\n.sp_tag_plain {\r\n  margin-left: 8rpx;\r\n  padding: 0 6rpx 0 6rpx;\r\n  background: #fff;\r\n  border: 1px solid $main-color;\r\n  font-size: 24rpx;\r\n  color: $main-color;\r\n  border-radius: 50px;\r\n}\r\n\r\n.sp_tag_plain:nth-of-type(1) {\r\n  margin-left: 0;\r\n}\r\n\r\n.goods-name {\r\n  flex: 8;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.sp_type {\r\n  color: $u-tips-color;\r\n  padding: 8rpx 0;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.number {\r\n  color: $main-color;\r\n  font-size: 26rpx;\r\n  font-weight: bold;\r\n\r\n  > span {\r\n    font-size: 36rpx;\r\n  }\r\n}\r\n\r\n.goods-prices {\r\n  margin: 10rpx 0;\r\n  color: $main-color;\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n\r\n  > .goods-price {\r\n    font-size: 38rpx;\r\n    padding: 0 2rpx;\r\n  }\r\n}\r\n\r\n.box {\r\n  border-radius: 40rpx;\r\n  overflow: hidden;\r\n  background: #fff;\r\n  margin-bottom: 20rpx;\r\n  color: #666;\r\n  padding: 0 32rpx;\r\n}\r\n\r\n.wrapper {\r\n  height: auto;\r\n  background: #f7f7f7;\r\n  padding-bottom: 200rpx;\r\n  overflow: auto !important;\r\n}\r\n\r\n.store-name {\r\n  margin-top: 32rpx;\r\n  font-weight: 400;\r\n  color: #333333;\r\n}\r\n\r\n/deep/ .u-col {\r\n  padding: 36rpx 0 !important;\r\n}\r\n\r\n/deep/ .u-col-3,\r\n.tipsColor {\r\n  color: #333;\r\n}\r\n\r\n.goods-image {\r\n  text-align: left;\r\n  overflow: hidden;\r\n}\r\n\r\n.default {\r\n  background: $main-color;\r\n  font-size: 24rpx;\r\n  border-radius: 8rpx;\r\n  padding: 0rpx 12rpx;\r\n  color: #fff;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.address-box {\r\n  border-radius: 40rpx;\r\n  border-top-left-radius: 0 !important;\r\n  border-top-right-radius: 0 !important;\r\n  overflow: hidden;\r\n  background: #fff;\r\n  margin-bottom: 20rpx;\r\n  color: #666;\r\n}\r\n\r\n.address-item {\r\n  font-weight: normal;\r\n  letter-spacing: 1rpx;\r\n}\r\n\r\n.user-box {\r\n  padding: 32rpx;\r\n}\r\n\r\n.user-address-detail {\r\n  color: #333;\r\n  font-size: 38rpx;\r\n  font-weight: bold;\r\n  margin: 20rpx 0;\r\n  letter-spacing: 1rpx;\r\n}\r\n\r\n.mobile {\r\n  margin-left: 20rpx;\r\n}\r\n\r\n.price {\r\n  font-size: 50rpx !important;\r\n  margin: 0 2rpx;\r\n}\r\n\r\n.goods-detail {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  justify-content: center;\r\n  flex: 8;\r\n  margin-left: 20rpx !important;\r\n\r\n  > p {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n}\r\n\r\n.goods-item {\r\n  margin: 20rpx 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fillorder.vue?vue&type=style&index=0&id=6a3a91c1&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fillorder.vue?vue&type=style&index=0&id=6a3a91c1&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1730077883657\n      var cssReload = require(\"D:/Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fillorder.vue?vue&type=style&index=1&id=6a3a91c1&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fillorder.vue?vue&type=style&index=1&id=6a3a91c1&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1730077887555\n      var cssReload = require(\"D:/Software/Development/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}