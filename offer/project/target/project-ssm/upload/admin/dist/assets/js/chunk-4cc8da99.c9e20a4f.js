(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cc8da99"],{"1d46":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"warp",attrs:{id:"user_info"}},[r("el-row",{staticClass:"card"},[r("el-col",[r("h1",{staticClass:"text-center"},[e._v(" 个人信息 ")])]),r("el-col",[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[r("el-row",{staticClass:"row_e"},[r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"头像"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{drag:"",accept:"image/gif, image/jpeg, image/png, image/jpg",action:"","http-request":e.uploadAvatar,"show-file-list":!1}},[e.form.avatar?r("img",{staticClass:"avatar",attrs:{src:e.$fullUrl(e.form.avatar)}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"状态",prop:"state"}},[e._v(" "+e._s(e.list_user_state.getVal("name",{value:e.obj.state}))+" ")])],1),r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[e._v(" "+e._s(e.obj.username)+" ")])],1),r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{prop:"nickname",label:"昵称"}},[r("el-input",{attrs:{minlength:0,maxlength:16,placeholder:""},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"用户组",prop:"user_group"}},[e._v(" "+e._s(e.obj.user_group)+" ")])],1),r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[r("el-input",{attrs:{minlength:0,maxlength:64,placeholder:"用户的邮箱，用于找回密码时或登录时"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1),r("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取消")]),e.source_table&&(e.$check_action(e.source_table_check_url,"get")||e.$check_action(e.source_table_check_url,"set"))?r("router-link",{staticClass:"el-button float-right el-button--default el-button--primary",attrs:{to:e.source_table_url}},[e._v("详情 ")]):e._e()],1)],1)],1)],1)],1)],1)},s=[],l=(r("96cf"),r("1da1")),u=r("c6e7"),o={mixins:[u["a"]],components:{},data:function(){return{url_get_obj:"~/api/user/get_obj?",url_set:"~/api/user/set?",url_upload:"~/api/user/upload?",url_user_group_get_obj:"~/api/user_group/get_obj?",source_table:null,source_table_name:null,source_table_check_url:"",source_table_url:"",field:"user_id",query:{user_id:this.$store.state.user.user_id},form:{user_id:this.$store.state.user.user_id,username:"",email:"",nickname:"",avatar:""},list_user_state:[{value:1,name:"可用"},{value:2,name:"异常"},{value:3,name:"已冻结"},{value:4,name:"已注销"}],rules:{nickname:[{required:!0,message:"昵称不能为空！",trigger:"blur"},{min:2,max:16,message:"长度在 2 到 16 个字符",trigger:"blur"}]}}},methods:{uploadAvatar:function(e){this.uploadFile(e.file,"avatar")},submit_check:function(e){var t=null,r=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,a=e.nickname,s=e.email;return a&&a.length>12||a.length<2?t="昵称长度应为2个字符到12个字符之间":s&&!r.test(s)&&(t="请输入正确的邮箱地址 例：test@test.com!"),t},submit_after:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$get_user((function(){r.oauth.signIn?r.user.user_id?(r.$get_auth(r.user.user_group),t&&t(e),r.$router.go(-2)):r.$router.push({path:"/login"}):(t&&t(e),r.$router.go(-2))}));case 1:case"end":return a.stop()}}),a)})))()},get_obj_after:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.$store.state.user.user_group,e.next=3,r.$get("~/api/user_group/get_obj?name="+t);case 3:a=e.sent,a.result&&a.result.obj&&a.result.obj.source_table&&(r.source_table=a.result.obj.source_table,r.source_table_name=t,r.source_table_check_url="/"+r.source_table+"/view",r.source_table_url=r.source_table_check_url+"?user_id="+r.form.user_id);case 5:case"end":return e.stop()}}),e)})))()}},created:function(){}},i=o,n=(r("da36"),r("2877")),c=Object(n["a"])(i,a,s,!1,null,null,null);t["default"]=c.exports},ba39:function(e,t,r){},da36:function(e,t,r){"use strict";r("ba39")}}]);